2025-07-25 16:48:40,042 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:48:40,057 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:48:40,063 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:48:40,063 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:48:40,065 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:48:40,065 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:48:40,256 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 16:48:40,257 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 16:48:40,257 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 16:48:40,257 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 16:48:40,258 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 16:48:40,259 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:48:40,259 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 16:48:40,259 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:49:40.065425+09:00 (in 59.805706 seconds)
2025-07-25 16:48:40,260 - main - INFO - 등록된 잡 목록:
2025-07-25 16:48:40,260 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 16:48:40,260 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 16:48:40,261 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 16:48:40,261 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 16:49:39,581 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:49:39,582 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:49:40.065425+09:00 (in 0.483421 seconds)
2025-07-25 16:49:40,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:49:40,067 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:50:40 KST)" (scheduled at 2025-07-26 01:49:40.065425+09:00)
2025-07-25 16:49:40,067 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:50:40.065425+09:00 (in 59.997502 seconds)
2025-07-25 16:49:40,068 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:49:40.068550
2025-07-25 16:49:40,069 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:49:40,069 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:49:40,069 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:49:40,098 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:49:40,110 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:49:40,110 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:50:40 KST)" executed successfully
2025-07-25 16:50:39,628 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:50:39,628 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:50:40.065425+09:00 (in 0.436522 seconds)
2025-07-25 16:50:40,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:50:40,066 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:51:40.065425+09:00 (in 59.998921 seconds)
2025-07-25 16:50:40,066 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:51:40 KST)" (scheduled at 2025-07-26 01:50:40.065425+09:00)
2025-07-25 16:50:40,067 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:50:40.067299
2025-07-25 16:50:40,067 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:50:40,067 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:50:40,067 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:50:40,069 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:50:40,070 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:50:40,071 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:51:40 KST)" executed successfully
2025-07-25 16:51:39,597 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:51:39,598 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:51:40.065425+09:00 (in 0.467197 seconds)
2025-07-25 16:51:40,066 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:51:40,067 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:52:40.065425+09:00 (in 59.998032 seconds)
2025-07-25 16:51:40,067 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:52:40 KST)" (scheduled at 2025-07-26 01:51:40.065425+09:00)
2025-07-25 16:51:40,068 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:51:40.068034
2025-07-25 16:51:40,068 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:51:40,068 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:51:40,068 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:51:40,069 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:51:40,071 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:51:40,071 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:52:40 KST)" executed successfully
2025-07-25 16:52:39,650 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:52:39,651 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:52:40.065425+09:00 (in 0.414148 seconds)
2025-07-25 16:52:40,067 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:52:40,067 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:53:40.065425+09:00 (in 59.997557 seconds)
2025-07-25 16:52:40,068 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:53:40 KST)" (scheduled at 2025-07-26 01:52:40.065425+09:00)
2025-07-25 16:52:40,068 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:52:40.068754
2025-07-25 16:52:40,068 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:52:40,069 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:52:40,069 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:52:40,070 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:52:40,071 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:52:40,071 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:53:40 KST)" executed successfully
2025-07-25 16:53:39,627 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:53:39,628 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:53:40.065425+09:00 (in 0.437263 seconds)
2025-07-25 16:53:40,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:53:40,066 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:54:40.065425+09:00 (in 59.998809 seconds)
2025-07-25 16:53:40,067 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:54:40 KST)" (scheduled at 2025-07-26 01:53:40.065425+09:00)
2025-07-25 16:53:40,067 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:53:40.067504
2025-07-25 16:53:40,067 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:53:40,067 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:53:40,068 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:53:40,070 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:53:40,071 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:53:40,071 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:54:40 KST)" executed successfully
2025-07-25 16:54:18,722 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:54:18,727 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:54:18,732 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:18,733 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:18,733 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:18,734 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:27,931 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:54:27,937 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:54:27,940 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:27,941 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:27,941 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:27,942 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:37,369 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:54:37,373 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:54:37,376 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:37,376 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:37,377 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:37,377 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:54:37,509 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 16:54:37,512 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 16:54:37,512 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 16:54:37,512 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 16:54:37,513 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 16:54:37,513 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 16:54:37,513 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:54:37,513 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 16:54:37,514 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:55:37.377523+09:00 (in 59.863463 seconds)
2025-07-25 16:54:37,514 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 16:54:37,514 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 16:54:37,514 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 16:54:37,515 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 16:54:37,515 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 16:54:37,516 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:54:37,516 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:54:37,630 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:54:37,630 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:54:37,738 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 16:54:37,738 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:54:37,738 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 16:54:37,739 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 16:54:39,662 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:54:39,663 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:54:40.065425+09:00 (in 0.402378 seconds)
2025-07-25 16:54:40,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:54:40,066 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:55:40.065425+09:00 (in 59.998969 seconds)
2025-07-25 16:54:40,066 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:55:40 KST)" (scheduled at 2025-07-26 01:54:40.065425+09:00)
2025-07-25 16:54:40,067 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:54:40.067036
2025-07-25 16:54:40,067 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:54:40,067 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:54:40,067 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:54:40,068 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:54:40,069 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:54:40,069 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:55:40 KST)" executed successfully
2025-07-25 16:55:39,670 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:55:39,671 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:55:40.065425+09:00 (in 0.394079 seconds)
2025-07-25 16:55:40,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:55:40,066 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:56:40.065425+09:00 (in 59.998845 seconds)
2025-07-25 16:55:40,066 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:56:40 KST)" (scheduled at 2025-07-26 01:55:40.065425+09:00)
2025-07-25 16:55:40,067 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:55:40.067339
2025-07-25 16:55:40,067 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:55:40,067 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:55:40,068 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:55:40,070 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:55:40,072 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:55:40,072 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:56:40 KST)" executed successfully
2025-07-25 16:55:49,725 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:55:49,729 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:55:49,733 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:55:49,733 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:55:49,734 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:55:49,734 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:55:49,816 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 16:55:49,818 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 16:55:49,819 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 16:55:49,819 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 16:55:49,819 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 16:55:49,819 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 16:55:49,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:55:49,820 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 16:55:49,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:56:49.734653+09:00 (in 59.914229 seconds)
2025-07-25 16:55:49,820 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 16:55:49,821 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 16:55:49,821 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 16:55:49,821 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 16:55:49,821 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 16:55:49,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:55:49,822 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:55:49,826 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:55:49,829 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 16:55:50,869 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:55:50,869 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:55:50,872 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:55:50,873 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 16:55:51,813 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 16:55:51,814 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:55:51,814 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 16:55:51,814 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 16:56:36,069 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 16:56:36,070 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:56:36,070 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 16:56:36,070 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 16:56:57,163 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:56:57,169 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:56:57,172 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:56:57,173 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:56:57,174 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:56:57,174 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:56:57,284 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 16:56:57,284 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 16:56:57,284 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 16:56:57,284 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 16:56:57,284 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 16:56:57,285 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:56:57,285 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 16:56:57,286 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:57:57.174372+09:00 (in 59.888379 seconds)
2025-07-25 16:56:57,286 - main - INFO - 등록된 잡 목록:
2025-07-25 16:56:57,286 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 16:56:57,286 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 16:56:57,286 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 16:56:57,287 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 16:57:10,170 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:57:10,200 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 16:57:10,209 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:57:10,212 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:57:10,220 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:57:10,221 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 16:57:10,829 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 16:57:10,844 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 16:57:10,845 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 16:57:10,845 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 16:57:10,846 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 16:57:10,846 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 16:57:10,847 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:57:10,847 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 16:57:10,848 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:58:10.221376+09:00 (in 59.373204 seconds)
2025-07-25 16:57:10,848 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 16:57:10,849 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 16:57:10,849 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 16:57:10,849 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 16:57:10,850 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 16:57:10,851 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:57:10,852 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:57:10,860 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:57:10,875 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 16:57:12,987 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:57:12,988 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:57:13,002 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:57:13,003 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 16:57:14,352 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 16:57:14,353 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:57:14,353 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 16:57:14,353 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 16:57:56,817 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:57:56,817 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:57:57.174372+09:00 (in 0.356872 seconds)
2025-07-25 16:57:57,175 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:57:57,176 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:58:57 KST)" (scheduled at 2025-07-26 01:57:57.174372+09:00)
2025-07-25 16:57:57,176 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:58:57.174372+09:00 (in 59.997686 seconds)
2025-07-25 16:57:57,177 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:57:57.177060
2025-07-25 16:57:57,177 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:57:57,177 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:57:57,177 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:57:57,189 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:57:57,193 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:57:57,193 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:58:57 KST)" executed successfully
2025-07-25 16:58:56,818 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:58:56,818 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:58:57.174372+09:00 (in 0.355919 seconds)
2025-07-25 16:58:57,175 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:58:57,176 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:59:57.174372+09:00 (in 59.997986 seconds)
2025-07-25 16:58:57,176 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:59:57 KST)" (scheduled at 2025-07-26 01:58:57.174372+09:00)
2025-07-25 16:58:57,177 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:58:57.177743
2025-07-25 16:58:57,178 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:58:57,179 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:58:57,179 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:58:57,188 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:58:57,191 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:58:57,192 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 01:59:57 KST)" executed successfully
2025-07-25 16:59:56,850 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:59:56,850 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 01:59:57.174372+09:00 (in 0.323933 seconds)
2025-07-25 16:59:57,174 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 16:59:57,175 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:00:57.174372+09:00 (in 59.998977 seconds)
2025-07-25 16:59:57,175 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:00:57 KST)" (scheduled at 2025-07-26 01:59:57.174372+09:00)
2025-07-25 16:59:57,176 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 16:59:57.176087
2025-07-25 16:59:57,176 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 16:59:57,176 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 16:59:57,176 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 16:59:57,178 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 16:59:57,179 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 16:59:57,179 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:00:57 KST)" executed successfully
2025-07-25 17:00:49,371 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:00:49,371 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:00:49,372 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:00:49,372 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:02:32,099 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:02:32,105 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:02:32,109 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:32,110 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:32,111 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:32,111 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:32,221 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:02:32,222 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:02:32,222 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:02:32,222 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:02:32,222 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:02:32,223 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:02:32,223 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:02:32,223 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:03:32.111350+09:00 (in 59.887789 seconds)
2025-07-25 17:02:32,223 - main - INFO - 등록된 잡 목록:
2025-07-25 17:02:32,224 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:02:32,224 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:02:32,224 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:02:32,224 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:02:51,001 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:02:51,022 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:02:51,033 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:51,033 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:51,034 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:51,035 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:02:51,586 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 17:02:51,590 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:02:51,591 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:02:51,592 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:02:51,592 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:02:51,592 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:02:51,593 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:02:51,593 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:02:51,594 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:03:51.035235+09:00 (in 59.441216 seconds)
2025-07-25 17:02:51,594 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 17:02:51,595 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:02:51,595 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:02:51,595 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:02:51,595 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:02:51,596 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:02:51,597 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:02:51,602 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:02:51,606 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 17:02:51,623 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12345
2025-07-25 17:02:51,624 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12345, username=testuser
2025-07-25 17:02:51,625 - src.api.services.user_service - ERROR - Failed to create user from telegram (telegram_id=12345): 'first_name' is an invalid keyword argument for User
Traceback (most recent call last):
  File "/app/src/api/services/user_service.py", line 86, in create_user_from_telegram
    new_user = User(
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 571, in _initialize_instance
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 569, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 2173, in _declarative_constructor
    raise TypeError(
TypeError: 'first_name' is an invalid keyword argument for User
2025-07-25 17:02:52,429 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:02:52,429 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:02:52,433 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:02:52,434 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:02:52,436 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12346
2025-07-25 17:02:52,436 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12346, username=testuser2
2025-07-25 17:02:52,437 - src.api.services.user_service - ERROR - Failed to create user from telegram (telegram_id=12346): 'first_name' is an invalid keyword argument for User
Traceback (most recent call last):
  File "/app/src/api/services/user_service.py", line 86, in create_user_from_telegram
    new_user = User(
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 571, in _initialize_instance
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state.py", line 569, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/decl_base.py", line 2173, in _declarative_constructor
    raise TypeError(
TypeError: 'first_name' is an invalid keyword argument for User
2025-07-25 17:02:53,056 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:02:53,057 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:02:53,057 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:02:53,057 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:03:31,777 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:03:31,777 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:03:32.111350+09:00 (in 0.333652 seconds)
2025-07-25 17:03:32,111 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:03:32,112 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:04:32 KST)" (scheduled at 2025-07-26 02:03:32.111350+09:00)
2025-07-25 17:03:32,113 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:04:32.111350+09:00 (in 59.998035 seconds)
2025-07-25 17:03:32,113 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:03:32.113785
2025-07-25 17:03:32,114 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:03:32,114 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:03:32,114 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:03:32,124 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 17:03:32,129 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:03:32,129 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:04:32 KST)" executed successfully
2025-07-25 17:03:48,482 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:03:48,482 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:03:48,483 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:03:48,483 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:04:07,148 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:04:07,155 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:04:07,158 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:07,158 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:07,159 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:07,159 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:07,255 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:04:07,255 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:04:07,256 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:04:07,256 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:04:07,256 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:04:07,256 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:04:07,256 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:04:07,257 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:05:07.159466+09:00 (in 59.902264 seconds)
2025-07-25 17:04:07,257 - main - INFO - 등록된 잡 목록:
2025-07-25 17:04:07,257 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:04:07,257 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:04:07,258 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:04:07,258 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:04:26,554 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:04:26,569 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:04:26,580 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:26,581 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:26,582 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:26,582 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:04:27,040 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 17:04:27,042 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:04:27,043 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:04:27,043 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:04:27,043 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:04:27,043 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:04:27,044 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:04:27,044 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:04:27,044 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:05:26.582416+09:00 (in 59.537585 seconds)
2025-07-25 17:04:27,045 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 17:04:27,045 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:04:27,045 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:04:27,046 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:04:27,046 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:04:27,047 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:04:27,048 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:04:27,052 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:04:27,057 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 17:04:27,072 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12345
2025-07-25 17:04:27,072 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12345, username=testuser
2025-07-25 17:04:27,080 - src.api.services.user_service - ERROR - Failed to create user from telegram (telegram_id=12345): (psycopg2.errors.NotNullViolation) null value in column "password_hash" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (2, testuser, null, null, user, t, 12345, 2025-07-25 17:04:27.070475, 2025-07-25 17:04:27.070475, Test, User).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12345, 'first_name': 'Test', 'last_name': 'User'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "password_hash" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (2, testuser, null, null, user, t, 12345, 2025-07-25 17:04:27.070475, 2025-07-25 17:04:27.070475, Test, User).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/services/user_service.py", line 94, in create_user_from_telegram
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "password_hash" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (2, testuser, null, null, user, t, 12345, 2025-07-25 17:04:27.070475, 2025-07-25 17:04:27.070475, Test, User).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12345, 'first_name': 'Test', 'last_name': 'User'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 17:04:28,446 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:04:28,447 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:04:28,452 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:04:28,452 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:04:28,455 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12346
2025-07-25 17:04:28,455 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12346, username=testuser2
2025-07-25 17:04:28,457 - src.api.services.user_service - ERROR - Failed to create user from telegram (telegram_id=12346): (psycopg2.errors.NotNullViolation) null value in column "password_hash" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (3, testuser2, null, null, user, t, 12346, 2025-07-25 17:04:28.454196, 2025-07-25 17:04:28.454196, Test2, User2).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser2', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12346, 'first_name': 'Test2', 'last_name': 'User2'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "password_hash" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (3, testuser2, null, null, user, t, 12346, 2025-07-25 17:04:28.454196, 2025-07-25 17:04:28.454196, Test2, User2).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/services/user_service.py", line 94, in create_user_from_telegram
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "password_hash" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (3, testuser2, null, null, user, t, 12346, 2025-07-25 17:04:28.454196, 2025-07-25 17:04:28.454196, Test2, User2).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser2', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12346, 'first_name': 'Test2', 'last_name': 'User2'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 17:04:29,647 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:04:29,648 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:04:29,648 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:04:29,648 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:05:06,816 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:05:06,817 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:05:07.159466+09:00 (in 0.342314 seconds)
2025-07-25 17:05:07,020 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:05:07,020 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:05:07,020 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:05:07,021 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:05:26,159 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:05:26,165 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:05:26,168 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:26,168 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:26,169 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:26,169 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:26,266 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:05:26,266 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:05:26,266 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:05:26,267 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:05:26,267 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:05:26,267 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:05:26,267 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:05:26,268 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:06:26.169681+09:00 (in 59.901587 seconds)
2025-07-25 17:05:26,268 - main - INFO - 등록된 잡 목록:
2025-07-25 17:05:26,268 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:05:26,268 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:05:26,268 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:05:26,269 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:05:45,414 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:05:45,419 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:05:45,424 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:45,425 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:45,425 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:45,425 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:05:45,644 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 17:05:45,647 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:05:45,647 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:05:45,647 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:05:45,647 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:05:45,647 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:05:45,648 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:05:45,648 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:05:45,648 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:06:45.425784+09:00 (in 59.776937 seconds)
2025-07-25 17:05:45,649 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 17:05:45,649 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:05:45,649 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:05:45,649 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:05:45,650 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:05:45,650 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:05:45,651 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:05:45,655 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:05:45,659 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 17:05:45,670 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12345
2025-07-25 17:05:45,671 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12345, username=testuser
2025-07-25 17:05:45,676 - src.api.services.user_service - ERROR - Failed to create user from telegram (telegram_id=12345): (psycopg2.errors.NotNullViolation) null value in column "email" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (4, testuser, null, null, user, t, 12345, 2025-07-25 17:05:45.668973, 2025-07-25 17:05:45.668973, Test, User).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12345, 'first_name': 'Test', 'last_name': 'User'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "email" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (4, testuser, null, null, user, t, 12345, 2025-07-25 17:05:45.668973, 2025-07-25 17:05:45.668973, Test, User).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/services/user_service.py", line 94, in create_user_from_telegram
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (4, testuser, null, null, user, t, 12345, 2025-07-25 17:05:45.668973, 2025-07-25 17:05:45.668973, Test, User).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12345, 'first_name': 'Test', 'last_name': 'User'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 17:05:46,957 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:05:46,958 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:05:46,961 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:05:46,962 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:05:46,964 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12346
2025-07-25 17:05:46,964 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12346, username=testuser2
2025-07-25 17:05:46,966 - src.api.services.user_service - ERROR - Failed to create user from telegram (telegram_id=12346): (psycopg2.errors.NotNullViolation) null value in column "email" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (5, testuser2, null, null, user, t, 12346, 2025-07-25 17:05:46.963436, 2025-07-25 17:05:46.963436, Test2, User2).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser2', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12346, 'first_name': 'Test2', 'last_name': 'User2'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.NotNullViolation: null value in column "email" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (5, testuser2, null, null, user, t, 12346, 2025-07-25 17:05:46.963436, 2025-07-25 17:05:46.963436, Test2, User2).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/services/user_service.py", line 94, in create_user_from_telegram
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (psycopg2.errors.NotNullViolation) null value in column "email" of relation "app_users" violates not-null constraint
DETAIL:  Failing row contains (5, testuser2, null, null, user, t, 12346, 2025-07-25 17:05:46.963436, 2025-07-25 17:05:46.963436, Test2, User2).

[SQL: INSERT INTO app_users (username, password_hash, email, role, is_active, telegram_id, first_name, last_name, created_at, updated_at) VALUES (%(username)s, %(password_hash)s, %(email)s, %(role)s, %(is_active)s, %(telegram_id)s, %(first_name)s, %(last_name)s, now(), now()) RETURNING app_users.id, app_users.created_at, app_users.updated_at]
[parameters: {'username': 'testuser2', 'password_hash': None, 'email': None, 'role': 'user', 'is_active': True, 'telegram_id': 12346, 'first_name': 'Test2', 'last_name': 'User2'}]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 17:05:48,266 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:05:48,267 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:05:48,267 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:05:48,267 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:06:25,852 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:06:25,852 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:06:26.169681+09:00 (in 0.316782 seconds)
2025-07-25 17:06:26,170 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:06:26,171 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:07:26 KST)" (scheduled at 2025-07-26 02:06:26.169681+09:00)
2025-07-25 17:06:26,171 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:07:26.169681+09:00 (in 59.997922 seconds)
2025-07-25 17:06:26,172 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:06:26.172156
2025-07-25 17:06:26,172 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:06:26,172 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:06:26,172 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:06:26,183 - main - ERROR - 가격 알림 체크 잡 실행 중 상위 레벨 오류: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
psycopg2.errors.UndefinedColumn: column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/main.py", line 123, in check_price_alerts_job
    active_alerts = alert_service.get_all_active_alerts(db)
  File "/app/src/api/services/price_alert_service.py", line 85, in get_all_active_alerts
    alerts = db.query(PriceAlert).filter(PriceAlert.is_active == True).all()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2704, in all
    return self._iter().all()  # type: ignore
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/query.py", line 2857, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedColumn) column price_alerts.change_percent does not exist
LINE 1: ...price_alerts.condition AS price_alerts_condition, price_aler...
                                                             ^

[SQL: SELECT price_alerts.id AS price_alerts_id, price_alerts.user_id AS price_alerts_user_id, price_alerts.symbol AS price_alerts_symbol, price_alerts.target_price AS price_alerts_target_price, price_alerts.condition AS price_alerts_condition, price_alerts.change_percent AS price_alerts_change_percent, price_alerts.change_type AS price_alerts_change_type, price_alerts.notify_on_disclosure AS price_alerts_notify_on_disclosure, price_alerts.repeat_interval AS price_alerts_repeat_interval, price_alerts.is_active AS price_alerts_is_active, price_alerts.created_at AS price_alerts_created_at, price_alerts.updated_at AS price_alerts_updated_at 
FROM price_alerts 
WHERE price_alerts.is_active = true]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-25 17:06:26,187 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:06:26,187 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:07:26 KST)" executed successfully
2025-07-25 17:06:43,111 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:06:43,112 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:06:43,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:06:43,112 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:07:04,826 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:07:04,833 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:07:04,837 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:04,837 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:04,838 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:04,838 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:04,955 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:07:04,955 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:07:04,955 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:07:04,955 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:07:04,956 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:07:04,956 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:07:04,957 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:07:04,957 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:08:04.838593+09:00 (in 59.881389 seconds)
2025-07-25 17:07:04,957 - main - INFO - 등록된 잡 목록:
2025-07-25 17:07:04,958 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:07:04,958 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:07:04,958 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:07:04,958 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:07:30,531 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:07:30,536 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:07:30,541 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:30,541 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:30,542 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:30,542 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:30,800 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 17:07:30,803 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:07:30,803 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:07:30,803 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:07:30,803 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:07:30,803 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:07:30,804 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:07:30,804 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:07:30,805 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:08:30.542275+09:00 (in 59.736834 seconds)
2025-07-25 17:07:30,805 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 17:07:30,806 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:07:30,806 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:07:30,806 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:07:30,806 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:07:30,807 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:07:30,807 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:07:30,811 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:07:30,814 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 17:07:30,825 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12345
2025-07-25 17:07:30,826 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12345, username=testuser
2025-07-25 17:07:30,836 - src.api.services.user_service - DEBUG - User created from telegram successfully: user_id=6, telegram_id=12345
2025-07-25 17:07:30,836 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:07:32,004 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:07:32,004 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:07:32,009 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:07:32,010 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:07:32,013 - src.api.services.user_service - DEBUG - User not found for telegram_id: 12346
2025-07-25 17:07:32,013 - src.api.services.user_service - DEBUG - Attempting to create user from telegram: telegram_id=12346, username=testuser2
2025-07-25 17:07:32,023 - src.api.services.user_service - DEBUG - User created from telegram successfully: user_id=7, telegram_id=12346
2025-07-25 17:07:32,024 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:07:33,262 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:07:33,262 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:07:33,262 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:07:33,263 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:07:55,686 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:07:55,686 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:07:55,686 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:07:55,687 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:07:59,307 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:07:59,313 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:07:59,316 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:59,317 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:59,317 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:59,318 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:07:59,408 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:07:59,408 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:07:59,408 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:07:59,408 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:07:59,408 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:07:59,409 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:07:59,409 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:07:59,409 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:08:59.318010+09:00 (in 59.908325 seconds)
2025-07-25 17:07:59,409 - main - INFO - 등록된 잡 목록:
2025-07-25 17:07:59,410 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:07:59,410 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:07:59,410 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:07:59,410 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:08:17,461 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:08:17,466 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:08:17,472 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:17,472 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:17,473 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:17,473 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:17,738 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 17:08:17,742 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:08:17,742 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:08:17,742 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:08:17,742 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:08:17,743 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:08:17,743 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:08:17,743 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:08:17,744 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:09:17.473592+09:00 (in 59.729258 seconds)
2025-07-25 17:08:17,744 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 17:08:17,745 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:08:17,745 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:08:17,745 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:08:17,745 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:08:17,746 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:08:17,747 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:08:17,751 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:08:17,755 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 17:08:17,767 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-25 17:08:17,768 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:08:20,054 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:08:20,055 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:08:20,080 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:08:20,081 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:08:20,093 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 17:08:20,094 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:08:22,494 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:08:22,495 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:08:22,496 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:08:22,496 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:08:39,718 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:08:39,718 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:08:39,718 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:08:39,719 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:08:43,194 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:08:43,199 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:08:43,202 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:43,202 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:43,203 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:43,203 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:08:43,294 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:08:43,295 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:08:43,295 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:08:43,295 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:08:43,295 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:08:43,296 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:08:43,296 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:08:43,296 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:09:43.203828+09:00 (in 59.907265 seconds)
2025-07-25 17:08:43,296 - main - INFO - 등록된 잡 목록:
2025-07-25 17:08:43,297 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:08:43,297 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:08:43,297 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:08:43,297 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:09:02,981 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:09:02,986 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:09:02,992 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:09:02,992 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:09:02,993 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:09:02,993 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:09:03,209 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 17:09:03,212 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:09:03,212 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:09:03,212 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:09:03,212 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:09:03,212 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:09:03,213 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:09:03,213 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:09:03,213 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:10:02.993467+09:00 (in 59.779527 seconds)
2025-07-25 17:09:03,214 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 17:09:03,214 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:09:03,214 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:09:03,214 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:09:03,215 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:09:03,215 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:09:03,216 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:09:03,220 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:09:03,223 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 17:09:03,237 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-25 17:09:03,237 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:09:03,241 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=6, symbol=005930
2025-07-25 17:09:03,241 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=6, symbol=005930, target_price=75000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=daily
2025-07-25 17:09:03,253 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=6, symbol=005930
2025-07-25 17:09:03,255 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 17:09:03,260 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:09:03,260 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:09:03,263 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:09:03,263 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:09:03,265 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 17:09:03,266 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:09:03,268 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=7, symbol=005930
2025-07-25 17:09:03,268 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=7, symbol=005930, target_price=70000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 17:09:03,273 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=7, symbol=005930
2025-07-25 17:09:03,274 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 17:09:03,276 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:09:03,277 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 17:09:03,278 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 17:09:03,278 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 17:09:03,280 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 17:09:03,280 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-25 17:09:03,291 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 17:09:03,293 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 17:09:03,297 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:09:03,297 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:09:03,298 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:09:03,298 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:09:42,869 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:09:42,869 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:09:43.203828+09:00 (in 0.334082 seconds)
2025-07-25 17:09:43,204 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:09:43,204 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:10:43 KST)" (scheduled at 2025-07-26 02:09:43.203828+09:00)
2025-07-25 17:09:43,205 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:10:43.203828+09:00 (in 59.998608 seconds)
2025-07-25 17:09:43,205 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:09:43.205685
2025-07-25 17:09:43,206 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:09:43,206 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:09:43,206 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:09:43,217 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:09:43,217 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:09:43,217 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:09:43,218 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:09:43,220 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:09:43,220 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:09:43,220 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:10:43 KST)" executed successfully
2025-07-25 17:10:42,871 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:10:42,872 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:10:43.203828+09:00 (in 0.331843 seconds)
2025-07-25 17:10:43,204 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:10:43,205 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:11:43.203828+09:00 (in 59.998639 seconds)
2025-07-25 17:10:43,205 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:11:43 KST)" (scheduled at 2025-07-26 02:10:43.203828+09:00)
2025-07-25 17:10:43,206 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:10:43.206019
2025-07-25 17:10:43,206 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:10:43,206 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:10:43,206 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:10:43,208 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:10:43,208 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:10:43,208 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:10:43,208 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:10:43,210 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:10:43,210 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:10:43,211 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:11:43 KST)" executed successfully
2025-07-25 17:10:56,648 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:10:56,649 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:10:56,649 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:10:56,649 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:11:18,541 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:11:18,548 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:11:18,552 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:11:18,553 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:11:18,554 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:11:18,554 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:11:18,599 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:11:18,600 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:11:18,600 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:11:18,600 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:11:18,600 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:11:18,601 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:11:18,601 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:11:18,601 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:12:18.554295+09:00 (in 59.952379 seconds)
2025-07-25 17:11:18,602 - main - INFO - 등록된 잡 목록:
2025-07-25 17:11:18,602 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:11:18,602 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:11:18,602 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:11:18,603 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:12:18,244 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:12:18,245 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:12:18.554295+09:00 (in 0.308922 seconds)
2025-07-25 17:12:18,554 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:12:18,555 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:13:18 KST)" (scheduled at 2025-07-26 02:12:18.554295+09:00)
2025-07-25 17:12:18,555 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:13:18.554295+09:00 (in 59.998379 seconds)
2025-07-25 17:12:18,556 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:12:18.556290
2025-07-25 17:12:18,556 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:12:18,556 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:12:18,557 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:12:18,569 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:12:18,569 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:12:18,569 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:12:18,569 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:12:18,572 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:12:18,572 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:12:18,572 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:13:18 KST)" executed successfully
2025-07-25 17:13:18,225 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:13:18,226 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:13:18.554295+09:00 (in 0.328159 seconds)
2025-07-25 17:13:18,554 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:13:18,555 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:14:18.554295+09:00 (in 59.998813 seconds)
2025-07-25 17:13:18,555 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:14:18 KST)" (scheduled at 2025-07-26 02:13:18.554295+09:00)
2025-07-25 17:13:18,556 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:13:18.556423
2025-07-25 17:13:18,556 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:13:18,556 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:13:18,557 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:13:18,559 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:13:18,559 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:13:18,559 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:13:18,560 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:13:18,562 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:13:18,562 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:13:18,562 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:14:18 KST)" executed successfully
2025-07-25 17:14:18,225 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:14:18,225 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:14:18.554295+09:00 (in 0.328775 seconds)
2025-07-25 17:14:18,554 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:14:18,555 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:15:18.554295+09:00 (in 59.998710 seconds)
2025-07-25 17:14:18,555 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:15:18 KST)" (scheduled at 2025-07-26 02:14:18.554295+09:00)
2025-07-25 17:14:18,556 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:14:18.556273
2025-07-25 17:14:18,556 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:14:18,556 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:14:18,556 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:14:18,558 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:14:18,558 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:14:18,558 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:14:18,558 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:14:18,561 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:14:18,561 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:14:18,561 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:15:18 KST)" executed successfully
2025-07-25 17:15:18,234 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:15:18,235 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:15:18.554295+09:00 (in 0.319327 seconds)
2025-07-25 17:15:18,555 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:15:18,555 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:16:18.554295+09:00 (in 59.998619 seconds)
2025-07-25 17:15:18,555 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:16:18 KST)" (scheduled at 2025-07-26 02:15:18.554295+09:00)
2025-07-25 17:15:18,556 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:15:18.556579
2025-07-25 17:15:18,556 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:15:18,556 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:15:18,557 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:15:18,558 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:15:18,558 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:15:18,559 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:15:18,559 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:15:18,561 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:15:18,561 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:15:18,561 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:16:18 KST)" executed successfully
2025-07-25 17:15:57,948 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:15:57,948 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:15:57,949 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:15:57,949 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:16:21,944 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:16:21,960 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:16:21,967 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:16:21,968 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:16:21,971 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:16:21,972 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:16:22,026 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:16:22,026 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:16:22,026 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:16:22,027 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:16:22,027 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:16:22,027 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:16:22,027 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:16:22,028 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:17:21.971926+09:00 (in 59.943668 seconds)
2025-07-25 17:16:22,028 - main - INFO - 등록된 잡 목록:
2025-07-25 17:16:22,029 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:16:22,029 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:16:22,029 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:16:22,029 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:17:21,671 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:17:21,672 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:17:21.971926+09:00 (in 0.299351 seconds)
2025-07-25 17:17:21,973 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:17:21,975 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:18:21 KST)" (scheduled at 2025-07-26 02:17:21.971926+09:00)
2025-07-25 17:17:21,975 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:18:21.971926+09:00 (in 59.996585 seconds)
2025-07-25 17:17:21,975 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:17:21.975634
2025-07-25 17:17:21,976 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:17:21,976 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:17:21,976 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:17:21,992 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:17:21,992 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:17:21,992 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:17:21,993 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:17:21,995 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:17:21,995 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:17:21,995 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:18:21 KST)" executed successfully
2025-07-25 17:18:21,649 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:18:21,649 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:18:21.971926+09:00 (in 0.322181 seconds)
2025-07-25 17:18:21,972 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:18:21,973 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:19:21.971926+09:00 (in 59.998650 seconds)
2025-07-25 17:18:21,973 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:19:21 KST)" (scheduled at 2025-07-26 02:18:21.971926+09:00)
2025-07-25 17:18:21,974 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:18:21.974231
2025-07-25 17:18:21,974 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:18:21,974 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:18:21,974 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:18:21,976 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:18:21,976 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:18:21,976 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:18:21,977 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:18:21,979 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:18:21,979 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:18:21,979 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:19:21 KST)" executed successfully
2025-07-25 17:19:05,797 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:19:05,797 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:19:05,797 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:19:05,798 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:19:26,506 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:19:26,511 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:19:26,514 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:19:26,514 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:19:26,515 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:19:26,515 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:19:26,552 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:19:26,553 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:19:26,553 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:19:26,553 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:19:26,553 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:19:26,554 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:19:26,554 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:19:26,554 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:20:26.515718+09:00 (in 59.961018 seconds)
2025-07-25 17:19:26,554 - main - INFO - 등록된 잡 목록:
2025-07-25 17:19:26,555 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:19:26,555 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:19:26,555 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:19:26,555 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:20:26,211 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:20:26,212 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:20:26.515718+09:00 (in 0.303649 seconds)
2025-07-25 17:20:26,516 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:20:26,517 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:21:26 KST)" (scheduled at 2025-07-26 02:20:26.515718+09:00)
2025-07-25 17:20:26,517 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:21:26.515718+09:00 (in 59.997744 seconds)
2025-07-25 17:20:26,518 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:20:26.518420
2025-07-25 17:20:26,518 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:20:26,519 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:20:26,519 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:20:26,535 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:20:26,535 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:20:26,535 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:20:26,535 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:20:26,538 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:20:26,538 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:20:26,538 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:21:26 KST)" executed successfully
2025-07-25 17:21:26,202 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:21:26,203 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:21:26.515718+09:00 (in 0.312346 seconds)
2025-07-25 17:21:26,517 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:21:26,517 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:22:26.515718+09:00 (in 59.997793 seconds)
2025-07-25 17:21:26,518 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:22:26 KST)" (scheduled at 2025-07-26 02:21:26.515718+09:00)
2025-07-25 17:21:26,518 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:21:26.518681
2025-07-25 17:21:26,518 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:21:26,519 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:21:26,519 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:21:26,520 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:21:26,520 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:21:26,521 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:21:26,521 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:21:26,523 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:21:26,523 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:21:26,523 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:22:26 KST)" executed successfully
2025-07-25 17:22:26,200 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:22:26,200 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:22:26.515718+09:00 (in 0.314813 seconds)
2025-07-25 17:22:26,516 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:22:26,516 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:23:26.515718+09:00 (in 59.998865 seconds)
2025-07-25 17:22:26,517 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:23:26 KST)" (scheduled at 2025-07-26 02:22:26.515718+09:00)
2025-07-25 17:22:26,518 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:22:26.518060
2025-07-25 17:22:26,518 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:22:26,518 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:22:26,518 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:22:26,520 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:22:26,521 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:22:26,521 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:22:26,521 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:22:26,524 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:22:26,524 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:22:26,524 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:23:26 KST)" executed successfully
2025-07-25 17:23:26,198 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:23:26,199 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:23:26.515718+09:00 (in 0.316282 seconds)
2025-07-25 17:23:26,516 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:23:26,517 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:24:26.515718+09:00 (in 59.998433 seconds)
2025-07-25 17:23:26,517 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:24:26 KST)" (scheduled at 2025-07-26 02:23:26.515718+09:00)
2025-07-25 17:23:26,518 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:23:26.518046
2025-07-25 17:23:26,518 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:23:26,518 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:23:26,518 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:23:26,519 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:23:26,520 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:23:26,520 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:23:26,520 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:23:26,522 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:23:26,522 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:23:26,522 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:24:26 KST)" executed successfully
2025-07-25 17:24:26,209 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:24:26,210 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:24:26.515718+09:00 (in 0.305620 seconds)
2025-07-25 17:24:26,516 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:24:26,517 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:25:26.515718+09:00 (in 59.998741 seconds)
2025-07-25 17:24:26,517 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:25:26 KST)" (scheduled at 2025-07-26 02:24:26.515718+09:00)
2025-07-25 17:24:26,517 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:24:26.517680
2025-07-25 17:24:26,517 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:24:26,518 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:24:26,518 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:24:26,519 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:24:26,520 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:24:26,520 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:24:26,520 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:24:26,522 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:24:26,522 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:24:26,522 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:25:26 KST)" executed successfully
2025-07-25 17:25:12,623 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:25:12,623 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:25:12,624 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:25:12,624 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:25:34,421 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:25:34,428 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:25:34,432 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:25:34,432 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:25:34,433 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:25:34,433 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:25:34,465 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:25:34,465 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:25:34,465 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:25:34,465 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:25:34,465 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:25:34,466 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:25:34,466 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:25:34,466 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:26:34.433162+09:00 (in 59.966445 seconds)
2025-07-25 17:25:34,466 - main - INFO - 등록된 잡 목록:
2025-07-25 17:25:34,467 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:25:34,467 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:25:34,467 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:25:34,467 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:26:34,140 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:26:34,141 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:26:34.433162+09:00 (in 0.291798 seconds)
2025-07-25 17:26:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:26:34,435 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:27:34 KST)" (scheduled at 2025-07-26 02:26:34.433162+09:00)
2025-07-25 17:26:34,435 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:27:34.433162+09:00 (in 59.997779 seconds)
2025-07-25 17:26:34,435 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:26:34.435867
2025-07-25 17:26:34,436 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:26:34,436 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:26:34,436 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:26:34,451 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:26:34,451 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:26:34,451 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:26:34,451 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:26:34,454 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:26:34,455 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:26:34,455 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:27:34 KST)" executed successfully
2025-07-25 17:27:34,127 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:27:34,127 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:27:34.433162+09:00 (in 0.305715 seconds)
2025-07-25 17:27:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:27:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:28:34.433162+09:00 (in 59.999039 seconds)
2025-07-25 17:27:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:28:34 KST)" (scheduled at 2025-07-26 02:27:34.433162+09:00)
2025-07-25 17:27:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:27:34.434960
2025-07-25 17:27:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:27:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:27:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:27:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:27:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:27:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:27:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:27:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:27:34,440 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:27:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:28:34 KST)" executed successfully
2025-07-25 17:28:34,121 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:28:34,121 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:28:34.433162+09:00 (in 0.311448 seconds)
2025-07-25 17:28:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:28:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:29:34.433162+09:00 (in 59.999039 seconds)
2025-07-25 17:28:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:29:34 KST)" (scheduled at 2025-07-26 02:28:34.433162+09:00)
2025-07-25 17:28:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:28:34.434879
2025-07-25 17:28:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:28:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:28:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:28:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:28:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:28:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:28:34,438 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:28:34,441 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:28:34,441 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:28:34,441 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:29:34 KST)" executed successfully
2025-07-25 17:29:34,142 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:29:34,143 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:29:34.433162+09:00 (in 0.289853 seconds)
2025-07-25 17:29:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:29:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:30:34.433162+09:00 (in 59.999117 seconds)
2025-07-25 17:29:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:30:34 KST)" (scheduled at 2025-07-26 02:29:34.433162+09:00)
2025-07-25 17:29:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:29:34.434599
2025-07-25 17:29:34,434 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:29:34,434 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:29:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:29:34,436 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:29:34,436 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:29:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:29:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:29:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:29:34,439 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:29:34,439 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:30:34 KST)" executed successfully
2025-07-25 17:30:34,133 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:30:34,133 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:30:34.433162+09:00 (in 0.299666 seconds)
2025-07-25 17:30:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:30:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:31:34.433162+09:00 (in 59.998694 seconds)
2025-07-25 17:30:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:31:34 KST)" (scheduled at 2025-07-26 02:30:34.433162+09:00)
2025-07-25 17:30:34,435 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:30:34.435274
2025-07-25 17:30:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:30:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:30:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:30:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:30:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:30:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:30:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:30:34,440 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:30:34,440 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:30:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:31:34 KST)" executed successfully
2025-07-25 17:31:34,142 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:31:34,142 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:31:34.433162+09:00 (in 0.290559 seconds)
2025-07-25 17:31:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:31:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:32:34.433162+09:00 (in 59.999111 seconds)
2025-07-25 17:31:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:32:34 KST)" (scheduled at 2025-07-26 02:31:34.433162+09:00)
2025-07-25 17:31:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:31:34.434817
2025-07-25 17:31:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:31:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:31:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:31:34,436 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:31:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:31:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:31:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:31:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:31:34,440 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:31:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:32:34 KST)" executed successfully
2025-07-25 17:32:34,130 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:32:34,130 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:32:34.433162+09:00 (in 0.302618 seconds)
2025-07-25 17:32:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:32:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:33:34.433162+09:00 (in 59.998879 seconds)
2025-07-25 17:32:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:33:34 KST)" (scheduled at 2025-07-26 02:32:34.433162+09:00)
2025-07-25 17:32:34,435 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:32:34.435319
2025-07-25 17:32:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:32:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:32:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:32:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:32:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:32:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:32:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:32:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:32:34,440 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:32:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:33:34 KST)" executed successfully
2025-07-25 17:33:34,132 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:33:34,132 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:33:34.433162+09:00 (in 0.300461 seconds)
2025-07-25 17:33:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:33:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:34:34.433162+09:00 (in 59.998932 seconds)
2025-07-25 17:33:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:34:34 KST)" (scheduled at 2025-07-26 02:33:34.433162+09:00)
2025-07-25 17:33:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:33:34.434802
2025-07-25 17:33:34,434 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:33:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:33:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:33:34,436 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:33:34,436 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:33:34,436 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:33:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:33:34,438 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:33:34,439 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:33:34,439 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:34:34 KST)" executed successfully
2025-07-25 17:34:34,145 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:34:34,145 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:34:34.433162+09:00 (in 0.287672 seconds)
2025-07-25 17:34:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:34:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:35:34.433162+09:00 (in 59.999087 seconds)
2025-07-25 17:34:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:35:34 KST)" (scheduled at 2025-07-26 02:34:34.433162+09:00)
2025-07-25 17:34:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:34:34.434821
2025-07-25 17:34:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:34:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:34:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:34:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:34:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:34:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:34:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:34:34,440 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:34:34,440 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:34:34,441 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:35:34 KST)" executed successfully
2025-07-25 17:35:34,142 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:35:34,142 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:35:34.433162+09:00 (in 0.290331 seconds)
2025-07-25 17:35:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:35:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:36:34.433162+09:00 (in 59.998662 seconds)
2025-07-25 17:35:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:36:34 KST)" (scheduled at 2025-07-26 02:35:34.433162+09:00)
2025-07-25 17:35:34,435 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:35:34.435202
2025-07-25 17:35:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:35:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:35:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:35:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:35:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:35:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:35:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:35:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:35:34,439 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:35:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:36:34 KST)" executed successfully
2025-07-25 17:36:34,142 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:36:34,142 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:36:34.433162+09:00 (in 0.290241 seconds)
2025-07-25 17:36:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:36:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:37:34.433162+09:00 (in 59.998898 seconds)
2025-07-25 17:36:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:37:34 KST)" (scheduled at 2025-07-26 02:36:34.433162+09:00)
2025-07-25 17:36:34,434 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:36:34.434976
2025-07-25 17:36:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:36:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:36:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:36:34,436 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:36:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:36:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:36:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:36:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:36:34,439 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:36:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:37:34 KST)" executed successfully
2025-07-25 17:37:34,141 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:37:34,142 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:37:34.433162+09:00 (in 0.290951 seconds)
2025-07-25 17:37:34,433 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:37:34,434 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:38:34.433162+09:00 (in 59.998863 seconds)
2025-07-25 17:37:34,434 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:38:34 KST)" (scheduled at 2025-07-26 02:37:34.433162+09:00)
2025-07-25 17:37:34,435 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:37:34.435243
2025-07-25 17:37:34,435 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:37:34,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:37:34,435 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:37:34,437 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:37:34,437 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:37:34,437 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:37:34,437 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:37:34,439 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:37:34,440 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:37:34,440 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:38:34 KST)" executed successfully
2025-07-25 17:37:58,538 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:37:58,539 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:37:58,539 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:37:58,539 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:38:24,320 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:38:24,326 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:38:24,329 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:38:24,329 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:38:24,330 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:38:24,330 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:38:24,368 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:38:24,369 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:38:24,369 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:38:24,369 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:38:24,369 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:38:24,370 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:38:24,370 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:38:24,370 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:39:24.330320+09:00 (in 59.959803 seconds)
2025-07-25 17:38:24,370 - main - INFO - 등록된 잡 목록:
2025-07-25 17:38:24,371 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:38:24,371 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:38:24,371 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:38:24,371 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:39:24,048 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:39:24,049 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:39:24.330320+09:00 (in 0.280969 seconds)
2025-07-25 17:39:24,330 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:39:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:39:24 KST)" (scheduled at 2025-07-26 02:39:24.330320+09:00)
2025-07-25 17:39:24,332 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:40:24.330320+09:00 (in 59.998125 seconds)
2025-07-25 17:39:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:39:24.332313
2025-07-25 17:39:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:39:24,333 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:39:24,333 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:39:24,345 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:39:24,345 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:39:24,345 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:39:24,345 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:39:24,348 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:39:24,348 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:39:24,348 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:40:24 KST)" executed successfully
2025-07-25 17:40:24,037 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:40:24,037 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:40:24.330320+09:00 (in 0.292762 seconds)
2025-07-25 17:40:24,331 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:40:24,331 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:41:24.330320+09:00 (in 59.998794 seconds)
2025-07-25 17:40:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:41:24 KST)" (scheduled at 2025-07-26 02:40:24.330320+09:00)
2025-07-25 17:40:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:40:24.332150
2025-07-25 17:40:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:40:24,332 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:40:24,332 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:40:24,334 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:40:24,334 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:40:24,334 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:40:24,334 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:40:24,337 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:40:24,337 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:40:24,337 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:41:24 KST)" executed successfully
2025-07-25 17:41:24,057 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:41:24,058 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:41:24.330320+09:00 (in 0.272269 seconds)
2025-07-25 17:41:24,330 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:41:24,331 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:42:24.330320+09:00 (in 59.998872 seconds)
2025-07-25 17:41:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:42:24 KST)" (scheduled at 2025-07-26 02:41:24.330320+09:00)
2025-07-25 17:41:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:41:24.332162
2025-07-25 17:41:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:41:24,332 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:41:24,332 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:41:24,334 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:41:24,334 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:41:24,335 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:41:24,335 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:41:24,337 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:41:24,338 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:41:24,338 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:42:24 KST)" executed successfully
2025-07-25 17:42:24,054 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:42:24,055 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:42:24.330320+09:00 (in 0.275357 seconds)
2025-07-25 17:42:24,331 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:42:24,331 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:43:24.330320+09:00 (in 59.998663 seconds)
2025-07-25 17:42:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:43:24 KST)" (scheduled at 2025-07-26 02:42:24.330320+09:00)
2025-07-25 17:42:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:42:24.332313
2025-07-25 17:42:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:42:24,332 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:42:24,332 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:42:24,334 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:42:24,334 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:42:24,334 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:42:24,335 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:42:24,337 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:42:24,337 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:42:24,337 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:43:24 KST)" executed successfully
2025-07-25 17:43:24,048 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:43:24,049 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:43:24.330320+09:00 (in 0.281249 seconds)
2025-07-25 17:43:24,330 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:43:24,331 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:44:24.330320+09:00 (in 59.998797 seconds)
2025-07-25 17:43:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:44:24 KST)" (scheduled at 2025-07-26 02:43:24.330320+09:00)
2025-07-25 17:43:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:43:24.332405
2025-07-25 17:43:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:43:24,332 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:43:24,332 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:43:24,335 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:43:24,335 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:43:24,335 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:43:24,335 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:43:24,337 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:43:24,337 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:43:24,337 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:44:24 KST)" executed successfully
2025-07-25 17:44:24,054 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:44:24,054 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:44:24.330320+09:00 (in 0.275762 seconds)
2025-07-25 17:44:24,331 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:44:24,331 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:45:24.330320+09:00 (in 59.998682 seconds)
2025-07-25 17:44:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:45:24 KST)" (scheduled at 2025-07-26 02:44:24.330320+09:00)
2025-07-25 17:44:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:44:24.332295
2025-07-25 17:44:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:44:24,332 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:44:24,332 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:44:24,334 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:44:24,334 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:44:24,334 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:44:24,334 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:44:24,337 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:44:24,337 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:44:24,337 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:45:24 KST)" executed successfully
2025-07-25 17:45:24,047 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:45:24,047 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:45:24.330320+09:00 (in 0.282506 seconds)
2025-07-25 17:45:24,330 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:45:24,331 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:46:24.330320+09:00 (in 59.998921 seconds)
2025-07-25 17:45:24,331 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:46:24 KST)" (scheduled at 2025-07-26 02:45:24.330320+09:00)
2025-07-25 17:45:24,332 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:45:24.332495
2025-07-25 17:45:24,332 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:45:24,333 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:45:24,333 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:45:24,336 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:45:24,336 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:45:24,336 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:45:24,336 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:45:24,339 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:45:24,339 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:45:24,339 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:46:24 KST)" executed successfully
2025-07-25 17:45:35,931 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 17:45:35,932 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:45:35,932 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 17:45:35,932 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 17:46:02,721 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:46:02,727 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 17:46:02,730 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:46:02,730 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:46:02,731 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:46:02,731 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 17:46:02,765 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 17:46:02,765 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 17:46:02,765 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 17:46:02,765 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 17:46:02,765 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 17:46:02,766 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:46:02,766 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 17:46:02,766 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:47:02.731512+09:00 (in 59.964703 seconds)
2025-07-25 17:46:02,767 - main - INFO - 등록된 잡 목록:
2025-07-25 17:46:02,767 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 17:46:02,767 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 17:46:02,767 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 17:46:02,767 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 17:47:02,461 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:47:02,462 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:47:02.731512+09:00 (in 0.269203 seconds)
2025-07-25 17:47:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:47:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:48:02 KST)" (scheduled at 2025-07-26 02:47:02.731512+09:00)
2025-07-25 17:47:02,734 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:48:02.731512+09:00 (in 59.997401 seconds)
2025-07-25 17:47:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:47:02.734511
2025-07-25 17:47:02,735 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:47:02,735 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:47:02,735 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:47:02,753 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 17:47:02,753 - main - DEBUG - 활성 알림 수: 2
2025-07-25 17:47:02,753 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:47:02,754 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:47:02,756 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:47:02,756 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:47:02,756 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:48:02 KST)" executed successfully
2025-07-25 17:47:03,612 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:47:03,613 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:47:03,617 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 7412973494
2025-07-25 17:47:03,624 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=1, telegram_id=7412973494
2025-07-25 17:47:03,624 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(042660)으로 가격 알림 조회 시도.
2025-07-25 17:47:03,629 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=042660
2025-07-25 17:47:03,629 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=042660, target_price=75000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 17:47:03,641 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=3, user_id=1, symbol=042660
2025-07-25 17:47:03,643 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:48:02,453 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:48:02,454 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:48:02.731512+09:00 (in 0.277091 seconds)
2025-07-25 17:48:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:48:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:49:02.731512+09:00 (in 59.998895 seconds)
2025-07-25 17:48:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:49:02 KST)" (scheduled at 2025-07-26 02:48:02.731512+09:00)
2025-07-25 17:48:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:48:02.733316
2025-07-25 17:48:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:48:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:48:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:48:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:48:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:48:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:48:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:48:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:48:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:48:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:48:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:48:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:49:02 KST)" executed successfully
2025-07-25 17:49:02,451 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:49:02,451 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:49:02.731512+09:00 (in 0.279606 seconds)
2025-07-25 17:49:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:49:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:50:02.731512+09:00 (in 59.999009 seconds)
2025-07-25 17:49:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:50:02 KST)" (scheduled at 2025-07-26 02:49:02.731512+09:00)
2025-07-25 17:49:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:49:02.733178
2025-07-25 17:49:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:49:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:49:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:49:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:49:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:49:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:49:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:49:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:49:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:49:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:49:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:49:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:50:02 KST)" executed successfully
2025-07-25 17:50:02,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:50:02,475 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:50:02.731512+09:00 (in 0.256298 seconds)
2025-07-25 17:50:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:50:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:51:02.731512+09:00 (in 59.999004 seconds)
2025-07-25 17:50:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:51:02 KST)" (scheduled at 2025-07-26 02:50:02.731512+09:00)
2025-07-25 17:50:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:50:02.733391
2025-07-25 17:50:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:50:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:50:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:50:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:50:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:50:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:50:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:50:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:50:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:50:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:50:02,739 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:50:02,739 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:51:02 KST)" executed successfully
2025-07-25 17:51:02,464 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:51:02,465 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:51:02.731512+09:00 (in 0.266341 seconds)
2025-07-25 17:51:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:51:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:52:02.731512+09:00 (in 59.998959 seconds)
2025-07-25 17:51:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:52:02 KST)" (scheduled at 2025-07-26 02:51:02.731512+09:00)
2025-07-25 17:51:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:51:02.733352
2025-07-25 17:51:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:51:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:51:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:51:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:51:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:51:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:51:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:51:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:51:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:51:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:51:02,739 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:51:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:52:02 KST)" executed successfully
2025-07-25 17:52:02,454 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:52:02,454 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:52:02.731512+09:00 (in 0.276682 seconds)
2025-07-25 17:52:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:52:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:53:02.731512+09:00 (in 59.998921 seconds)
2025-07-25 17:52:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:53:02 KST)" (scheduled at 2025-07-26 02:52:02.731512+09:00)
2025-07-25 17:52:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:52:02.733342
2025-07-25 17:52:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:52:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:52:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:52:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:52:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:52:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:52:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:52:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:52:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:52:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:52:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:52:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:53:02 KST)" executed successfully
2025-07-25 17:53:02,463 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:53:02,464 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:53:02.731512+09:00 (in 0.267123 seconds)
2025-07-25 17:53:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:53:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:54:02.731512+09:00 (in 59.998713 seconds)
2025-07-25 17:53:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:54:02 KST)" (scheduled at 2025-07-26 02:53:02.731512+09:00)
2025-07-25 17:53:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:53:02.733708
2025-07-25 17:53:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:53:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:53:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:53:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:53:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:53:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:53:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:53:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:53:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:53:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:53:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:53:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:54:02 KST)" executed successfully
2025-07-25 17:54:02,467 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:54:02,468 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:54:02.731512+09:00 (in 0.263298 seconds)
2025-07-25 17:54:02,733 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:54:02,734 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:55:02.731512+09:00 (in 59.997392 seconds)
2025-07-25 17:54:02,734 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:55:02 KST)" (scheduled at 2025-07-26 02:54:02.731512+09:00)
2025-07-25 17:54:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:54:02.734759
2025-07-25 17:54:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:54:02,735 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:54:02,735 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:54:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:54:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:54:02,737 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:54:02,737 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:54:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:54:02,739 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:54:02,741 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:54:02,741 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:54:02,741 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:55:02 KST)" executed successfully
2025-07-25 17:55:02,463 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:55:02,463 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:55:02.731512+09:00 (in 0.267926 seconds)
2025-07-25 17:55:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:55:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:56:02.731512+09:00 (in 59.998940 seconds)
2025-07-25 17:55:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:56:02 KST)" (scheduled at 2025-07-26 02:55:02.731512+09:00)
2025-07-25 17:55:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:55:02.733334
2025-07-25 17:55:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:55:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:55:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:55:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:55:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:55:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:55:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:55:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:55:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:55:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:55:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:55:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:56:02 KST)" executed successfully
2025-07-25 17:56:02,472 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:56:02,473 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:56:02.731512+09:00 (in 0.258507 seconds)
2025-07-25 17:56:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:56:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:57:02.731512+09:00 (in 59.998945 seconds)
2025-07-25 17:56:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:57:02 KST)" (scheduled at 2025-07-26 02:56:02.731512+09:00)
2025-07-25 17:56:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:56:02.733268
2025-07-25 17:56:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:56:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:56:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:56:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:56:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:56:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:56:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:56:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:56:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:56:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:56:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:56:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:57:02 KST)" executed successfully
2025-07-25 17:57:02,468 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:57:02,468 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:57:02.731512+09:00 (in 0.262684 seconds)
2025-07-25 17:57:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:57:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:58:02.731512+09:00 (in 59.998604 seconds)
2025-07-25 17:57:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:58:02 KST)" (scheduled at 2025-07-26 02:57:02.731512+09:00)
2025-07-25 17:57:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:57:02.733682
2025-07-25 17:57:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:57:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:57:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:57:02,740 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:57:02,740 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:57:02,740 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:57:02,740 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:57:02,742 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:57:02,742 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:57:02,745 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:57:02,745 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:57:02,745 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:58:02 KST)" executed successfully
2025-07-25 17:58:02,466 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:58:02,466 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:58:02.731512+09:00 (in 0.264938 seconds)
2025-07-25 17:58:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:58:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:59:02.731512+09:00 (in 59.998659 seconds)
2025-07-25 17:58:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:59:02 KST)" (scheduled at 2025-07-26 02:58:02.731512+09:00)
2025-07-25 17:58:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:58:02.733645
2025-07-25 17:58:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:58:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:58:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:58:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:58:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:58:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:58:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:58:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:58:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:58:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:58:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:58:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 02:59:02 KST)" executed successfully
2025-07-25 17:59:02,473 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:59:02,474 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 02:59:02.731512+09:00 (in 0.257219 seconds)
2025-07-25 17:59:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 17:59:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:00:02.731512+09:00 (in 59.998909 seconds)
2025-07-25 17:59:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:00:02 KST)" (scheduled at 2025-07-26 02:59:02.731512+09:00)
2025-07-25 17:59:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 17:59:02.733415
2025-07-25 17:59:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 17:59:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 17:59:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 17:59:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 17:59:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 17:59:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 17:59:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:59:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 17:59:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 17:59:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 17:59:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 17:59:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:00:02 KST)" executed successfully
2025-07-25 18:00:02,470 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:00:02,470 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:00:02.731512+09:00 (in 0.260975 seconds)
2025-07-25 18:00:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:00:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:01:02.731512+09:00 (in 59.998916 seconds)
2025-07-25 18:00:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:01:02 KST)" (scheduled at 2025-07-26 03:00:02.731512+09:00)
2025-07-25 18:00:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:00:02.733320
2025-07-25 18:00:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:00:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:00:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:00:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:00:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:00:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:00:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:00:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:00:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:00:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:00:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:00:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:01:02 KST)" executed successfully
2025-07-25 18:01:02,476 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:01:02,476 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:01:02.731512+09:00 (in 0.255023 seconds)
2025-07-25 18:01:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:01:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:02:02.731512+09:00 (in 59.998449 seconds)
2025-07-25 18:01:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:02:02 KST)" (scheduled at 2025-07-26 03:01:02.731512+09:00)
2025-07-25 18:01:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:01:02.733764
2025-07-25 18:01:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:01:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:01:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:01:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:01:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:01:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:01:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:01:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:01:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:01:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:01:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:01:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:02:02 KST)" executed successfully
2025-07-25 18:02:02,470 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:02:02,471 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:02:02.731512+09:00 (in 0.260492 seconds)
2025-07-25 18:02:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:02:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:03:02.731512+09:00 (in 59.998935 seconds)
2025-07-25 18:02:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:03:02 KST)" (scheduled at 2025-07-26 03:02:02.731512+09:00)
2025-07-25 18:02:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:02:02.733225
2025-07-25 18:02:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:02:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:02:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:02:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:02:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:02:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:02:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:02:02,736 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:02:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:02:02,738 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:02:02,739 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:02:02,739 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:03:02 KST)" executed successfully
2025-07-25 18:03:02,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:03:02,475 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:03:02.731512+09:00 (in 0.256127 seconds)
2025-07-25 18:03:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:03:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:04:02.731512+09:00 (in 59.998466 seconds)
2025-07-25 18:03:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:04:02 KST)" (scheduled at 2025-07-26 03:03:02.731512+09:00)
2025-07-25 18:03:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:03:02.733700
2025-07-25 18:03:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:03:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:03:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:03:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:03:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:03:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:03:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:03:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:03:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:03:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:03:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:03:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:04:02 KST)" executed successfully
2025-07-25 18:04:02,475 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:04:02,475 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:04:02.731512+09:00 (in 0.255594 seconds)
2025-07-25 18:04:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:04:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:05:02.731512+09:00 (in 59.998720 seconds)
2025-07-25 18:04:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:05:02 KST)" (scheduled at 2025-07-26 03:04:02.731512+09:00)
2025-07-25 18:04:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:04:02.733497
2025-07-25 18:04:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:04:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:04:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:04:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:04:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:04:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:04:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:04:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:04:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:04:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:04:02,741 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:04:02,741 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:05:02 KST)" executed successfully
2025-07-25 18:05:02,475 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:05:02,475 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:05:02.731512+09:00 (in 0.255610 seconds)
2025-07-25 18:05:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:05:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:06:02.731512+09:00 (in 59.998800 seconds)
2025-07-25 18:05:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:06:02 KST)" (scheduled at 2025-07-26 03:05:02.731512+09:00)
2025-07-25 18:05:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:05:02.733641
2025-07-25 18:05:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:05:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:05:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:05:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:05:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:05:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:05:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:05:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:05:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:05:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:05:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:05:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:06:02 KST)" executed successfully
2025-07-25 18:06:02,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:06:02,475 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:06:02.731512+09:00 (in 0.256214 seconds)
2025-07-25 18:06:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:06:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:07:02.731512+09:00 (in 59.998330 seconds)
2025-07-25 18:06:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:07:02 KST)" (scheduled at 2025-07-26 03:06:02.731512+09:00)
2025-07-25 18:06:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:06:02.733836
2025-07-25 18:06:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:06:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:06:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:06:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:06:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:06:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:06:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:06:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:06:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:06:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:06:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:06:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:07:02 KST)" executed successfully
2025-07-25 18:07:02,485 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:07:02,485 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:07:02.731512+09:00 (in 0.245790 seconds)
2025-07-25 18:07:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:07:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:08:02.731512+09:00 (in 59.998964 seconds)
2025-07-25 18:07:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:08:02 KST)" (scheduled at 2025-07-26 03:07:02.731512+09:00)
2025-07-25 18:07:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:07:02.733270
2025-07-25 18:07:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:07:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:07:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:07:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:07:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:07:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:07:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:07:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:07:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:07:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:07:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:07:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:08:02 KST)" executed successfully
2025-07-25 18:08:02,478 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:08:02,479 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:08:02.731512+09:00 (in 0.252329 seconds)
2025-07-25 18:08:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:08:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:09:02.731512+09:00 (in 59.998821 seconds)
2025-07-25 18:08:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:09:02 KST)" (scheduled at 2025-07-26 03:08:02.731512+09:00)
2025-07-25 18:08:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:08:02.733635
2025-07-25 18:08:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:08:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:08:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:08:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:08:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:08:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:08:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:08:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:08:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:08:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:08:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:08:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:09:02 KST)" executed successfully
2025-07-25 18:09:02,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:09:02,475 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:09:02.731512+09:00 (in 0.255904 seconds)
2025-07-25 18:09:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:09:02,766 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:10:02.731512+09:00 (in 59.965394 seconds)
2025-07-25 18:09:02,766 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:10:02 KST)" (scheduled at 2025-07-26 03:09:02.731512+09:00)
2025-07-25 18:09:02,768 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:09:02.768092
2025-07-25 18:09:02,768 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:09:02,769 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:09:02,769 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:09:02,790 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:09:02,790 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:09:02,790 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:09:02,790 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:09:02,792 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:09:02,792 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:09:02,795 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:09:02,795 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:09:02,796 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:10:02 KST)" executed successfully
2025-07-25 18:10:02,482 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:10:02,482 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:10:02.731512+09:00 (in 0.248800 seconds)
2025-07-25 18:10:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:10:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:11:02.731512+09:00 (in 59.998888 seconds)
2025-07-25 18:10:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:11:02 KST)" (scheduled at 2025-07-26 03:10:02.731512+09:00)
2025-07-25 18:10:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:10:02.733475
2025-07-25 18:10:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:10:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:10:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:10:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:10:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:10:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:10:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:10:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:10:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:10:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:10:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:10:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:11:02 KST)" executed successfully
2025-07-25 18:11:02,480 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:11:02,481 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:11:02.731512+09:00 (in 0.250125 seconds)
2025-07-25 18:11:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:11:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:12:02.731512+09:00 (in 59.998648 seconds)
2025-07-25 18:11:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:12:02 KST)" (scheduled at 2025-07-26 03:11:02.731512+09:00)
2025-07-25 18:11:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:11:02.733579
2025-07-25 18:11:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:11:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:11:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:11:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:11:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:11:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:11:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:11:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:11:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:11:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:11:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:11:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:12:02 KST)" executed successfully
2025-07-25 18:12:02,485 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:12:02,485 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:12:02.731512+09:00 (in 0.245820 seconds)
2025-07-25 18:12:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:12:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:13:02.731512+09:00 (in 59.998538 seconds)
2025-07-25 18:12:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:13:02 KST)" (scheduled at 2025-07-26 03:12:02.731512+09:00)
2025-07-25 18:12:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:12:02.733708
2025-07-25 18:12:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:12:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:12:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:12:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:12:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:12:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:12:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:12:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:12:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:12:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:12:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:12:02,741 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:13:02 KST)" executed successfully
2025-07-25 18:13:02,483 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:13:02,484 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:13:02.731512+09:00 (in 0.247344 seconds)
2025-07-25 18:13:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:13:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:14:02.731512+09:00 (in 59.998940 seconds)
2025-07-25 18:13:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:14:02 KST)" (scheduled at 2025-07-26 03:13:02.731512+09:00)
2025-07-25 18:13:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:13:02.733062
2025-07-25 18:13:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:13:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:13:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:13:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:13:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:13:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:13:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:13:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:13:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:13:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:13:02,750 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:13:02,750 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:14:02 KST)" executed successfully
2025-07-25 18:14:02,478 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:14:02,478 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:14:02.731512+09:00 (in 0.252596 seconds)
2025-07-25 18:14:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:14:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:15:02.731512+09:00 (in 59.998110 seconds)
2025-07-25 18:14:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:15:02 KST)" (scheduled at 2025-07-26 03:14:02.731512+09:00)
2025-07-25 18:14:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:14:02.734408
2025-07-25 18:14:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:14:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:14:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:14:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:14:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:14:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:14:02,737 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:14:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:14:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:14:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:14:02,741 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:14:02,741 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:15:02 KST)" executed successfully
2025-07-25 18:15:02,481 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:15:02,481 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:15:02.731512+09:00 (in 0.249909 seconds)
2025-07-25 18:15:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:15:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:16:02.731512+09:00 (in 59.998396 seconds)
2025-07-25 18:15:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:16:02 KST)" (scheduled at 2025-07-26 03:15:02.731512+09:00)
2025-07-25 18:15:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:15:02.733889
2025-07-25 18:15:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:15:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:15:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:15:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:15:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:15:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:15:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:15:02,739 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:15:02,739 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:15:02,741 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:15:02,742 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:15:02,742 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:16:02 KST)" executed successfully
2025-07-25 18:16:02,489 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:16:02,489 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:16:02.731512+09:00 (in 0.241627 seconds)
2025-07-25 18:16:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:16:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:17:02.731512+09:00 (in 59.998245 seconds)
2025-07-25 18:16:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:17:02 KST)" (scheduled at 2025-07-26 03:16:02.731512+09:00)
2025-07-25 18:16:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:16:02.734131
2025-07-25 18:16:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:16:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:16:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:16:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:16:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:16:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:16:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:16:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:16:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:16:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:16:02,741 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:16:02,741 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:17:02 KST)" executed successfully
2025-07-25 18:17:02,482 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:17:02,482 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:17:02.731512+09:00 (in 0.248874 seconds)
2025-07-25 18:17:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:17:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:18:02.731512+09:00 (in 59.998870 seconds)
2025-07-25 18:17:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:18:02 KST)" (scheduled at 2025-07-26 03:17:02.731512+09:00)
2025-07-25 18:17:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:17:02.733439
2025-07-25 18:17:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:17:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:17:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:17:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:17:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:17:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:17:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:17:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:17:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:17:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:17:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:17:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:18:02 KST)" executed successfully
2025-07-25 18:18:02,491 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:18:02,491 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:18:02.731512+09:00 (in 0.239810 seconds)
2025-07-25 18:18:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:18:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:19:02.731512+09:00 (in 59.998612 seconds)
2025-07-25 18:18:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:19:02 KST)" (scheduled at 2025-07-26 03:18:02.731512+09:00)
2025-07-25 18:18:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:18:02.733605
2025-07-25 18:18:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:18:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:18:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:18:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:18:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:18:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:18:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:18:02,746 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:18:02,746 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:18:02,748 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:18:02,749 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:18:02,749 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:19:02 KST)" executed successfully
2025-07-25 18:19:02,493 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:19:02,493 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:19:02.731512+09:00 (in 0.238055 seconds)
2025-07-25 18:19:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:19:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:20:02.731512+09:00 (in 59.999164 seconds)
2025-07-25 18:19:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:20:02 KST)" (scheduled at 2025-07-26 03:19:02.731512+09:00)
2025-07-25 18:19:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:19:02.732989
2025-07-25 18:19:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:19:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:19:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:19:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:19:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:19:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:19:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:19:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:19:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:19:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:19:02,739 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:19:02,739 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:20:02 KST)" executed successfully
2025-07-25 18:20:02,485 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:20:02,486 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:20:02.731512+09:00 (in 0.245336 seconds)
2025-07-25 18:20:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:20:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:21:02.731512+09:00 (in 59.998873 seconds)
2025-07-25 18:20:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:21:02 KST)" (scheduled at 2025-07-26 03:20:02.731512+09:00)
2025-07-25 18:20:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:20:02.733386
2025-07-25 18:20:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:20:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:20:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:20:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:20:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:20:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:20:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:20:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:20:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:20:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:20:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:20:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:21:02 KST)" executed successfully
2025-07-25 18:21:02,486 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:21:02,486 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:21:02.731512+09:00 (in 0.245008 seconds)
2025-07-25 18:21:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:21:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:22:02.731512+09:00 (in 59.998683 seconds)
2025-07-25 18:21:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:22:02 KST)" (scheduled at 2025-07-26 03:21:02.731512+09:00)
2025-07-25 18:21:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:21:02.733729
2025-07-25 18:21:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:21:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:21:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:21:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:21:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:21:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:21:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:21:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:21:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:21:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:21:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:21:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:22:02 KST)" executed successfully
2025-07-25 18:22:02,490 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:22:02,490 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:22:02.731512+09:00 (in 0.240883 seconds)
2025-07-25 18:22:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:22:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:23:02.731512+09:00 (in 59.998332 seconds)
2025-07-25 18:22:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:23:02 KST)" (scheduled at 2025-07-26 03:22:02.731512+09:00)
2025-07-25 18:22:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:22:02.734064
2025-07-25 18:22:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:22:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:22:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:22:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:22:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:22:02,737 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:22:02,737 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:22:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:22:02,739 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:22:02,742 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:22:02,742 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:22:02,742 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:23:02 KST)" executed successfully
2025-07-25 18:23:02,491 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:23:02,492 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:23:02.731512+09:00 (in 0.239299 seconds)
2025-07-25 18:23:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:23:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:24:02.731512+09:00 (in 59.998489 seconds)
2025-07-25 18:23:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:24:02 KST)" (scheduled at 2025-07-26 03:23:02.731512+09:00)
2025-07-25 18:23:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:23:02.733886
2025-07-25 18:23:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:23:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:23:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:23:02,738 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:23:02,738 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:23:02,738 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:23:02,738 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:23:02,740 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:23:02,740 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:23:02,743 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:23:02,743 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:23:02,743 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:24:02 KST)" executed successfully
2025-07-25 18:24:02,494 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:24:02,494 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:24:02.731512+09:00 (in 0.236841 seconds)
2025-07-25 18:24:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:24:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:25:02.731512+09:00 (in 59.998500 seconds)
2025-07-25 18:24:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:25:02 KST)" (scheduled at 2025-07-26 03:24:02.731512+09:00)
2025-07-25 18:24:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:24:02.733658
2025-07-25 18:24:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:24:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:24:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:24:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:24:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:24:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:24:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:24:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:24:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:24:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:24:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:24:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:25:02 KST)" executed successfully
2025-07-25 18:25:02,507 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:25:02,507 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:25:02.731512+09:00 (in 0.223982 seconds)
2025-07-25 18:25:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:25:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:26:02.731512+09:00 (in 59.998135 seconds)
2025-07-25 18:25:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:26:02 KST)" (scheduled at 2025-07-26 03:25:02.731512+09:00)
2025-07-25 18:25:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:25:02.734117
2025-07-25 18:25:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:25:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:25:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:25:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:25:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:25:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:25:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:25:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:25:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:25:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:25:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:25:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:26:02 KST)" executed successfully
2025-07-25 18:26:02,484 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:26:02,485 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:26:02.731512+09:00 (in 0.246451 seconds)
2025-07-25 18:26:02,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:26:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:27:02.731512+09:00 (in 59.998928 seconds)
2025-07-25 18:26:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:27:02 KST)" (scheduled at 2025-07-26 03:26:02.731512+09:00)
2025-07-25 18:26:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:26:02.733217
2025-07-25 18:26:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:26:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:26:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:26:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:26:02,735 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:26:02,735 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:26:02,735 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:26:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:26:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:26:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:26:02,739 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:26:02,739 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:27:02 KST)" executed successfully
2025-07-25 18:27:02,489 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:27:02,490 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:27:02.731512+09:00 (in 0.241520 seconds)
2025-07-25 18:27:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:27:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:28:02.731512+09:00 (in 59.998676 seconds)
2025-07-25 18:27:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:28:02 KST)" (scheduled at 2025-07-26 03:27:02.731512+09:00)
2025-07-25 18:27:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:27:02.734146
2025-07-25 18:27:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:27:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:27:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:27:02,738 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:27:02,738 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:27:02,738 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:27:02,739 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:27:02,741 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:27:02,741 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:27:02,745 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:27:02,745 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:27:02,745 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:28:02 KST)" executed successfully
2025-07-25 18:28:02,489 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:28:02,489 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:28:02.731512+09:00 (in 0.241996 seconds)
2025-07-25 18:28:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:28:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:29:02.731512+09:00 (in 59.998862 seconds)
2025-07-25 18:28:02,732 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:29:02 KST)" (scheduled at 2025-07-26 03:28:02.731512+09:00)
2025-07-25 18:28:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:28:02.733363
2025-07-25 18:28:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:28:02,733 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:28:02,733 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:28:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:28:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:28:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:28:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:28:02,737 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:28:02,737 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:28:02,739 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:28:02,739 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:28:02,739 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:29:02 KST)" executed successfully
2025-07-25 18:29:02,491 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:29:02,491 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:29:02.731512+09:00 (in 0.239821 seconds)
2025-07-25 18:29:02,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:29:02,732 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:30:02.731512+09:00 (in 59.998598 seconds)
2025-07-25 18:29:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:30:02 KST)" (scheduled at 2025-07-26 03:29:02.731512+09:00)
2025-07-25 18:29:02,733 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:29:02.733642
2025-07-25 18:29:02,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:29:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:29:02,734 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:29:02,735 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:29:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:29:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:29:02,736 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:29:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:29:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:29:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:29:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:29:02,741 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:30:02 KST)" executed successfully
2025-07-25 18:30:02,490 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:30:02,490 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:30:02.731512+09:00 (in 0.240603 seconds)
2025-07-25 18:30:02,733 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:30:02,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:31:02.731512+09:00 (in 59.997844 seconds)
2025-07-25 18:30:02,733 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:31:02 KST)" (scheduled at 2025-07-26 03:30:02.731512+09:00)
2025-07-25 18:30:02,734 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:30:02.734579
2025-07-25 18:30:02,734 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:30:02,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:30:02,735 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:30:02,736 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:30:02,736 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:30:02,736 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:30:02,737 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:30:02,738 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:30:02,738 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:30:02,740 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:30:02,740 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:30:02,740 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:31:02 KST)" executed successfully
2025-07-25 18:30:33,248 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 18:30:33,249 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:30:33,249 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 18:30:33,250 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 18:30:58,242 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:30:58,247 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:30:58,251 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:30:58,251 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:30:58,252 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:30:58,252 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:30:58,286 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 18:30:58,286 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 18:30:58,286 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 18:30:58,286 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 18:30:58,286 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 18:30:58,287 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:30:58,287 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 18:30:58,287 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:31:58.252442+09:00 (in 59.964659 seconds)
2025-07-25 18:30:58,287 - main - INFO - 등록된 잡 목록:
2025-07-25 18:30:58,288 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 18:30:58,288 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 18:30:58,288 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 18:30:58,288 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 18:31:58,011 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:31:58,012 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:31:58.252442+09:00 (in 0.240095 seconds)
2025-07-25 18:31:58,253 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:31:58,254 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:32:58 KST)" (scheduled at 2025-07-26 03:31:58.252442+09:00)
2025-07-25 18:31:58,254 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:32:58.252442+09:00 (in 59.998109 seconds)
2025-07-25 18:31:58,254 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:31:58.254719
2025-07-25 18:31:58,255 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:31:58,255 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:31:58,255 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:31:58,267 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:31:58,267 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:31:58,268 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:31:58,268 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:31:58,270 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:31:58,270 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:31:58,273 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:31:58,274 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:31:58,274 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:32:58 KST)" executed successfully
2025-07-25 18:32:14,917 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 18:32:14,918 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:32:14,918 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 18:32:14,919 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 18:32:43,775 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:32:43,802 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:32:43,807 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:32:43,809 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:32:43,820 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:32:43,821 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:32:43,942 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 18:32:43,942 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 18:32:43,943 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 18:32:43,943 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 18:32:43,943 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 18:32:43,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:32:43,948 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:33:43.821486+09:00 (in 59.873246 seconds)
2025-07-25 18:32:43,949 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 18:32:43,949 - main - INFO - 등록된 잡 목록:
2025-07-25 18:32:43,949 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 18:32:43,952 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 18:32:43,952 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 18:32:43,952 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 18:33:43,582 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:33:43,583 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:33:43.821486+09:00 (in 0.238329 seconds)
2025-07-25 18:33:43,822 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:33:43,824 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:34:43 KST)" (scheduled at 2025-07-26 03:33:43.821486+09:00)
2025-07-25 18:33:43,825 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:34:43.821486+09:00 (in 59.996201 seconds)
2025-07-25 18:33:43,825 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:33:43.825920
2025-07-25 18:33:43,826 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:33:43,826 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:33:43,827 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:33:43,856 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:33:43,857 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:33:43,857 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:33:43,857 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:33:43,861 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:33:43,861 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:33:43,865 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:33:43,865 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:33:43,865 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:34:43 KST)" executed successfully
2025-07-25 18:34:21,535 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 18:34:21,535 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:34:21,535 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 18:34:21,536 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 18:34:50,193 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:34:50,204 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:34:50,209 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:34:50,209 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:34:50,210 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:34:50,211 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:34:50,276 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 18:34:50,277 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 18:34:50,277 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 18:34:50,277 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 18:34:50,278 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 18:34:50,278 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:34:50,278 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 18:34:50,279 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:35:50.211292+09:00 (in 59.931789 seconds)
2025-07-25 18:34:50,279 - main - INFO - 등록된 잡 목록:
2025-07-25 18:34:50,280 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 18:34:50,280 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 18:34:50,280 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 18:34:50,281 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 18:35:49,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:35:49,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:35:50.211292+09:00 (in 0.232212 seconds)
2025-07-25 18:35:50,211 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:35:50,212 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:36:50 KST)" (scheduled at 2025-07-26 03:35:50.211292+09:00)
2025-07-25 18:35:50,213 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:36:50.211292+09:00 (in 59.997980 seconds)
2025-07-25 18:35:50,213 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:35:50.213801
2025-07-25 18:35:50,215 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:35:50,215 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:35:50,215 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:35:50,242 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:35:50,242 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:35:50,242 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:35:50,242 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:35:50,244 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:35:50,245 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:35:50,247 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:35:50,247 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:35:50,248 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:36:50 KST)" executed successfully
2025-07-25 18:36:39,111 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 18:36:39,112 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:36:39,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 18:36:39,113 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 18:37:05,590 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:37:05,596 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:37:05,601 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:37:05,601 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:37:05,602 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:37:05,603 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:37:05,653 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 18:37:05,653 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 18:37:05,653 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 18:37:05,654 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 18:37:05,654 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 18:37:05,654 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:37:05,654 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 18:37:05,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:38:05.603130+09:00 (in 59.947878 seconds)
2025-07-25 18:37:05,655 - main - INFO - 등록된 잡 목록:
2025-07-25 18:37:05,655 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 18:37:05,656 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 18:37:05,656 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 18:37:05,656 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 18:38:05,375 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:38:05,375 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:38:05.603130+09:00 (in 0.227163 seconds)
2025-07-25 18:38:05,603 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:38:05,604 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:39:05 KST)" (scheduled at 2025-07-26 03:38:05.603130+09:00)
2025-07-25 18:38:05,604 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:39:05.603130+09:00 (in 59.998273 seconds)
2025-07-25 18:38:05,605 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:38:05.605324
2025-07-25 18:38:05,605 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:38:05,606 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:38:05,606 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:38:05,618 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:38:05,619 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:38:05,619 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:38:05,619 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:38:05,621 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:38:05,621 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:38:05,624 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:38:05,624 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:38:05,625 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:39:05 KST)" executed successfully
2025-07-25 18:39:05,190 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 18:39:05,190 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:39:05,191 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 18:39:05,191 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 18:39:34,132 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:39:34,141 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:39:34,146 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:39:34,147 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:39:34,148 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:39:34,148 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:39:34,195 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 18:39:34,195 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 18:39:34,196 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 18:39:34,196 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 18:39:34,197 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 18:39:34,198 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:39:34,198 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 18:39:34,198 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:40:34.148212+09:00 (in 59.949570 seconds)
2025-07-25 18:39:34,198 - main - INFO - 등록된 잡 목록:
2025-07-25 18:39:34,199 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 18:39:34,199 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 18:39:34,199 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 18:39:34,199 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 18:40:31,751 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 18:40:31,752 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:40:31,752 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 18:40:31,752 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 18:41:08,924 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:41:08,930 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 18:41:08,933 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:41:08,934 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:41:08,935 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:41:08,935 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 18:41:08,965 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 18:41:08,966 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 18:41:08,966 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 18:41:08,966 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 18:41:08,966 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 18:41:08,966 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:41:08,967 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 18:41:08,967 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:42:08.935372+09:00 (in 59.967920 seconds)
2025-07-25 18:41:08,967 - main - INFO - 등록된 잡 목록:
2025-07-25 18:41:08,968 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 18:41:08,968 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 18:41:08,968 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 18:41:08,968 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 18:42:08,700 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:42:08,701 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:42:08.935372+09:00 (in 0.234142 seconds)
2025-07-25 18:42:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:42:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:43:08 KST)" (scheduled at 2025-07-26 03:42:08.935372+09:00)
2025-07-25 18:42:08,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:43:08.935372+09:00 (in 59.998204 seconds)
2025-07-25 18:42:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:42:08.937619
2025-07-25 18:42:08,938 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:42:08,938 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:42:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:42:08,949 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:42:08,950 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:42:08,950 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:42:08,950 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:42:08,952 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:42:08,952 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:42:08,954 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:42:08,954 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:42:08,954 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:43:08 KST)" executed successfully
2025-07-25 18:43:08,707 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:43:08,708 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:43:08.935372+09:00 (in 0.227332 seconds)
2025-07-25 18:43:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:43:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:44:08.935372+09:00 (in 59.998729 seconds)
2025-07-25 18:43:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:44:08 KST)" (scheduled at 2025-07-26 03:43:08.935372+09:00)
2025-07-25 18:43:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:43:08.937461
2025-07-25 18:43:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:43:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:43:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:43:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:43:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:43:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:43:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:43:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:43:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:43:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:43:08,944 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:43:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:44:08 KST)" executed successfully
2025-07-25 18:44:08,696 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:44:08,697 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:44:08.935372+09:00 (in 0.238185 seconds)
2025-07-25 18:44:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:44:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:45:08.935372+09:00 (in 59.998835 seconds)
2025-07-25 18:44:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:45:08 KST)" (scheduled at 2025-07-26 03:44:08.935372+09:00)
2025-07-25 18:44:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:44:08.937268
2025-07-25 18:44:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:44:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:44:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:44:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:44:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:44:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:44:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:44:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:44:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:44:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:44:08,944 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:44:08,944 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:45:08 KST)" executed successfully
2025-07-25 18:45:08,702 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:45:08,703 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:45:08.935372+09:00 (in 0.232248 seconds)
2025-07-25 18:45:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:45:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:46:08.935372+09:00 (in 59.998790 seconds)
2025-07-25 18:45:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:46:08 KST)" (scheduled at 2025-07-26 03:45:08.935372+09:00)
2025-07-25 18:45:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:45:08.937481
2025-07-25 18:45:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:45:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:45:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:45:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:45:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:45:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:45:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:45:08,943 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:45:08,943 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:45:08,946 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:45:08,946 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:45:08,946 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:46:08 KST)" executed successfully
2025-07-25 18:46:08,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:46:08,695 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:46:08.935372+09:00 (in 0.240069 seconds)
2025-07-25 18:46:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:46:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:47:08.935372+09:00 (in 59.998765 seconds)
2025-07-25 18:46:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:47:08 KST)" (scheduled at 2025-07-26 03:46:08.935372+09:00)
2025-07-25 18:46:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:46:08.937651
2025-07-25 18:46:08,938 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:46:08,938 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:46:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:46:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:46:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:46:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:46:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:46:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:46:08,943 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:46:08,946 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:46:08,947 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:46:08,947 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:47:08 KST)" executed successfully
2025-07-25 18:47:08,709 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:47:08,709 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:47:08.935372+09:00 (in 0.225451 seconds)
2025-07-25 18:47:08,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:47:08,938 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:48:08.935372+09:00 (in 59.997256 seconds)
2025-07-25 18:47:08,938 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:48:08 KST)" (scheduled at 2025-07-26 03:47:08.935372+09:00)
2025-07-25 18:47:08,938 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:47:08.938964
2025-07-25 18:47:08,939 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:47:08,939 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:47:08,939 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:47:08,941 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:47:08,941 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:47:08,941 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:47:08,941 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:47:08,943 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:47:08,943 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:47:08,945 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:47:08,946 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:47:08,946 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:48:08 KST)" executed successfully
2025-07-25 18:47:22,477 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:47:22,495 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:47:51,525 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:47:51,532 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:48:08,699 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:48:08,699 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:48:08.935372+09:00 (in 0.235513 seconds)
2025-07-25 18:48:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:48:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:49:08.935372+09:00 (in 59.998823 seconds)
2025-07-25 18:48:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:49:08 KST)" (scheduled at 2025-07-26 03:48:08.935372+09:00)
2025-07-25 18:48:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:48:08.937197
2025-07-25 18:48:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:48:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:48:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:48:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:48:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:48:08,939 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:48:08,939 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:48:08,941 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:48:08,941 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:48:08,943 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:48:08,944 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:48:08,944 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:49:08 KST)" executed successfully
2025-07-25 18:49:08,695 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:49:08,695 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:49:08.935372+09:00 (in 0.239620 seconds)
2025-07-25 18:49:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:49:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:50:08.935372+09:00 (in 59.998924 seconds)
2025-07-25 18:49:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:50:08 KST)" (scheduled at 2025-07-26 03:49:08.935372+09:00)
2025-07-25 18:49:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:49:08.937193
2025-07-25 18:49:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:49:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:49:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:49:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:49:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:49:08,939 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:49:08,939 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:49:08,941 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:49:08,941 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:49:08,943 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:49:08,943 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:49:08,944 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:50:08 KST)" executed successfully
2025-07-25 18:50:08,683 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:50:08,684 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:50:08.935372+09:00 (in 0.251365 seconds)
2025-07-25 18:50:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:50:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:51:08.935372+09:00 (in 59.998805 seconds)
2025-07-25 18:50:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:51:08 KST)" (scheduled at 2025-07-26 03:50:08.935372+09:00)
2025-07-25 18:50:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:50:08.937243
2025-07-25 18:50:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:50:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:50:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:50:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:50:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:50:08,939 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:50:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:50:08,941 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:50:08,941 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:50:08,943 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:50:08,944 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:50:08,944 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:51:08 KST)" executed successfully
2025-07-25 18:51:08,707 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:51:08,707 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:51:08.935372+09:00 (in 0.227732 seconds)
2025-07-25 18:51:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:51:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:52:08.935372+09:00 (in 59.998401 seconds)
2025-07-25 18:51:08,937 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:52:08 KST)" (scheduled at 2025-07-26 03:51:08.935372+09:00)
2025-07-25 18:51:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:51:08.937804
2025-07-25 18:51:08,938 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:51:08,938 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:51:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:51:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:51:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:51:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:51:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:51:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:51:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:51:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:51:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:51:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:52:08 KST)" executed successfully
2025-07-25 18:52:08,695 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:52:08,696 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:52:08.935372+09:00 (in 0.239001 seconds)
2025-07-25 18:52:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:52:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:53:08.935372+09:00 (in 59.998599 seconds)
2025-07-25 18:52:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:53:08 KST)" (scheduled at 2025-07-26 03:52:08.935372+09:00)
2025-07-25 18:52:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:52:08.937494
2025-07-25 18:52:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:52:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:52:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:52:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:52:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:52:08,941 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:52:08,941 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:52:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:52:08,943 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:52:08,945 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:52:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:52:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:53:08 KST)" executed successfully
2025-07-25 18:53:08,703 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:53:08,703 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:53:08.935372+09:00 (in 0.231610 seconds)
2025-07-25 18:53:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:53:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:54:08.935372+09:00 (in 59.998824 seconds)
2025-07-25 18:53:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:54:08 KST)" (scheduled at 2025-07-26 03:53:08.935372+09:00)
2025-07-25 18:53:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:53:08.937161
2025-07-25 18:53:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:53:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:53:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:53:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:53:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:53:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:53:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:53:08,941 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:53:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:53:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:53:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:53:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:54:08 KST)" executed successfully
2025-07-25 18:54:08,680 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:54:08,680 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:54:08.935372+09:00 (in 0.254971 seconds)
2025-07-25 18:54:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:54:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:55:08.935372+09:00 (in 59.998632 seconds)
2025-07-25 18:54:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:55:08 KST)" (scheduled at 2025-07-26 03:54:08.935372+09:00)
2025-07-25 18:54:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:54:08.937480
2025-07-25 18:54:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:54:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:54:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:54:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:54:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:54:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:54:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:54:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:54:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:54:08,945 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:54:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:54:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:55:08 KST)" executed successfully
2025-07-25 18:55:08,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:55:08,695 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:55:08.935372+09:00 (in 0.240086 seconds)
2025-07-25 18:55:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:55:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:56:08.935372+09:00 (in 59.998748 seconds)
2025-07-25 18:55:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:56:08 KST)" (scheduled at 2025-07-26 03:55:08.935372+09:00)
2025-07-25 18:55:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:55:08.937439
2025-07-25 18:55:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:55:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:55:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:55:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:55:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:55:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:55:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:55:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:55:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:55:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:55:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:55:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:56:08 KST)" executed successfully
2025-07-25 18:56:08,402 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:56:08,403 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:56:08.935372+09:00 (in 0.532390 seconds)
2025-07-25 18:56:08,823 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:56:08,823 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:56:08.935372+09:00 (in 0.111541 seconds)
2025-07-25 18:56:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:56:08,937 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:57:08.935372+09:00 (in 59.997770 seconds)
2025-07-25 18:56:08,937 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:57:08 KST)" (scheduled at 2025-07-26 03:56:08.935372+09:00)
2025-07-25 18:56:08,938 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:56:08.938401
2025-07-25 18:56:08,938 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:56:08,938 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:56:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:56:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:56:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:56:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:56:08,941 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:56:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:56:08,943 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:56:08,945 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:56:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:56:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:57:08 KST)" executed successfully
2025-07-25 18:57:08,712 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:57:08,712 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:57:08.935372+09:00 (in 0.222510 seconds)
2025-07-25 18:57:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:57:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:58:08.935372+09:00 (in 59.998495 seconds)
2025-07-25 18:57:08,937 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:58:08 KST)" (scheduled at 2025-07-26 03:57:08.935372+09:00)
2025-07-25 18:57:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:57:08.937750
2025-07-25 18:57:08,938 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:57:08,938 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:57:08,938 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:57:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:57:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:57:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:57:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:57:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:57:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:57:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:57:08,944 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:57:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:58:08 KST)" executed successfully
2025-07-25 18:58:08,672 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:58:08,672 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:58:08.935372+09:00 (in 0.262419 seconds)
2025-07-25 18:58:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:58:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:59:08.935372+09:00 (in 59.998875 seconds)
2025-07-25 18:58:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:59:08 KST)" (scheduled at 2025-07-26 03:58:08.935372+09:00)
2025-07-25 18:58:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:58:08.937232
2025-07-25 18:58:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:58:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:58:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:58:08,940 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:58:08,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:58:08,940 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:58:08,940 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:58:08,942 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:58:08,942 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:58:08,944 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:58:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:58:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 03:59:08 KST)" executed successfully
2025-07-25 18:59:08,692 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:59:08,693 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 03:59:08.935372+09:00 (in 0.242388 seconds)
2025-07-25 18:59:08,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 18:59:08,938 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:00:08.935372+09:00 (in 59.997191 seconds)
2025-07-25 18:59:08,938 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:00:08 KST)" (scheduled at 2025-07-26 03:59:08.935372+09:00)
2025-07-25 18:59:08,938 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 18:59:08.938974
2025-07-25 18:59:08,939 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 18:59:08,939 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 18:59:08,939 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 18:59:08,941 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 18:59:08,941 - main - DEBUG - 활성 알림 수: 3
2025-07-25 18:59:08,941 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 18:59:08,941 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:59:08,943 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 18:59:08,943 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 18:59:08,945 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 18:59:08,945 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 18:59:08,945 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:00:08 KST)" executed successfully
2025-07-25 19:00:08,696 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:00:08,697 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:00:08.935372+09:00 (in 0.238133 seconds)
2025-07-25 19:00:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:00:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:01:08.935372+09:00 (in 59.998922 seconds)
2025-07-25 19:00:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:01:08 KST)" (scheduled at 2025-07-26 04:00:08.935372+09:00)
2025-07-25 19:00:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:00:08.937229
2025-07-25 19:00:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:00:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:00:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:00:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:00:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:00:08,939 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:00:08,939 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:00:08,941 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:00:08,941 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:00:08,943 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:00:08,943 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:00:08,943 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:01:08 KST)" executed successfully
2025-07-25 19:01:08,684 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:01:08,685 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:01:08.935372+09:00 (in 0.250353 seconds)
2025-07-25 19:01:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:01:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:02:08.935372+09:00 (in 59.998957 seconds)
2025-07-25 19:01:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:02:08 KST)" (scheduled at 2025-07-26 04:01:08.935372+09:00)
2025-07-25 19:01:08,937 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:01:08.937018
2025-07-25 19:01:08,937 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:01:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:01:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:01:08,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:01:08,939 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:01:08,939 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:01:08,939 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:01:08,941 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:01:08,941 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:01:08,942 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:01:08,943 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:01:08,943 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:02:08 KST)" executed successfully
2025-07-25 19:02:08,693 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:02:08,694 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:02:08.935372+09:00 (in 0.241058 seconds)
2025-07-25 19:02:08,935 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:02:08,936 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:03:08.935372+09:00 (in 59.999117 seconds)
2025-07-25 19:02:08,936 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:03:08 KST)" (scheduled at 2025-07-26 04:02:08.935372+09:00)
2025-07-25 19:02:08,936 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:02:08.936801
2025-07-25 19:02:08,936 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:02:08,937 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:02:08,937 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:02:08,938 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:02:08,938 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:02:08,939 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:02:08,939 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:02:08,940 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:02:08,940 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:02:08,942 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:02:08,942 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:02:08,943 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:03:08 KST)" executed successfully
2025-07-25 19:02:37,135 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 19:02:37,135 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:02:37,136 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 19:02:37,136 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 19:03:07,235 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:03:07,240 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:03:07,244 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:03:07,244 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:03:07,245 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:03:07,245 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:03:07,276 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 19:03:07,276 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 19:03:07,276 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 19:03:07,277 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 19:03:07,277 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 19:03:07,277 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:03:07,278 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 19:03:07,278 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:04:07.245334+09:00 (in 59.966908 seconds)
2025-07-25 19:03:07,278 - main - INFO - 등록된 잡 목록:
2025-07-25 19:03:07,279 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 19:03:07,279 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 19:03:07,279 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 19:03:07,279 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 19:04:06,982 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:04:06,982 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:04:07.245334+09:00 (in 0.262407 seconds)
2025-07-25 19:04:07,245 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:04:07,246 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:05:07 KST)" (scheduled at 2025-07-26 04:04:07.245334+09:00)
2025-07-25 19:04:07,246 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:05:07.245334+09:00 (in 59.998563 seconds)
2025-07-25 19:04:07,247 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:04:07.247182
2025-07-25 19:04:07,247 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:04:07,247 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:04:07,247 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:04:07,259 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:04:07,259 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:04:07,259 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:04:07,260 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:04:07,261 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:04:07,261 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:04:07,263 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:04:07,263 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:04:07,263 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:05:07 KST)" executed successfully
2025-07-25 19:05:07,005 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:05:07,005 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:05:07.245334+09:00 (in 0.239635 seconds)
2025-07-25 19:05:07,245 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:05:07,246 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:06:07.245334+09:00 (in 59.998851 seconds)
2025-07-25 19:05:07,246 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:06:07 KST)" (scheduled at 2025-07-26 04:05:07.245334+09:00)
2025-07-25 19:05:07,248 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:05:07.248214
2025-07-25 19:05:07,248 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:05:07,248 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:05:07,248 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:05:07,250 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:05:07,250 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:05:07,250 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:05:07,250 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:05:07,252 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:05:07,252 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:05:07,255 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:05:07,255 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:05:07,255 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:06:07 KST)" executed successfully
2025-07-25 19:05:26,762 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 19:05:26,763 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:05:26,763 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 19:05:26,763 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 19:05:52,403 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:05:52,409 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:05:52,412 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:05:52,413 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:05:52,413 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:05:52,414 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:05:52,440 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 19:05:52,440 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 19:05:52,440 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 19:05:52,440 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 19:05:52,440 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 19:05:52,441 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:05:52,441 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 19:05:52,441 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:06:52.414015+09:00 (in 59.972234 seconds)
2025-07-25 19:05:52,442 - main - INFO - 등록된 잡 목록:
2025-07-25 19:05:52,442 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 19:05:52,442 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 19:05:52,442 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 19:05:52,442 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 19:06:52,170 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:06:52,170 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:06:52.414015+09:00 (in 0.243470 seconds)
2025-07-25 19:06:52,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:06:52,415 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:07:52 KST)" (scheduled at 2025-07-26 04:06:52.414015+09:00)
2025-07-25 19:06:52,416 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:07:52.414015+09:00 (in 59.998033 seconds)
2025-07-25 19:06:52,416 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:06:52.416363
2025-07-25 19:06:52,416 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:06:52,417 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:06:52,417 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:06:52,432 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:06:52,432 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:06:52,432 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:06:52,432 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:06:52,435 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:06:52,435 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:06:52,438 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:06:52,439 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:06:52,439 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:07:52 KST)" executed successfully
2025-07-25 19:07:23,128 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 19:07:23,129 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:07:23,129 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 19:07:23,129 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 19:07:54,377 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:07:54,382 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:07:54,386 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:07:54,387 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:07:54,387 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:07:54,387 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:07:54,421 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 19:07:54,421 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 19:07:54,421 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 19:07:54,421 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 19:07:54,422 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 19:07:54,422 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:07:54,422 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 19:07:54,423 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:08:54.387899+09:00 (in 59.964904 seconds)
2025-07-25 19:07:54,423 - main - INFO - 등록된 잡 목록:
2025-07-25 19:07:54,423 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 19:07:54,423 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 19:07:54,424 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 19:07:54,424 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 19:08:23,679 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:08:23,773 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:08:28,526 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:08:28,538 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:08:35,809 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:08:35,820 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:08:54,151 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:08:54,152 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:08:54.387899+09:00 (in 0.235681 seconds)
2025-07-25 19:08:54,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:08:54,389 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:09:54 KST)" (scheduled at 2025-07-26 04:08:54.387899+09:00)
2025-07-25 19:08:54,389 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:09:54.387899+09:00 (in 59.998313 seconds)
2025-07-25 19:08:54,390 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:08:54.389985
2025-07-25 19:08:54,390 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:08:54,390 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:08:54,390 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:08:54,394 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:08:54,394 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:08:54,394 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:08:54,395 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:08:54,396 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:08:54,396 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:08:54,399 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:08:54,399 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:08:54,399 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:09:54 KST)" executed successfully
2025-07-25 19:09:54,117 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:09:54,118 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:09:54.387899+09:00 (in 0.269555 seconds)
2025-07-25 19:09:54,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:09:54,389 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:10:54.387899+09:00 (in 59.998821 seconds)
2025-07-25 19:09:54,389 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:10:54 KST)" (scheduled at 2025-07-26 04:09:54.387899+09:00)
2025-07-25 19:09:54,389 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:09:54.389850
2025-07-25 19:09:54,390 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:09:54,390 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:09:54,390 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:09:54,392 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:09:54,392 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:09:54,392 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:09:54,392 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:09:54,394 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:09:54,394 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:09:54,396 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:09:54,396 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:09:54,397 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:10:54 KST)" executed successfully
2025-07-25 19:10:54,153 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:10:54,153 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:10:54.387899+09:00 (in 0.234025 seconds)
2025-07-25 19:10:54,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:10:54,389 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:11:54.387899+09:00 (in 59.998878 seconds)
2025-07-25 19:10:54,389 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:11:54 KST)" (scheduled at 2025-07-26 04:10:54.387899+09:00)
2025-07-25 19:10:54,390 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:10:54.390625
2025-07-25 19:10:54,390 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:10:54,390 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:10:54,391 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:10:54,392 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:10:54,393 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:10:54,393 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:10:54,393 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:10:54,395 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:10:54,395 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:10:54,397 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:10:54,398 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:10:54,398 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:11:54 KST)" executed successfully
2025-07-25 19:11:54,140 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:11:54,140 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:11:54.387899+09:00 (in 0.247383 seconds)
2025-07-25 19:11:54,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:11:54,388 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:12:54.387899+09:00 (in 59.999099 seconds)
2025-07-25 19:11:54,388 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:12:54 KST)" (scheduled at 2025-07-26 04:11:54.387899+09:00)
2025-07-25 19:11:54,389 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:11:54.389549
2025-07-25 19:11:54,389 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:11:54,389 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:11:54,390 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:11:54,391 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:11:54,392 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:11:54,392 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:11:54,392 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:11:54,394 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:11:54,394 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:11:54,397 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:11:54,397 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:11:54,397 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:12:54 KST)" executed successfully
2025-07-25 19:12:54,145 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:12:54,146 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:12:54.387899+09:00 (in 0.241762 seconds)
2025-07-25 19:12:54,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:12:54,388 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:13:54.387899+09:00 (in 59.998952 seconds)
2025-07-25 19:12:54,389 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:13:54 KST)" (scheduled at 2025-07-26 04:12:54.387899+09:00)
2025-07-25 19:12:54,389 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:12:54.389677
2025-07-25 19:12:54,389 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:12:54,390 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:12:54,390 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:12:54,391 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:12:54,391 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:12:54,392 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:12:54,392 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:12:54,394 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:12:54,394 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:12:54,396 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:12:54,396 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:12:54,397 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:13:54 KST)" executed successfully
2025-07-25 19:13:54,137 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:13:54,138 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:13:54.387899+09:00 (in 0.249715 seconds)
2025-07-25 19:13:54,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:13:54,389 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:14:54.387899+09:00 (in 59.998513 seconds)
2025-07-25 19:13:54,389 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:14:54 KST)" (scheduled at 2025-07-26 04:13:54.387899+09:00)
2025-07-25 19:13:54,390 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:13:54.390149
2025-07-25 19:13:54,390 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:13:54,390 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:13:54,390 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:13:54,392 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:13:54,392 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:13:54,392 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:13:54,393 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:13:54,394 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:13:54,394 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:13:54,397 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:13:54,397 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:13:54,397 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:14:54 KST)" executed successfully
2025-07-25 19:13:58,368 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 19:13:58,368 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:13:58,369 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 19:13:58,369 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 19:14:26,964 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:14:26,971 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 19:14:26,975 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:14:26,976 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:14:26,977 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:14:26,977 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 19:14:27,015 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 19:14:27,016 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 19:14:27,016 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 19:14:27,016 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 19:14:27,016 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 19:14:27,016 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:14:27,017 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 19:14:27,017 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:15:26.977588+09:00 (in 59.960179 seconds)
2025-07-25 19:14:27,017 - main - INFO - 등록된 잡 목록:
2025-07-25 19:14:27,018 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 19:14:27,018 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 19:14:27,018 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 19:14:27,018 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 19:15:26,708 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:15:26,709 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:15:26.977588+09:00 (in 0.268324 seconds)
2025-07-25 19:15:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:15:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:16:26 KST)" (scheduled at 2025-07-26 04:15:26.977588+09:00)
2025-07-25 19:15:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:16:26.977588+09:00 (in 59.998071 seconds)
2025-07-25 19:15:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:15:26.979828
2025-07-25 19:15:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:15:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:15:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:15:26,992 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:15:26,992 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:15:26,992 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:15:26,993 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:15:26,995 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:15:26,995 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:15:26,997 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:15:26,997 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:15:26,997 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:16:26 KST)" executed successfully
2025-07-25 19:16:26,740 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:16:26,740 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:16:26.977588+09:00 (in 0.236669 seconds)
2025-07-25 19:16:26,980 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:16:26,980 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:17:26.977588+09:00 (in 59.996755 seconds)
2025-07-25 19:16:26,981 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:17:26 KST)" (scheduled at 2025-07-26 04:16:26.977588+09:00)
2025-07-25 19:16:26,981 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:16:26.981704
2025-07-25 19:16:26,981 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:16:26,982 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:16:26,982 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:16:26,983 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:16:26,984 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:16:26,984 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:16:26,984 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:16:26,986 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:16:26,986 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:16:26,988 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:16:26,988 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:16:26,989 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:17:26 KST)" executed successfully
2025-07-25 19:17:26,714 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:17:26,714 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:17:26.977588+09:00 (in 0.263206 seconds)
2025-07-25 19:17:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:17:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:18:26.977588+09:00 (in 59.998843 seconds)
2025-07-25 19:17:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:18:26 KST)" (scheduled at 2025-07-26 04:17:26.977588+09:00)
2025-07-25 19:17:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:17:26.979472
2025-07-25 19:17:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:17:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:17:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:17:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:17:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:17:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:17:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:17:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:17:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:17:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:17:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:17:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:18:26 KST)" executed successfully
2025-07-25 19:18:26,729 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:18:26,729 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:18:26.977588+09:00 (in 0.247903 seconds)
2025-07-25 19:18:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:18:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:19:26.977588+09:00 (in 59.998506 seconds)
2025-07-25 19:18:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:19:26 KST)" (scheduled at 2025-07-26 04:18:26.977588+09:00)
2025-07-25 19:18:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:18:26.979817
2025-07-25 19:18:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:18:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:18:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:18:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:18:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:18:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:18:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:18:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:18:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:18:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:18:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:18:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:19:26 KST)" executed successfully
2025-07-25 19:19:26,729 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:19:26,729 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:19:26.977588+09:00 (in 0.247748 seconds)
2025-07-25 19:19:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:19:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:20:26.977588+09:00 (in 59.998419 seconds)
2025-07-25 19:19:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:20:26 KST)" (scheduled at 2025-07-26 04:19:26.977588+09:00)
2025-07-25 19:19:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:19:26.979891
2025-07-25 19:19:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:19:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:19:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:19:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:19:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:19:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:19:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:19:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:19:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:19:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:19:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:19:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:20:26 KST)" executed successfully
2025-07-25 19:20:26,703 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:20:26,704 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:20:26.977588+09:00 (in 0.273402 seconds)
2025-07-25 19:20:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:20:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:21:26.977588+09:00 (in 59.998919 seconds)
2025-07-25 19:20:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:21:26 KST)" (scheduled at 2025-07-26 04:20:26.977588+09:00)
2025-07-25 19:20:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:20:26.979410
2025-07-25 19:20:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:20:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:20:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:20:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:20:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:20:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:20:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:20:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:20:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:20:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:20:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:20:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:21:26 KST)" executed successfully
2025-07-25 19:21:26,724 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:21:26,725 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:21:26.977588+09:00 (in 0.252444 seconds)
2025-07-25 19:21:26,981 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:21:26,982 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:22:26.977588+09:00 (in 59.995455 seconds)
2025-07-25 19:21:26,982 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:22:26 KST)" (scheduled at 2025-07-26 04:21:26.977588+09:00)
2025-07-25 19:21:26,982 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:21:26.982822
2025-07-25 19:21:26,983 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:21:26,983 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:21:26,983 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:21:26,984 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:21:26,985 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:21:26,985 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:21:26,985 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:21:26,987 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:21:26,987 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:21:26,989 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:21:26,989 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:21:26,989 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:22:26 KST)" executed successfully
2025-07-25 19:22:26,724 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:22:26,724 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:22:26.977588+09:00 (in 0.252889 seconds)
2025-07-25 19:22:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:22:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:23:26.977588+09:00 (in 59.998513 seconds)
2025-07-25 19:22:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:23:26 KST)" (scheduled at 2025-07-26 04:22:26.977588+09:00)
2025-07-25 19:22:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:22:26.979813
2025-07-25 19:22:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:22:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:22:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:22:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:22:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:22:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:22:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:22:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:22:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:22:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:22:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:22:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:23:26 KST)" executed successfully
2025-07-25 19:23:26,710 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:23:26,710 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:23:26.977588+09:00 (in 0.266865 seconds)
2025-07-25 19:23:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:23:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:24:26.977588+09:00 (in 59.998501 seconds)
2025-07-25 19:23:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:24:26 KST)" (scheduled at 2025-07-26 04:23:26.977588+09:00)
2025-07-25 19:23:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:23:26.979743
2025-07-25 19:23:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:23:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:23:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:23:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:23:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:23:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:23:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:23:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:23:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:23:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:23:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:23:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:24:26 KST)" executed successfully
2025-07-25 19:24:26,727 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:24:26,727 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:24:26.977588+09:00 (in 0.250045 seconds)
2025-07-25 19:24:26,979 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:24:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:25:26.977588+09:00 (in 59.997839 seconds)
2025-07-25 19:24:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:25:26 KST)" (scheduled at 2025-07-26 04:24:26.977588+09:00)
2025-07-25 19:24:26,980 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:24:26.980665
2025-07-25 19:24:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:24:26,981 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:24:26,981 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:24:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:24:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:24:26,983 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:24:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:24:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:24:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:24:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:24:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:24:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:25:26 KST)" executed successfully
2025-07-25 19:25:26,732 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:25:26,733 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:25:26.977588+09:00 (in 0.244539 seconds)
2025-07-25 19:25:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:25:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:26:26.977588+09:00 (in 59.998889 seconds)
2025-07-25 19:25:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:26:26 KST)" (scheduled at 2025-07-26 04:25:26.977588+09:00)
2025-07-25 19:25:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:25:26.979343
2025-07-25 19:25:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:25:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:25:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:25:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:25:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:25:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:25:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:25:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:25:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:25:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:25:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:25:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:26:26 KST)" executed successfully
2025-07-25 19:26:26,687 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:26:26,688 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:26:26.977588+09:00 (in 0.289506 seconds)
2025-07-25 19:26:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:26:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:27:26.977588+09:00 (in 59.998784 seconds)
2025-07-25 19:26:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:27:26 KST)" (scheduled at 2025-07-26 04:26:26.977588+09:00)
2025-07-25 19:26:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:26:26.979562
2025-07-25 19:26:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:26:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:26:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:26:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:26:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:26:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:26:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:26:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:26:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:26:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:26:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:26:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:27:26 KST)" executed successfully
2025-07-25 19:27:26,727 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:27:26,727 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:27:26.977588+09:00 (in 0.249761 seconds)
2025-07-25 19:27:26,977 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:27:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:28:26.977588+09:00 (in 59.998980 seconds)
2025-07-25 19:27:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:28:26 KST)" (scheduled at 2025-07-26 04:27:26.977588+09:00)
2025-07-25 19:27:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:27:26.979381
2025-07-25 19:27:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:27:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:27:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:27:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:27:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:27:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:27:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:27:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:27:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:27:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:27:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:27:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:28:26 KST)" executed successfully
2025-07-25 19:28:26,716 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:28:26,717 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:28:26.977588+09:00 (in 0.260533 seconds)
2025-07-25 19:28:26,979 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:28:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:29:26.977588+09:00 (in 59.997791 seconds)
2025-07-25 19:28:26,980 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:29:26 KST)" (scheduled at 2025-07-26 04:28:26.977588+09:00)
2025-07-25 19:28:26,980 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:28:26.980582
2025-07-25 19:28:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:28:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:28:26,981 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:28:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:28:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:28:26,983 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:28:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:28:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:28:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:28:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:28:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:28:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:29:26 KST)" executed successfully
2025-07-25 19:29:26,698 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:29:26,698 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:29:26.977588+09:00 (in 0.279164 seconds)
2025-07-25 19:29:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:29:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:30:26.977588+09:00 (in 59.998100 seconds)
2025-07-25 19:29:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:30:26 KST)" (scheduled at 2025-07-26 04:29:26.977588+09:00)
2025-07-25 19:29:26,980 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:29:26.980340
2025-07-25 19:29:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:29:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:29:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:29:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:29:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:29:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:29:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:29:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:29:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:29:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:29:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:29:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:30:26 KST)" executed successfully
2025-07-25 19:30:26,716 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:30:26,716 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:30:26.977588+09:00 (in 0.260904 seconds)
2025-07-25 19:30:26,982 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:30:26,982 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:31:26.977588+09:00 (in 59.994957 seconds)
2025-07-25 19:30:26,982 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:31:26 KST)" (scheduled at 2025-07-26 04:30:26.977588+09:00)
2025-07-25 19:30:26,983 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:30:26.983320
2025-07-25 19:30:26,983 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:30:26,983 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:30:26,983 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:30:26,985 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:30:26,985 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:30:26,985 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:30:26,985 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:30:26,987 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:30:26,987 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:30:26,989 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:30:26,989 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:30:26,989 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:31:26 KST)" executed successfully
2025-07-25 19:31:26,695 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:31:26,695 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:31:26.977588+09:00 (in 0.281907 seconds)
2025-07-25 19:31:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:31:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:32:26.977588+09:00 (in 59.998683 seconds)
2025-07-25 19:31:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:32:26 KST)" (scheduled at 2025-07-26 04:31:26.977588+09:00)
2025-07-25 19:31:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:31:26.979554
2025-07-25 19:31:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:31:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:31:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:31:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:31:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:31:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:31:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:31:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:31:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:31:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:31:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:31:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:32:26 KST)" executed successfully
2025-07-25 19:32:26,710 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:32:26,710 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:32:26.977588+09:00 (in 0.267107 seconds)
2025-07-25 19:32:26,979 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:32:26,980 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:33:26.977588+09:00 (in 59.997167 seconds)
2025-07-25 19:32:26,980 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:33:26 KST)" (scheduled at 2025-07-26 04:32:26.977588+09:00)
2025-07-25 19:32:26,981 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:32:26.981097
2025-07-25 19:32:26,981 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:32:26,981 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:32:26,981 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:32:26,983 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:32:26,983 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:32:26,983 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:32:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:32:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:32:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:32:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:32:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:32:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:33:26 KST)" executed successfully
2025-07-25 19:33:26,713 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:33:26,714 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:33:26.977588+09:00 (in 0.263441 seconds)
2025-07-25 19:33:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:33:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:34:26.977588+09:00 (in 59.998632 seconds)
2025-07-25 19:33:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:34:26 KST)" (scheduled at 2025-07-26 04:33:26.977588+09:00)
2025-07-25 19:33:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:33:26.979568
2025-07-25 19:33:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:33:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:33:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:33:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:33:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:33:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:33:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:33:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:33:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:33:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:33:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:33:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:34:26 KST)" executed successfully
2025-07-25 19:34:26,715 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:34:26,715 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:34:26.977588+09:00 (in 0.261762 seconds)
2025-07-25 19:34:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:34:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:35:26.977588+09:00 (in 59.998732 seconds)
2025-07-25 19:34:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:35:26 KST)" (scheduled at 2025-07-26 04:34:26.977588+09:00)
2025-07-25 19:34:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:34:26.979631
2025-07-25 19:34:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:34:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:34:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:34:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:34:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:34:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:34:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:34:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:34:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:34:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:34:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:34:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:35:26 KST)" executed successfully
2025-07-25 19:35:26,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:35:26,667 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:35:26.977588+09:00 (in 0.309937 seconds)
2025-07-25 19:35:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:35:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:36:26.977588+09:00 (in 59.998837 seconds)
2025-07-25 19:35:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:36:26 KST)" (scheduled at 2025-07-26 04:35:26.977588+09:00)
2025-07-25 19:35:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:35:26.979653
2025-07-25 19:35:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:35:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:35:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:35:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:35:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:35:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:35:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:35:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:35:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:35:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:35:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:35:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:36:26 KST)" executed successfully
2025-07-25 19:36:26,712 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:36:26,712 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:36:26.977588+09:00 (in 0.265039 seconds)
2025-07-25 19:36:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:36:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:37:26.977588+09:00 (in 59.998607 seconds)
2025-07-25 19:36:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:37:26 KST)" (scheduled at 2025-07-26 04:36:26.977588+09:00)
2025-07-25 19:36:26,980 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:36:26.980674
2025-07-25 19:36:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:36:26,981 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:36:26,981 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:36:26,983 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:36:26,984 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:36:26,984 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:36:26,984 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:36:26,986 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:36:26,986 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:36:26,988 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:36:26,988 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:36:26,988 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:37:26 KST)" executed successfully
2025-07-25 19:37:26,693 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:37:26,694 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:37:26.977588+09:00 (in 0.283236 seconds)
2025-07-25 19:37:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:37:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:38:26.977588+09:00 (in 59.998719 seconds)
2025-07-25 19:37:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:38:26 KST)" (scheduled at 2025-07-26 04:37:26.977588+09:00)
2025-07-25 19:37:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:37:26.979801
2025-07-25 19:37:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:37:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:37:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:37:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:37:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:37:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:37:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:37:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:37:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:37:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:37:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:37:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:38:26 KST)" executed successfully
2025-07-25 19:38:26,711 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:38:26,711 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:38:26.977588+09:00 (in 0.265813 seconds)
2025-07-25 19:38:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:38:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:39:26.977588+09:00 (in 59.999096 seconds)
2025-07-25 19:38:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:39:26 KST)" (scheduled at 2025-07-26 04:38:26.977588+09:00)
2025-07-25 19:38:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:38:26.979095
2025-07-25 19:38:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:38:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:38:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:38:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:38:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:38:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:38:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:38:26,982 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:38:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:38:26,984 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:38:26,984 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:38:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:39:26 KST)" executed successfully
2025-07-25 19:39:26,706 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:39:26,707 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:39:26.977588+09:00 (in 0.270411 seconds)
2025-07-25 19:39:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:39:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:40:26.977588+09:00 (in 59.998500 seconds)
2025-07-25 19:39:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:40:26 KST)" (scheduled at 2025-07-26 04:39:26.977588+09:00)
2025-07-25 19:39:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:39:26.979791
2025-07-25 19:39:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:39:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:39:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:39:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:39:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:39:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:39:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:39:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:39:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:39:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:39:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:39:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:40:26 KST)" executed successfully
2025-07-25 19:40:26,670 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:40:26,670 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:40:26.977588+09:00 (in 0.306986 seconds)
2025-07-25 19:40:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:40:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:41:26.977588+09:00 (in 59.998866 seconds)
2025-07-25 19:40:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:41:26 KST)" (scheduled at 2025-07-26 04:40:26.977588+09:00)
2025-07-25 19:40:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:40:26.979487
2025-07-25 19:40:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:40:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:40:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:40:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:40:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:40:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:40:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:40:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:40:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:40:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:40:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:40:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:41:26 KST)" executed successfully
2025-07-25 19:41:26,707 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:41:26,707 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:41:26.977588+09:00 (in 0.269977 seconds)
2025-07-25 19:41:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:41:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:42:26.977588+09:00 (in 59.998823 seconds)
2025-07-25 19:41:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:42:26 KST)" (scheduled at 2025-07-26 04:41:26.977588+09:00)
2025-07-25 19:41:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:41:26.979376
2025-07-25 19:41:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:41:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:41:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:41:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:41:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:41:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:41:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:41:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:41:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:41:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:41:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:41:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:42:26 KST)" executed successfully
2025-07-25 19:42:26,701 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:42:26,701 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:42:26.977588+09:00 (in 0.275794 seconds)
2025-07-25 19:42:26,840 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:42:26,840 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:42:26.977588+09:00 (in 0.136746 seconds)
2025-07-25 19:42:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:42:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:43:26.977588+09:00 (in 59.998903 seconds)
2025-07-25 19:42:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:43:26 KST)" (scheduled at 2025-07-26 04:42:26.977588+09:00)
2025-07-25 19:42:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:42:26.979725
2025-07-25 19:42:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:42:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:42:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:42:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:42:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:42:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:42:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:42:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:42:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:42:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:42:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:42:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:43:26 KST)" executed successfully
2025-07-25 19:43:26,691 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:43:26,691 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:43:26.977588+09:00 (in 0.285883 seconds)
2025-07-25 19:43:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:43:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:44:26.977588+09:00 (in 59.998644 seconds)
2025-07-25 19:43:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:44:26 KST)" (scheduled at 2025-07-26 04:43:26.977588+09:00)
2025-07-25 19:43:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:43:26.979646
2025-07-25 19:43:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:43:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:43:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:43:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:43:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:43:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:43:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:43:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:43:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:43:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:43:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:43:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:44:26 KST)" executed successfully
2025-07-25 19:44:26,703 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:44:26,704 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:44:26.977588+09:00 (in 0.273230 seconds)
2025-07-25 19:44:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:44:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:45:26.977588+09:00 (in 59.998764 seconds)
2025-07-25 19:44:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:45:26 KST)" (scheduled at 2025-07-26 04:44:26.977588+09:00)
2025-07-25 19:44:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:44:26.979517
2025-07-25 19:44:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:44:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:44:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:44:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:44:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:44:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:44:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:44:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:44:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:44:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:44:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:44:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:45:26 KST)" executed successfully
2025-07-25 19:45:26,678 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:45:26,678 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:45:26.977588+09:00 (in 0.298665 seconds)
2025-07-25 19:45:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:45:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:46:26.977588+09:00 (in 59.998561 seconds)
2025-07-25 19:45:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:46:26 KST)" (scheduled at 2025-07-26 04:45:26.977588+09:00)
2025-07-25 19:45:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:45:26.979947
2025-07-25 19:45:26,980 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:45:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:45:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:45:26,983 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:45:26,983 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:45:26,983 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:45:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:45:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:45:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:45:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:45:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:45:26,988 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:46:26 KST)" executed successfully
2025-07-25 19:46:26,696 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:46:26,697 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:46:26.977588+09:00 (in 0.280576 seconds)
2025-07-25 19:46:26,977 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:46:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:47:26.977588+09:00 (in 59.999101 seconds)
2025-07-25 19:46:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:47:26 KST)" (scheduled at 2025-07-26 04:46:26.977588+09:00)
2025-07-25 19:46:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:46:26.979228
2025-07-25 19:46:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:46:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:46:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:46:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:46:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:46:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:46:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:46:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:46:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:46:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:46:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:46:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:47:26 KST)" executed successfully
2025-07-25 19:47:26,699 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:47:26,699 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:47:26.977588+09:00 (in 0.278003 seconds)
2025-07-25 19:47:26,977 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:47:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:48:26.977588+09:00 (in 59.999183 seconds)
2025-07-25 19:47:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:48:26 KST)" (scheduled at 2025-07-26 04:47:26.977588+09:00)
2025-07-25 19:47:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:47:26.979207
2025-07-25 19:47:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:47:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:47:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:47:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:47:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:47:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:47:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:47:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:47:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:47:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:47:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:47:26,987 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:48:26 KST)" executed successfully
2025-07-25 19:48:26,703 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:48:26,703 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:48:26.977588+09:00 (in 0.274120 seconds)
2025-07-25 19:48:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:48:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:49:26.977588+09:00 (in 59.998931 seconds)
2025-07-25 19:48:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:49:26 KST)" (scheduled at 2025-07-26 04:48:26.977588+09:00)
2025-07-25 19:48:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:48:26.979321
2025-07-25 19:48:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:48:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:48:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:48:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:48:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:48:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:48:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:48:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:48:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:48:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:48:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:48:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:49:26 KST)" executed successfully
2025-07-25 19:49:26,658 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:49:26,659 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:49:26.977588+09:00 (in 0.318566 seconds)
2025-07-25 19:49:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:49:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:50:26.977588+09:00 (in 59.999032 seconds)
2025-07-25 19:49:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:50:26 KST)" (scheduled at 2025-07-26 04:49:26.977588+09:00)
2025-07-25 19:49:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:49:26.979157
2025-07-25 19:49:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:49:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:49:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:49:26,980 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:49:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:49:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:49:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:49:26,982 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:49:26,982 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:49:26,984 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:49:26,984 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:49:26,984 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:50:26 KST)" executed successfully
2025-07-25 19:50:26,697 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:50:26,698 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:50:26.977588+09:00 (in 0.279567 seconds)
2025-07-25 19:50:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:50:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:51:26.977588+09:00 (in 59.999059 seconds)
2025-07-25 19:50:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:51:26 KST)" (scheduled at 2025-07-26 04:50:26.977588+09:00)
2025-07-25 19:50:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:50:26.979171
2025-07-25 19:50:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:50:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:50:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:50:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:50:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:50:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:50:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:50:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:50:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:50:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:50:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:50:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:51:26 KST)" executed successfully
2025-07-25 19:51:26,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:51:26,667 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:51:26.977588+09:00 (in 0.309796 seconds)
2025-07-25 19:51:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:51:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:52:26.977588+09:00 (in 59.998889 seconds)
2025-07-25 19:51:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:52:26 KST)" (scheduled at 2025-07-26 04:51:26.977588+09:00)
2025-07-25 19:51:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:51:26.979562
2025-07-25 19:51:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:51:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:51:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:51:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:51:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:51:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:51:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:51:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:51:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:51:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:51:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:51:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:52:26 KST)" executed successfully
2025-07-25 19:52:26,692 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:52:26,692 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:52:26.977588+09:00 (in 0.284755 seconds)
2025-07-25 19:52:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:52:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:53:26.977588+09:00 (in 59.998980 seconds)
2025-07-25 19:52:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:53:26 KST)" (scheduled at 2025-07-26 04:52:26.977588+09:00)
2025-07-25 19:52:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:52:26.979294
2025-07-25 19:52:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:52:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:52:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:52:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:52:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:52:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:52:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:52:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:52:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:52:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:52:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:52:26,985 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:53:26 KST)" executed successfully
2025-07-25 19:53:26,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:53:26,694 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:53:26.977588+09:00 (in 0.282669 seconds)
2025-07-25 19:53:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:53:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:54:26.977588+09:00 (in 59.998933 seconds)
2025-07-25 19:53:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:54:26 KST)" (scheduled at 2025-07-26 04:53:26.977588+09:00)
2025-07-25 19:53:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:53:26.979455
2025-07-25 19:53:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:53:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:53:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:53:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:53:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:53:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:53:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:53:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:53:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:53:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:53:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:53:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:54:26 KST)" executed successfully
2025-07-25 19:54:26,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:54:26,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:54:26.977588+09:00 (in 0.321815 seconds)
2025-07-25 19:54:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:54:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:55:26.977588+09:00 (in 59.999009 seconds)
2025-07-25 19:54:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:55:26 KST)" (scheduled at 2025-07-26 04:54:26.977588+09:00)
2025-07-25 19:54:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:54:26.979340
2025-07-25 19:54:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:54:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:54:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:54:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:54:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:54:26,983 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:54:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:54:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:54:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:54:26,988 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:54:26,989 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:54:26,989 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:55:26 KST)" executed successfully
2025-07-25 19:55:26,690 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:55:26,690 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:55:26.977588+09:00 (in 0.286722 seconds)
2025-07-25 19:55:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:55:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:56:26.977588+09:00 (in 59.998801 seconds)
2025-07-25 19:55:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:56:26 KST)" (scheduled at 2025-07-26 04:55:26.977588+09:00)
2025-07-25 19:55:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:55:26.979550
2025-07-25 19:55:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:55:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:55:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:55:26,984 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:55:26,985 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:55:26,985 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:55:26,985 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:55:26,987 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:55:26,987 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:55:26,990 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:55:26,990 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:55:26,990 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:56:26 KST)" executed successfully
2025-07-25 19:56:26,679 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:56:26,680 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:56:26.977588+09:00 (in 0.296933 seconds)
2025-07-25 19:56:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:56:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:57:26.977588+09:00 (in 59.998622 seconds)
2025-07-25 19:56:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:57:26 KST)" (scheduled at 2025-07-26 04:56:26.977588+09:00)
2025-07-25 19:56:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:56:26.979574
2025-07-25 19:56:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:56:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:56:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:56:26,983 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:56:26,983 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:56:26,984 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:56:26,984 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:56:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:56:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:56:26,987 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:56:26,987 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:56:26,988 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:57:26 KST)" executed successfully
2025-07-25 19:57:26,682 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:57:26,682 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:57:26.977588+09:00 (in 0.294842 seconds)
2025-07-25 19:57:26,977 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:57:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:58:26.977588+09:00 (in 59.998995 seconds)
2025-07-25 19:57:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:58:26 KST)" (scheduled at 2025-07-26 04:57:26.977588+09:00)
2025-07-25 19:57:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:57:26.979341
2025-07-25 19:57:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:57:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:57:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:57:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:57:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:57:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:57:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:57:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:57:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:57:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:57:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:57:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:58:26 KST)" executed successfully
2025-07-25 19:58:26,671 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:58:26,671 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:58:26.977588+09:00 (in 0.305691 seconds)
2025-07-25 19:58:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:58:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:59:26.977588+09:00 (in 59.998930 seconds)
2025-07-25 19:58:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:59:26 KST)" (scheduled at 2025-07-26 04:58:26.977588+09:00)
2025-07-25 19:58:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:58:26.979296
2025-07-25 19:58:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:58:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:58:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:58:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:58:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:58:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:58:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:58:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:58:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:58:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:58:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:58:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 04:59:26 KST)" executed successfully
2025-07-25 19:59:26,688 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:59:26,689 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 04:59:26.977588+09:00 (in 0.288304 seconds)
2025-07-25 19:59:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 19:59:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:00:26.977588+09:00 (in 59.998869 seconds)
2025-07-25 19:59:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:00:26 KST)" (scheduled at 2025-07-26 04:59:26.977588+09:00)
2025-07-25 19:59:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 19:59:26.979465
2025-07-25 19:59:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 19:59:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 19:59:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 19:59:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 19:59:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 19:59:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 19:59:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:59:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 19:59:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 19:59:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 19:59:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 19:59:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:00:26 KST)" executed successfully
2025-07-25 20:00:26,670 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:00:26,670 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:00:26.977588+09:00 (in 0.306769 seconds)
2025-07-25 20:00:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:00:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:01:26.977588+09:00 (in 59.998856 seconds)
2025-07-25 20:00:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:01:26 KST)" (scheduled at 2025-07-26 05:00:26.977588+09:00)
2025-07-25 20:00:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:00:26.979339
2025-07-25 20:00:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:00:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:00:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:00:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:00:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:00:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:00:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:00:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:00:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:00:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:00:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:00:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:01:26 KST)" executed successfully
2025-07-25 20:01:26,692 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:01:26,692 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:01:26.977588+09:00 (in 0.284858 seconds)
2025-07-25 20:01:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:01:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:02:26.977588+09:00 (in 59.998979 seconds)
2025-07-25 20:01:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:02:26 KST)" (scheduled at 2025-07-26 05:01:26.977588+09:00)
2025-07-25 20:01:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:01:26.979238
2025-07-25 20:01:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:01:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:01:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:01:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:01:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:01:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:01:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:01:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:01:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:01:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:01:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:01:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:02:26 KST)" executed successfully
2025-07-25 20:02:26,690 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:02:26,691 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:02:26.977588+09:00 (in 0.286453 seconds)
2025-07-25 20:02:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:02:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:03:26.977588+09:00 (in 59.998936 seconds)
2025-07-25 20:02:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:03:26 KST)" (scheduled at 2025-07-26 05:02:26.977588+09:00)
2025-07-25 20:02:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:02:26.979530
2025-07-25 20:02:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:02:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:02:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:02:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:02:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:02:26,983 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:02:26,983 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:02:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:02:26,986 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:02:26,989 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:02:26,990 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:02:26,990 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:03:26 KST)" executed successfully
2025-07-25 20:03:26,680 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:03:26,681 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:03:26.977588+09:00 (in 0.296014 seconds)
2025-07-25 20:03:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:03:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:04:26.977588+09:00 (in 59.997804 seconds)
2025-07-25 20:03:26,980 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:04:26 KST)" (scheduled at 2025-07-26 05:03:26.977588+09:00)
2025-07-25 20:03:26,980 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:03:26.980869
2025-07-25 20:03:26,982 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:03:26,982 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:03:26,983 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:03:26,989 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:03:26,989 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:03:26,990 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:03:26,990 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:03:26,992 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:03:26,992 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:03:26,995 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:03:26,995 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:03:26,995 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:04:26 KST)" executed successfully
2025-07-25 20:04:26,669 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:04:26,669 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:04:26.977588+09:00 (in 0.307759 seconds)
2025-07-25 20:04:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:04:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:05:26.977588+09:00 (in 59.999033 seconds)
2025-07-25 20:04:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:05:26 KST)" (scheduled at 2025-07-26 05:04:26.977588+09:00)
2025-07-25 20:04:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:04:26.979231
2025-07-25 20:04:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:04:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:04:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:04:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:04:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:04:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:04:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:04:26,984 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:04:26,984 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:04:26,986 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:04:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:04:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:05:26 KST)" executed successfully
2025-07-25 20:05:26,686 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:05:26,687 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:05:26.977588+09:00 (in 0.290295 seconds)
2025-07-25 20:05:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:05:26,979 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:06:26.977588+09:00 (in 59.998598 seconds)
2025-07-25 20:05:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:06:26 KST)" (scheduled at 2025-07-26 05:05:26.977588+09:00)
2025-07-25 20:05:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:05:26.979602
2025-07-25 20:05:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:05:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:05:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:05:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:05:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:05:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:05:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:05:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:05:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:05:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:05:26,986 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:05:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:06:26 KST)" executed successfully
2025-07-25 20:06:26,686 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:06:26,687 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:06:26.977588+09:00 (in 0.290576 seconds)
2025-07-25 20:06:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:06:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:07:26.977588+09:00 (in 59.998933 seconds)
2025-07-25 20:06:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:07:26 KST)" (scheduled at 2025-07-26 05:06:26.977588+09:00)
2025-07-25 20:06:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:06:26.979410
2025-07-25 20:06:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:06:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:06:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:06:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:06:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:06:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:06:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:06:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:06:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:06:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:06:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:06:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:07:26 KST)" executed successfully
2025-07-25 20:07:26,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:07:26,668 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:07:26.977588+09:00 (in 0.309274 seconds)
2025-07-25 20:07:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:07:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:08:26.977588+09:00 (in 59.999032 seconds)
2025-07-25 20:07:26,978 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:08:26 KST)" (scheduled at 2025-07-26 05:07:26.977588+09:00)
2025-07-25 20:07:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:07:26.979230
2025-07-25 20:07:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:07:26,979 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:07:26,979 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:07:26,981 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:07:26,981 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:07:26,981 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:07:26,981 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:07:26,983 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:07:26,983 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:07:26,985 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:07:26,985 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:07:26,986 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:08:26 KST)" executed successfully
2025-07-25 20:08:26,690 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:08:26,690 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:08:26.977588+09:00 (in 0.286778 seconds)
2025-07-25 20:08:26,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:08:26,978 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:09:26.977588+09:00 (in 59.998829 seconds)
2025-07-25 20:08:26,979 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:09:26 KST)" (scheduled at 2025-07-26 05:08:26.977588+09:00)
2025-07-25 20:08:26,979 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:08:26.979659
2025-07-25 20:08:26,979 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:08:26,980 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:08:26,980 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:08:26,982 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:08:26,982 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:08:26,982 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:08:26,982 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:08:26,985 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:08:26,985 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:08:26,988 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:08:26,988 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:08:26,989 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:09:26 KST)" executed successfully
2025-07-25 20:08:42,207 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:08:42,207 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:08:42,208 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:08:42,208 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:08:56,369 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:08:56,375 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:08:56,379 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:08:56,380 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:08:56,381 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:08:56,381 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:08:56,412 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:08:56,413 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:08:56,413 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:08:56,413 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:08:56,413 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:08:56,414 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:08:56,414 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:08:56,414 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:09:56.381498+09:00 (in 59.966734 seconds)
2025-07-25 20:08:56,415 - main - INFO - 등록된 잡 목록:
2025-07-25 20:08:56,415 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:08:56,415 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:08:56,415 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:08:56,415 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:09:56,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:09:56,065 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:09:56.381498+09:00 (in 0.315928 seconds)
2025-07-25 20:09:56,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:09:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:10:56 KST)" (scheduled at 2025-07-26 05:09:56.381498+09:00)
2025-07-25 20:09:56,383 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:10:56.381498+09:00 (in 59.998383 seconds)
2025-07-25 20:09:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:09:56.383512
2025-07-25 20:09:56,384 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:09:56,384 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:09:56,384 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:09:56,404 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:09:56,404 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:09:56,404 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:09:56,404 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:09:56,406 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:09:56,406 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:09:56,409 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:09:56,409 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:09:56,409 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:10:56 KST)" executed successfully
2025-07-25 20:10:56,083 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:10:56,083 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:10:56.381498+09:00 (in 0.297642 seconds)
2025-07-25 20:10:56,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:10:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:11:56.381498+09:00 (in 59.998971 seconds)
2025-07-25 20:10:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:11:56 KST)" (scheduled at 2025-07-26 05:10:56.381498+09:00)
2025-07-25 20:10:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:10:56.383277
2025-07-25 20:10:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:10:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:10:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:10:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:10:56,385 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:10:56,385 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:10:56,385 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:10:56,387 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:10:56,387 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:10:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:10:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:10:56,390 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:11:56 KST)" executed successfully
2025-07-25 20:11:56,086 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:11:56,087 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:11:56.381498+09:00 (in 0.294302 seconds)
2025-07-25 20:11:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:11:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:12:56.381498+09:00 (in 59.998844 seconds)
2025-07-25 20:11:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:12:56 KST)" (scheduled at 2025-07-26 05:11:56.381498+09:00)
2025-07-25 20:11:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:11:56.383252
2025-07-25 20:11:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:11:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:11:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:11:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:11:56,385 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:11:56,385 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:11:56,385 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:11:56,387 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:11:56,387 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:11:56,389 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:11:56,389 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:11:56,389 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:12:56 KST)" executed successfully
2025-07-25 20:12:56,045 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:12:56,046 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:12:56.381498+09:00 (in 0.335333 seconds)
2025-07-25 20:12:56,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:12:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:13:56.381498+09:00 (in 59.999030 seconds)
2025-07-25 20:12:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:13:56 KST)" (scheduled at 2025-07-26 05:12:56.381498+09:00)
2025-07-25 20:12:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:12:56.383356
2025-07-25 20:12:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:12:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:12:56,384 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:12:56,386 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:12:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:12:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:12:56,387 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:12:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:12:56,389 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:12:56,391 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:12:56,391 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:12:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:13:56 KST)" executed successfully
2025-07-25 20:13:56,081 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:13:56,082 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:13:56.381498+09:00 (in 0.299435 seconds)
2025-07-25 20:13:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:13:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:14:56.381498+09:00 (in 59.998854 seconds)
2025-07-25 20:13:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:14:56 KST)" (scheduled at 2025-07-26 05:13:56.381498+09:00)
2025-07-25 20:13:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:13:56.383522
2025-07-25 20:13:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:13:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:13:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:13:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:13:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:13:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:13:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:13:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:13:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:13:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:13:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:13:56,390 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:14:56 KST)" executed successfully
2025-07-25 20:14:55,676 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:14:55,690 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:14:56,067 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:14:56,068 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:14:56.381498+09:00 (in 0.313090 seconds)
2025-07-25 20:14:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:14:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:15:56.381498+09:00 (in 59.998952 seconds)
2025-07-25 20:14:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:15:56 KST)" (scheduled at 2025-07-26 05:14:56.381498+09:00)
2025-07-25 20:14:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:14:56.383117
2025-07-25 20:14:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:14:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:14:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:14:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:14:56,385 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:14:56,385 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:14:56,385 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:14:56,387 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:14:56,387 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:14:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:14:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:14:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:15:56 KST)" executed successfully
2025-07-25 20:14:59,186 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:14:59,194 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:15:09,864 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:15:09,880 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:15:55,273 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:15:55,273 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:15:56.381498+09:00 (in 1.107818 seconds)
2025-07-25 20:15:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:15:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:16:56.381498+09:00 (in 59.998679 seconds)
2025-07-25 20:15:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:16:56 KST)" (scheduled at 2025-07-26 05:15:56.381498+09:00)
2025-07-25 20:15:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:15:56.383516
2025-07-25 20:15:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:15:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:15:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:15:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:15:56,385 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:15:56,385 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:15:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:15:56,387 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:15:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:15:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:15:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:15:56,390 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:16:56 KST)" executed successfully
2025-07-25 20:16:55,311 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:16:55,311 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:16:56.381498+09:00 (in 1.070070 seconds)
2025-07-25 20:16:56,387 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:16:56,387 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:17:56.381498+09:00 (in 59.993876 seconds)
2025-07-25 20:16:56,387 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:17:56 KST)" (scheduled at 2025-07-26 05:16:56.381498+09:00)
2025-07-25 20:16:56,388 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:16:56.388381
2025-07-25 20:16:56,388 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:16:56,388 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:16:56,388 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:16:56,390 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:16:56,390 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:16:56,391 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:16:56,391 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:16:56,392 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:16:56,392 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:16:56,394 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:16:56,394 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:16:56,395 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:17:56 KST)" executed successfully
2025-07-25 20:17:55,221 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:17:55,222 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:17:56.381498+09:00 (in 1.159132 seconds)
2025-07-25 20:17:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:17:56,383 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:18:56.381498+09:00 (in 59.998150 seconds)
2025-07-25 20:17:56,383 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:18:56 KST)" (scheduled at 2025-07-26 05:17:56.381498+09:00)
2025-07-25 20:17:56,384 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:17:56.384118
2025-07-25 20:17:56,384 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:17:56,384 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:17:56,384 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:17:56,386 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:17:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:17:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:17:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:17:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:17:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:17:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:17:56,391 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:17:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:18:56 KST)" executed successfully
2025-07-25 20:18:55,288 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:18:55,289 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:18:56.381498+09:00 (in 1.091906 seconds)
2025-07-25 20:18:56,384 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:18:56,384 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:19:56.381498+09:00 (in 59.996801 seconds)
2025-07-25 20:18:56,385 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:19:56 KST)" (scheduled at 2025-07-26 05:18:56.381498+09:00)
2025-07-25 20:18:56,385 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:18:56.385594
2025-07-25 20:18:56,385 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:18:56,386 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:18:56,386 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:18:56,390 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:18:56,390 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:18:56,390 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:18:56,390 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:18:56,393 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:18:56,393 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:18:56,395 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:18:56,395 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:18:56,395 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:19:56 KST)" executed successfully
2025-07-25 20:19:55,264 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:19:55,264 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:19:56.381498+09:00 (in 1.116848 seconds)
2025-07-25 20:19:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:19:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:20:56.381498+09:00 (in 59.998904 seconds)
2025-07-25 20:19:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:20:56 KST)" (scheduled at 2025-07-26 05:19:56.381498+09:00)
2025-07-25 20:19:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:19:56.383368
2025-07-25 20:19:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:19:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:19:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:19:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:19:56,385 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:19:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:19:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:19:56,387 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:19:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:19:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:19:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:19:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:20:56 KST)" executed successfully
2025-07-25 20:20:55,165 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:20:55,166 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:20:56.381498+09:00 (in 1.215432 seconds)
2025-07-25 20:20:56,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:20:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:21:56.381498+09:00 (in 59.998989 seconds)
2025-07-25 20:20:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:21:56 KST)" (scheduled at 2025-07-26 05:20:56.381498+09:00)
2025-07-25 20:20:56,384 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:20:56.384206
2025-07-25 20:20:56,384 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:20:56,384 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:20:56,384 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:20:56,386 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:20:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:20:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:20:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:20:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:20:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:20:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:20:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:20:56,390 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:21:56 KST)" executed successfully
2025-07-25 20:21:55,182 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:21:55,182 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:21:56.381498+09:00 (in 1.198975 seconds)
2025-07-25 20:21:56,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:21:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:22:56.381498+09:00 (in 59.998863 seconds)
2025-07-25 20:21:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:22:56 KST)" (scheduled at 2025-07-26 05:21:56.381498+09:00)
2025-07-25 20:21:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:21:56.383390
2025-07-25 20:21:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:21:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:21:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:21:56,386 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:21:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:21:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:21:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:21:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:21:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:21:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:21:56,391 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:21:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:22:56 KST)" executed successfully
2025-07-25 20:22:55,165 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:22:55,165 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:22:56.381498+09:00 (in 1.215730 seconds)
2025-07-25 20:22:56,384 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:22:56,385 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:23:56.381498+09:00 (in 59.995872 seconds)
2025-07-25 20:22:56,385 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:23:56 KST)" (scheduled at 2025-07-26 05:22:56.381498+09:00)
2025-07-25 20:22:56,386 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:22:56.386431
2025-07-25 20:22:56,386 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:22:56,386 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:22:56,386 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:22:56,388 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:22:56,388 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:22:56,388 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:22:56,388 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:22:56,390 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:22:56,390 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:22:56,392 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:22:56,392 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:22:56,393 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:23:56 KST)" executed successfully
2025-07-25 20:23:55,100 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:23:55,100 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:23:56.381498+09:00 (in 1.280548 seconds)
2025-07-25 20:23:56,387 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:23:56,388 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:24:56.381498+09:00 (in 59.992871 seconds)
2025-07-25 20:23:56,388 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:24:56 KST)" (scheduled at 2025-07-26 05:23:56.381498+09:00)
2025-07-25 20:23:56,389 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:23:56.389531
2025-07-25 20:23:56,389 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:23:56,389 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:23:56,390 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:23:56,391 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:23:56,391 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:23:56,391 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:23:56,392 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:23:56,393 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:23:56,393 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:23:56,396 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:23:56,396 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:23:56,396 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:24:56 KST)" executed successfully
2025-07-25 20:24:55,097 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:24:55,097 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:24:56.381498+09:00 (in 1.283783 seconds)
2025-07-25 20:24:56,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:24:56,384 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:25:56.381498+09:00 (in 59.997225 seconds)
2025-07-25 20:24:56,384 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:25:56 KST)" (scheduled at 2025-07-26 05:24:56.381498+09:00)
2025-07-25 20:24:56,385 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:24:56.385156
2025-07-25 20:24:56,385 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:24:56,385 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:24:56,385 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:24:56,387 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:24:56,387 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:24:56,387 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:24:56,387 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:24:56,389 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:24:56,389 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:24:56,392 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:24:56,392 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:24:56,392 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:25:56 KST)" executed successfully
2025-07-25 20:25:55,122 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:25:55,123 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:25:56.381498+09:00 (in 1.258159 seconds)
2025-07-25 20:25:56,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:25:56,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:26:56.381498+09:00 (in 59.985992 seconds)
2025-07-25 20:25:56,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:26:56 KST)" (scheduled at 2025-07-26 05:25:56.381498+09:00)
2025-07-25 20:25:56,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:25:56.396205
2025-07-25 20:25:56,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:25:56,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:25:56,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:25:56,398 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:25:56,398 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:25:56,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:25:56,398 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:25:56,400 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:25:56,400 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:25:56,402 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:25:56,402 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:25:56,402 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:26:56 KST)" executed successfully
2025-07-25 20:26:55,066 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:26:55,066 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:26:56.381498+09:00 (in 1.314602 seconds)
2025-07-25 20:26:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:26:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:27:56.381498+09:00 (in 59.998525 seconds)
2025-07-25 20:26:56,383 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:27:56 KST)" (scheduled at 2025-07-26 05:26:56.381498+09:00)
2025-07-25 20:26:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:26:56.383703
2025-07-25 20:26:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:26:56,384 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:26:56,384 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:26:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:26:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:26:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:26:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:26:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:26:56,388 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:26:56,390 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:26:56,390 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:26:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:27:56 KST)" executed successfully
2025-07-25 20:27:55,044 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:27:55,045 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:27:56.381498+09:00 (in 1.336166 seconds)
2025-07-25 20:27:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:27:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:28:56.381498+09:00 (in 59.998783 seconds)
2025-07-25 20:27:56,382 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:28:56 KST)" (scheduled at 2025-07-26 05:27:56.381498+09:00)
2025-07-25 20:27:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:27:56.383408
2025-07-25 20:27:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:27:56,383 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:27:56,383 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:27:56,385 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:27:56,385 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:27:56,385 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:27:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:27:56,387 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:27:56,387 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:27:56,389 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:27:56,389 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:27:56,390 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:28:56 KST)" executed successfully
2025-07-25 20:28:55,081 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:28:55,081 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:28:56.381498+09:00 (in 1.299589 seconds)
2025-07-25 20:28:56,382 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:28:56,382 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:29:56.381498+09:00 (in 59.998643 seconds)
2025-07-25 20:28:56,383 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:29:56 KST)" (scheduled at 2025-07-26 05:28:56.381498+09:00)
2025-07-25 20:28:56,383 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:28:56.383666
2025-07-25 20:28:56,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:28:56,384 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:28:56,384 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:28:56,386 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:28:56,386 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:28:56,386 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:28:56,386 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:28:56,388 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:28:56,389 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:28:56,391 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:28:56,391 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:28:56,391 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:29:56 KST)" executed successfully
2025-07-25 20:29:55,072 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:29:55,072 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:29:56.381498+09:00 (in 1.308729 seconds)
2025-07-25 20:29:56,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:29:56,384 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:30:56.381498+09:00 (in 59.997041 seconds)
2025-07-25 20:29:56,384 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:30:56 KST)" (scheduled at 2025-07-26 05:29:56.381498+09:00)
2025-07-25 20:29:56,385 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:29:56.385168
2025-07-25 20:29:56,385 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:29:56,385 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:29:56,385 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:29:56,387 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:29:56,387 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:29:56,388 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:29:56,388 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:29:56,389 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:29:56,390 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:29:56,392 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:29:56,392 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:29:56,392 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:30:56 KST)" executed successfully
2025-07-25 20:30:28,207 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:30:28,208 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:30:28,208 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:30:28,208 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:30:41,742 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:30:41,752 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:30:41,757 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:30:41,757 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:30:41,758 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:30:41,759 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:30:41,806 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:30:41,807 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:30:41,807 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:30:41,807 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:30:41,808 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:30:41,808 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:30:41,808 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:30:41,809 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:31:41.759327+09:00 (in 59.950027 seconds)
2025-07-25 20:30:41,809 - main - INFO - 등록된 잡 목록:
2025-07-25 20:30:41,810 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:30:41,810 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:30:41,810 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:30:41,810 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:30:55,381 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:30:55,480 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:31:40,421 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:31:40,422 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:31:41.759327+09:00 (in 1.337198 seconds)
2025-07-25 20:31:41,763 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:31:41,764 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:32:41 KST)" (scheduled at 2025-07-26 05:31:41.759327+09:00)
2025-07-25 20:31:41,764 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:32:41.759327+09:00 (in 59.994471 seconds)
2025-07-25 20:31:41,765 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:31:41.765216
2025-07-25 20:31:41,765 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:31:41,766 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:31:41,766 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:31:41,771 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:31:41,771 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:31:41,771 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:31:41,771 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:31:41,773 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:31:41,774 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:31:41,776 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:31:41,776 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:31:41,776 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:32:41 KST)" executed successfully
2025-07-25 20:32:32,363 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:32:32,364 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:32:32,364 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:32:32,364 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:32:45,036 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:32:45,041 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:32:45,045 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:32:45,045 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:32:45,046 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:32:45,046 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:32:45,076 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:32:45,076 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:32:45,077 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:32:45,077 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:32:45,077 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:32:45,077 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:32:45,077 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:32:45,078 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:33:45.046256+09:00 (in 59.968110 seconds)
2025-07-25 20:32:45,078 - main - INFO - 등록된 잡 목록:
2025-07-25 20:32:45,078 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:32:45,078 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:32:45,079 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:32:45,079 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:33:02,404 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:33:02,596 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:33:43,646 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:33:43,646 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:33:45.046256+09:00 (in 1.399673 seconds)
2025-07-25 20:33:45,047 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:33:45,048 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:34:45 KST)" (scheduled at 2025-07-26 05:33:45.046256+09:00)
2025-07-25 20:33:45,048 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:34:45.046256+09:00 (in 59.997926 seconds)
2025-07-25 20:33:45,048 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:33:45.048722
2025-07-25 20:33:45,049 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:33:45,049 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:33:45,049 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:33:45,053 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:33:45,054 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:33:45,054 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:33:45,054 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:33:45,056 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:33:45,056 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:33:45,059 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:33:45,059 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:33:45,059 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:34:45 KST)" executed successfully
2025-07-25 20:33:48,519 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:33:48,519 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:33:48,520 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:33:48,520 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:34:00,498 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:34:00,507 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:34:00,511 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:34:00,511 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:34:00,512 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:34:00,513 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:34:00,563 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:34:00,564 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:34:00,564 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:34:00,564 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:34:00,564 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:34:00,565 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:34:00,566 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:34:00,566 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:35:00.513054+09:00 (in 59.946543 seconds)
2025-07-25 20:34:00,566 - main - INFO - 등록된 잡 목록:
2025-07-25 20:34:00,567 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:34:00,567 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:34:00,567 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:34:00,567 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:34:59,104 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:34:59,105 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:35:00.513054+09:00 (in 1.407981 seconds)
2025-07-25 20:35:00,513 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:35:00,514 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:36:00 KST)" (scheduled at 2025-07-26 05:35:00.513054+09:00)
2025-07-25 20:35:00,514 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:36:00.513054+09:00 (in 59.998140 seconds)
2025-07-25 20:35:00,515 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:35:00.515252
2025-07-25 20:35:00,516 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:35:00,517 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:35:00,517 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:35:00,529 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:35:00,530 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:35:00,530 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:35:00,530 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:35:00,533 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:35:00,533 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:35:00,536 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:35:00,536 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:35:00,536 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:36:00 KST)" executed successfully
2025-07-25 20:35:59,114 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:35:59,114 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:36:00.513054+09:00 (in 1.398462 seconds)
2025-07-25 20:36:00,513 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:36:00,514 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:37:00.513054+09:00 (in 59.999004 seconds)
2025-07-25 20:36:00,514 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:37:00 KST)" (scheduled at 2025-07-26 05:36:00.513054+09:00)
2025-07-25 20:36:00,514 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:36:00.514789
2025-07-25 20:36:00,514 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:36:00,515 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:36:00,515 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:36:00,516 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:36:00,517 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:36:00,517 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:36:00,517 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:36:00,519 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:36:00,519 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:36:00,521 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:36:00,522 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:36:00,522 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:37:00 KST)" executed successfully
2025-07-25 20:36:03,527 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:36:03,540 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:36:07,161 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:36:07,167 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:36:09,446 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:36:09,456 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:36:59,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:36:59,129 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:37:00.513054+09:00 (in 1.383929 seconds)
2025-07-25 20:37:00,514 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:37:00,514 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:38:00.513054+09:00 (in 59.998107 seconds)
2025-07-25 20:37:00,515 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:38:00 KST)" (scheduled at 2025-07-26 05:37:00.513054+09:00)
2025-07-25 20:37:00,515 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:37:00.515696
2025-07-25 20:37:00,515 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:37:00,516 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:37:00,516 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:37:00,517 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:37:00,518 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:37:00,518 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:37:00,518 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:37:00,520 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:37:00,520 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:37:00,522 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:37:00,522 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:37:00,523 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:38:00 KST)" executed successfully
2025-07-25 20:37:59,105 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:37:59,105 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:38:00.513054+09:00 (in 1.407574 seconds)
2025-07-25 20:38:00,514 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:38:00,514 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:39:00.513054+09:00 (in 59.998361 seconds)
2025-07-25 20:38:00,514 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:39:00 KST)" (scheduled at 2025-07-26 05:38:00.513054+09:00)
2025-07-25 20:38:00,515 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:38:00.515457
2025-07-25 20:38:00,515 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:38:00,515 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:38:00,516 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:38:00,518 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:38:00,518 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:38:00,518 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:38:00,518 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:38:00,521 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:38:00,521 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:38:00,524 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:38:00,525 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:38:00,525 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:39:00 KST)" executed successfully
2025-07-25 20:38:59,103 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:38:59,104 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:39:00.513054+09:00 (in 1.408653 seconds)
2025-07-25 20:39:00,513 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:39:00,514 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:40:00.513054+09:00 (in 59.998680 seconds)
2025-07-25 20:39:00,514 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:40:00 KST)" (scheduled at 2025-07-26 05:39:00.513054+09:00)
2025-07-25 20:39:00,515 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:39:00.515143
2025-07-25 20:39:00,515 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:39:00,515 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:39:00,515 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:39:00,517 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:39:00,517 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:39:00,517 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:39:00,517 - main - ERROR - 가격 알림 확인 중 '005930' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:39:00,519 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:39:00,519 - main - ERROR - 가격 알림 확인 중 '042660' 처리 오류: 'StockService' object has no attribute 'get_current_price'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    current_price = stock_service.get_current_price(symbol, db)
AttributeError: 'StockService' object has no attribute 'get_current_price'
2025-07-25 20:39:00,521 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:39:00,521 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:39:00,522 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:40:00 KST)" executed successfully
2025-07-25 20:39:12,090 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:39:12,096 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:39:41,575 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:39:41,575 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:39:41,575 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:39:41,575 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:39:55,113 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:39:55,120 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:39:55,124 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:39:55,125 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:39:55,126 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:39:55,126 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:39:55,164 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:39:55,164 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:39:55,164 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:39:55,165 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:39:55,165 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:39:55,165 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:39:55,166 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:39:55,166 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:40:55.126360+09:00 (in 59.959902 seconds)
2025-07-25 20:39:55,166 - main - INFO - 등록된 잡 목록:
2025-07-25 20:39:55,167 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:39:55,167 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:39:55,167 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:39:55,167 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:40:06,866 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:40:06,882 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:40:06,894 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:06,895 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:06,896 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:06,897 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:24,858 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:40:24,870 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:40:24,879 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:24,882 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:24,885 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:24,885 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:40:25,427 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:25,434 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-25 20:40:25,439 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:25,459 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-25 20:40:25,463 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:25,469 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-25 20:40:25,475 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:25,479 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-25 20:40:25,480 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-25 20:40:25,482 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-25 20:40:25,691 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:25,703 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:40:25,703 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:40:25,704 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:40:25,704 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:40:25,704 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:25,705 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:25,705 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:25,706 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:41:24.885546+09:00 (in 59.178981 seconds)
2025-07-25 20:40:25,708 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:25,716 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:40:25,716 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:40:25,717 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:40:25,717 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:40:25,802 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-25 20:40:25,805 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:25,805 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:25,805 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:25,806 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:25,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:25,828 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:25,829 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:25,829 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:25,830 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:25,830 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:25,879 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-25 20:40:25,881 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-25 20:40:25,881 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-25 20:40:26,325 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:40:26,847 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:40:26,856 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:26,870 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 20:40:26,884 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-25 20:40:26,887 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:40:26,893 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:26,894 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-25 20:40:26,899 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-25 20:40:26,902 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:40:26,907 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:26,908 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:26,909 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:26,909 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:26,917 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:26,936 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-25 20:40:26,946 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:26,948 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:26,950 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:26,950 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:26,950 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:26,951 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:26,959 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:40:26,974 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:40:26,975 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:40:26,986 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:40:26,986 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:40:26,990 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:40:26,992 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:26,993 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:26,995 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,003 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:27,013 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:27,015 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:27,017 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,017 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:27,018 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,019 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:27,031 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:40:27,042 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-25 20:40:27,042 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-25 20:40:27,044 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:40:27,045 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:40:27,066 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:40:27,070 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:27,074 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,077 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,079 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:27,091 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:27,093 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:27,094 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,094 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:27,096 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,098 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:27,109 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:40:27,114 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-25 20:40:27,116 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:27,117 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,118 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:27,128 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:27,131 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:27,132 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,133 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,132 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:27,134 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:27,143 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:40:27,149 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:40:27,149 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:40:27,158 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:40:27,158 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:40:27,163 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:40:27.159229')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:40:27.159229')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 20:40:27,182 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:40:27,189 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-25 20:40:27,202 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-25 20:40:27,208 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-25 20:40:27,219 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:40:27,222 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:27,223 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,223 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,223 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:27,231 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:27,245 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:27,246 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,246 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:27,247 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,247 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:27,276 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:40:27,276 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:40:27,280 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:40:27,280 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 186438
2025-07-25 20:40:27,296 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:40:27,298 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-25 20:40:27,304 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-25 20:40:27,313 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-25 20:40:27,314 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-25 20:40:27,318 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:40:27,327 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:27,327 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,328 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,328 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:27,335 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:27,337 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:27,338 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:27,338 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:27,339 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:27,339 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:27,814 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:40:28,418 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:40:28,420 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:28,421 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:28,421 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:28,422 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:28,439 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:28,442 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:28,443 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:28,444 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:28,448 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:28,448 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:28,467 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-25 20:40:28,478 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-25 20:40:28,480 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-25 20:40:28,486 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-25 20:40:28,489 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-25 20:40:28,491 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-25 20:40:28,499 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:28,512 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:28,514 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:28,516 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:28,522 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:28,524 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:28,525 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:28,525 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:28,529 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:28,529 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:28,540 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:40:28,541 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:40:28,549 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:28,564 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 20:40:28,579 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-25 20:40:28,580 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:40:28,589 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-25 20:40:28,589 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-25 20:40:28,609 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-25 20:40:28,611 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:40:28,628 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:40:28,629 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:40:28,645 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:28,646 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 20:40:28,650 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 20:40:28,650 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:40:28,655 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 20:40:28,656 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-25 20:40:28,687 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 20:40:28,696 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:40:28,711 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:28,713 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 20:40:28,716 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 20:40:28,716 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:40:28,719 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 20:40:28,719 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-25 20:40:28,736 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 20:40:28,744 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:40:28,753 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:28,754 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:28,754 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:28,754 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:28,764 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:28,771 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:40:28,774 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:28,776 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:28,774 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:40:28,777 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:40:29,196 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:40:29,602 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:40:29,610 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-25 20:40:29,615 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-25 20:40:29,620 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-25 20:40:29,632 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:29,634 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 20:40:29,640 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-25 20:40:29,642 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:40:29,646 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:40:29,658 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:40:29,659 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:40:29,661 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:40:29,661 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:40:29,663 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:40:29.662028')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:40:29.662028')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 20:40:29,684 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:40:29,688 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:40:29,691 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:40:29,694 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:40:29,694 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 50994
2025-07-25 20:40:29,696 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:40:29,699 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-25 20:40:29,703 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-25 20:40:29,705 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-25 20:40:29,705 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-25 20:40:29,709 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:40:29,712 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:40:29,714 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:29,715 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:40:29,715 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:40:29,739 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:40:29.738759
2025-07-25 20:40:29,739 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-25 20:40:29,740 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:40:29,742 - src.api.main - DEBUG - 종목 정상종목 현재가: <MagicMock name='get_stock_service().get_current_price_and_change().get()' id='140567337887264'>
2025-07-25 20:40:29,744 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140567337919600'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140567337951648'>
2025-07-25 20:40:29,745 - src.api.main - ERROR - 가격 알림 확인 중 '정상종목' 처리 오류: '>=' not supported between instances of 'MagicMock' and 'int'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 145, in check_price_alerts_job
    if alert.condition == 'gte' and current_price >= alert.target_price:
TypeError: '>=' not supported between instances of 'MagicMock' and 'int'
2025-07-25 20:40:29,747 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:40:29,748 - src.api.main - DEBUG - 종목 오류종목 현재가: <MagicMock name='get_stock_service().get_current_price_and_change().get()' id='140567337887264'>
2025-07-25 20:40:29,752 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140567337992832'>, 목표 가격: 200, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140567338008432'>
2025-07-25 20:40:29,752 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: '>=' not supported between instances of 'MagicMock' and 'int'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 145, in check_price_alerts_job
    if alert.condition == 'gte' and current_price >= alert.target_price:
TypeError: '>=' not supported between instances of 'MagicMock' and 'int'
2025-07-25 20:40:29,753 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:40:29,753 - src.api.main - DEBUG - 종목 정상종목2 현재가: <MagicMock name='get_stock_service().get_current_price_and_change().get()' id='140567337887264'>
2025-07-25 20:40:29,757 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140567338058368'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140567338073968'>
2025-07-25 20:40:29,758 - src.api.main - ERROR - 가격 알림 확인 중 '정상종목2' 처리 오류: '<=' not supported between instances of 'MagicMock' and 'int'
Traceback (most recent call last):
  File "/app/src/api/main.py", line 147, in check_price_alerts_job
    elif alert.condition == 'lte' and current_price <= alert.target_price:
TypeError: '<=' not supported between instances of 'MagicMock' and 'int'
2025-07-25 20:40:29,762 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:40:29,968 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-25 20:40:29,969 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-25 20:40:29,972 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-25 20:40:30,011 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-25 20:40:53,683 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:53,683 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:40:55.126360+09:00 (in 1.442629 seconds)
2025-07-25 20:40:55,126 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:40:55,128 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:41:55 KST)" (scheduled at 2025-07-26 05:40:55.126360+09:00)
2025-07-25 20:40:55,128 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:41:55.126360+09:00 (in 59.998075 seconds)
2025-07-25 20:40:55,128 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:40:55.128602
2025-07-25 20:40:55,129 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:40:55,129 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:40:55,129 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:40:55,140 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:40:55,140 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:40:55,141 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:40:55,141 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=042660
2025-07-25 20:40:55,149 - src.api.services.stock_service - WARNING - 현재가 없음: 042660. 임시 가격 생성.
2025-07-25 20:40:55,150 - main - DEBUG - 종목 042660 현재가: 74880
2025-07-25 20:40:55,150 - main - DEBUG - 알림 ID: 3, 목표 가격: 75000.0, 조건: gte, 반복 주기: None
2025-07-25 20:40:55,150 - main - DEBUG - 종목 042660에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:40:55,151 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:40:55,151 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:40:55,153 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:40:55,153 - main - DEBUG - 종목 005930 현재가: 94495
2025-07-25 20:40:55,155 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:40:55,156 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 94495, 목표가: 75000.0
2025-07-25 20:40:55,221 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 94495원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 20:40:55,221 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:55,222 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 94495원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:40:55,227 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:40:55,490 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f8eda93a680>
2025-07-25 20:40:55,490 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f8ef2f61ac0> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:40:55,737 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f8ef55036d0>
2025-07-25 20:40:55,737 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:40:55,738 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:40:55,738 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:40:55,739 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:40:55,739 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:40:56,323 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:40:55 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:40:56,324 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:40:56,325 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:40:56,325 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:40:56,325 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:40:56,325 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:40:56,327 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:40:56,329 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:40:56,331 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:40:56,331 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 94495, 목표가: 76000.0
2025-07-25 20:40:56,332 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 94495원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 20:40:56,332 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:40:56,333 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 94495원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:40:56,333 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:40:56,334 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:40:56,334 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:40:56,335 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:40:56,335 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:40:56,336 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:40:56,336 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:40:56,336 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:40:56,337 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:40:56,339 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:40:56,340 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:40:56,340 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:40:56,340 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:40:56,340 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:41:55 KST)" executed successfully
2025-07-25 20:41:44,050 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:41:44,050 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:41:44,051 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:41:44,051 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:41:56,914 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:41:56,919 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:41:56,923 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:41:56,923 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:41:56,924 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:41:56,924 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:41:56,956 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:41:56,956 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:41:56,956 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:41:56,956 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:41:56,956 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:41:56,957 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:41:56,957 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:41:56,958 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:42:56.924862+09:00 (in 59.966824 seconds)
2025-07-25 20:41:56,958 - main - INFO - 등록된 잡 목록:
2025-07-25 20:41:56,958 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:41:56,958 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:41:56,959 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:41:56,959 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:42:07,069 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:42:07,078 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:42:07,082 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:42:07,083 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:42:07,084 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:42:07,084 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:42:07,304 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:07,311 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-25 20:42:07,314 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:07,320 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-25 20:42:07,324 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:07,327 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-25 20:42:07,331 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:07,422 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-25 20:42:07,423 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-25 20:42:07,427 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-25 20:42:07,443 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:07,449 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:42:07,449 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:42:07,450 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:42:07,450 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:42:07,450 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:07,451 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:07,451 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:07,452 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:43:07.084825+09:00 (in 59.632696 seconds)
2025-07-25 20:42:07,452 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:07,453 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:42:07,453 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:42:07,453 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:42:07,453 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:42:07,490 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-25 20:42:07,492 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:07,492 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:07,492 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:07,493 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:07,498 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:07,499 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:07,500 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:07,500 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:07,500 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:07,500 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:07,517 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-25 20:42:07,518 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-25 20:42:07,519 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-25 20:42:07,777 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:42:08,022 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:42:08,026 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:08,032 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 20:42:08,038 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-25 20:42:08,040 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:42:08,043 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:08,044 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-25 20:42:08,046 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-25 20:42:08,048 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:42:08,049 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,050 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,050 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,050 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,054 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,057 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-25 20:42:08,060 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,062 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,062 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,062 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,063 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,063 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,066 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:42:08,070 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:42:08,070 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:42:08,073 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:42:08,073 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:42:08,074 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:42:08,076 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,077 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,077 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,077 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,081 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,083 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,083 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,083 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,084 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,084 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,087 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:42:08,091 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-25 20:42:08,091 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-25 20:42:08,093 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:42:08,094 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:42:08,096 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:42:08,098 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,098 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,098 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,098 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,102 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,103 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,104 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,104 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,104 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,105 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,108 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:42:08,113 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-25 20:42:08,115 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,115 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,115 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,115 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,121 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,122 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,123 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,123 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,123 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,124 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,129 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:42:08,132 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:42:08,132 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:42:08,133 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:42:08,134 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:42:08,136 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:42:08.134196')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:42:08.134196')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 20:42:08,141 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:42:08,144 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-25 20:42:08,147 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-25 20:42:08,149 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-25 20:42:08,150 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:42:08,152 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,152 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,152 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,153 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,157 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,159 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,159 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,159 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,160 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,160 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,169 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:42:08,169 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:42:08,173 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:42:08,173 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 110968
2025-07-25 20:42:08,177 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:42:08,178 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-25 20:42:08,183 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-25 20:42:08,185 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-25 20:42:08,186 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-25 20:42:08,187 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:42:08,189 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,189 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,190 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,190 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,194 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,196 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,196 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,197 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,197 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,197 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,439 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:42:08,679 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:42:08,681 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,682 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,682 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,682 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,686 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,688 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,688 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,688 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,689 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,689 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,696 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-25 20:42:08,700 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-25 20:42:08,701 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-25 20:42:08,705 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-25 20:42:08,706 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-25 20:42:08,708 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-25 20:42:08,709 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,710 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,710 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,710 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,715 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,717 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,717 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,717 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,718 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,718 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:08,719 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:42:08,720 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:42:08,725 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:08,731 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 20:42:08,736 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-25 20:42:08,736 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:42:08,740 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-25 20:42:08,741 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-25 20:42:08,753 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-25 20:42:08,755 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:42:08,761 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:42:08,762 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:42:08,765 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:08,766 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 20:42:08,769 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 20:42:08,769 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:42:08,771 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 20:42:08,771 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-25 20:42:08,778 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 20:42:08,779 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:42:08,782 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:08,783 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 20:42:08,784 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 20:42:08,785 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:42:08,786 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 20:42:08,786 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-25 20:42:08,792 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 20:42:08,793 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:42:08,798 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:08,798 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,799 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,799 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:08,803 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:08,805 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:42:08,805 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:08,805 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:42:08,806 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:08,806 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:42:09,050 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:42:09,287 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:42:09,290 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-25 20:42:09,292 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-25 20:42:09,294 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-25 20:42:09,298 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:09,298 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 20:42:09,300 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-25 20:42:09,302 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:42:09,303 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:42:09,305 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:42:09,305 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:42:09,307 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:42:09,307 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:42:09,309 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:42:09.307695')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:42:09.307695')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 20:42:09,312 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:42:09,315 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:42:09,315 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:42:09,316 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:42:09,317 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 130047
2025-07-25 20:42:09,318 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:42:09,319 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-25 20:42:09,321 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-25 20:42:09,323 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-25 20:42:09,323 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-25 20:42:09,324 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:42:09,326 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:42:09,326 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:09,327 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:42:09,327 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:42:09,333 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:42:09.333710
2025-07-25 20:42:09,334 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-25 20:42:09,334 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:42:09,334 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-25 20:42:09,335 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140347711509488'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140347711541536'>
2025-07-25 20:42:09,335 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-25 20:42:09,339 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140347711661888'>)
2025-07-25 20:42:09,341 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:42:09,341 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:42:09,341 - src.api.main - DEBUG - 종목 오류종목 현재가: None
2025-07-25 20:42:09,342 - src.api.main - WARNING - '오류종목'의 현재가를 조회할 수 없어 건너뜁니다.
2025-07-25 20:42:09,342 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:42:09,342 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-25 20:42:09,343 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140347709687120'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140347709719168'>
2025-07-25 20:42:09,343 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-25 20:42:09,344 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140347711661888'>)
2025-07-25 20:42:09,344 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:42:09,344 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:42:09,423 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-25 20:42:09,424 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-25 20:42:09,426 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-25 20:42:09,444 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-25 20:42:55,491 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:55,491 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:42:56.924862+09:00 (in 1.433061 seconds)
2025-07-25 20:42:56,926 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:42:56,927 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:43:56 KST)" (scheduled at 2025-07-26 05:42:56.924862+09:00)
2025-07-25 20:42:56,927 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:43:56.924862+09:00 (in 59.997215 seconds)
2025-07-25 20:42:56,928 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:42:56.928163
2025-07-25 20:42:56,928 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:42:56,928 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:42:56,929 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:42:56,939 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 3개 조회됨.
2025-07-25 20:42:56,940 - main - DEBUG - 활성 알림 수: 3
2025-07-25 20:42:56,940 - main - DEBUG - 종목 042660에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:42:56,940 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=042660
2025-07-25 20:42:56,946 - src.api.services.stock_service - WARNING - 현재가 없음: 042660. 임시 가격 생성.
2025-07-25 20:42:56,946 - main - DEBUG - 종목 042660 현재가: 75846
2025-07-25 20:42:56,946 - main - DEBUG - 알림 ID: 3, 목표 가격: 75000.0, 조건: gte, 반복 주기: None
2025-07-25 20:42:56,946 - main - INFO - 가격 알림 트리거됨: 042660, 현재가: 75846, 목표가: 75000.0
2025-07-25 20:42:56,950 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 7412973494, text: 🔔 가격 알림: 042660
현재가 75846원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 20:42:56,951 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:56,951 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 7412973494, 'text': '🔔 가격 알림: 042660\n현재가 75846원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:42:57,020 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:42:57,279 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fc99614a080>
2025-07-25 20:42:57,279 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fc9ae739b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:42:57,518 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fc9961493f0>
2025-07-25 20:42:57,519 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:42:57,520 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:42:57,520 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:42:57,521 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:42:57,521 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:42:57,942 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:42:57 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'398'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:42:57,943 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 200 OK"
2025-07-25 20:42:57,943 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:42:57,944 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:42:57,944 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:42:57,944 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:42:57,944 - telegram.Bot - DEBUG - Call to Bot API endpoint `sendMessage` finished with return value `{'message_id': 520, 'from': {'id': 8067228135, 'is_bot': True, 'first_name': 'StockEyeDev', 'username': 'StockEyeDev_bot'}, 'chat': {'id': 7412973494, 'first_name': '기호', 'type': 'private'}, 'date': 1753476177, 'text': '🔔 가격 알림: 042660\n현재가 75846원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:42:57,947 - src.common.notify_service - INFO - Successfully sent message to chat_id: 7412973494. Message ID: 520
2025-07-25 20:42:57,947 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 7412973494)
2025-07-25 20:42:57,947 - main - DEBUG - 알림(3) 비활성화됨 (반복 설정 없음).
2025-07-25 20:42:57,958 - main - DEBUG - 종목 042660에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:42:57,959 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:42:57,959 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:42:57,961 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:42:57,961 - main - DEBUG - 종목 005930 현재가: 99665
2025-07-25 20:42:57,964 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:42:57,964 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 99665, 목표가: 75000.0
2025-07-25 20:42:57,966 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 99665원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 20:42:57,967 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:57,967 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 99665원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:42:57,968 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:42:57,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:42:57,969 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:42:57,970 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:42:57,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:42:57,970 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:42:57,970 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:42:57,971 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:42:57,971 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:42:57,976 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:42:57,978 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:42:57,978 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 99665, 목표가: 76000.0
2025-07-25 20:42:57,980 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 99665원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 20:42:57,980 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:42:57,980 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 99665원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:42:57,981 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:42:58,220 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fc99619b370>
2025-07-25 20:42:58,220 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fc9ae739b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:42:58,459 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fc996198490>
2025-07-25 20:42:58,460 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:42:58,461 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:42:58,461 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:42:58,462 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:42:58,463 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:42:59,045 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:42:58 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:42:59,045 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:42:59,045 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:42:59,046 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:42:59,046 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:42:59,046 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:42:59,047 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:42:59,048 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:42:59,048 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:42:59,048 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:42:59,049 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:42:59,049 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:43:56 KST)" executed successfully
2025-07-25 20:43:39,325 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:43:39,325 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:43:39,326 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:43:39,326 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:43:51,538 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:43:51,544 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:43:51,549 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:43:51,550 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:43:51,551 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:43:51,551 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:43:51,585 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:43:51,586 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:43:51,586 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:43:51,586 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:43:51,586 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:43:51,586 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:43:51,587 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:43:51,587 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:44:51.551278+09:00 (in 59.963874 seconds)
2025-07-25 20:43:51,587 - main - INFO - 등록된 잡 목록:
2025-07-25 20:43:51,588 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:43:51,588 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:43:51,588 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:43:51,588 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:44:01,846 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:44:01,857 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:44:01,876 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:01,876 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:01,877 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:01,878 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:02,086 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,092 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-25 20:44:02,095 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,098 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-25 20:44:02,100 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,104 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-25 20:44:02,107 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,184 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-25 20:44:02,185 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-25 20:44:02,187 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-25 20:44:02,199 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,204 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:44:02,204 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:44:02,204 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:44:02,205 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:44:02,205 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,206 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,206 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,206 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:45:01.877976+09:00 (in 59.671340 seconds)
2025-07-25 20:44:02,206 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,207 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:44:02,207 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:44:02,207 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:44:02,208 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:44:02,240 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-25 20:44:02,242 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,242 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,242 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,242 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,246 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,248 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,249 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,249 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,249 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,249 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,266 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-25 20:44:02,268 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-25 20:44:02,268 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-25 20:44:02,529 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:44:02,777 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:44:02,782 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:44:02,786 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 20:44:02,793 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-25 20:44:02,795 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:44:02,798 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:44:02,799 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-25 20:44:02,802 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-25 20:44:02,804 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:44:02,806 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,806 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,806 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,807 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,811 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,814 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-25 20:44:02,817 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,819 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,819 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,819 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,820 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,820 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,823 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:44:02,827 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:44:02,827 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:44:02,830 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:44:02,830 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:44:02,832 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:44:02,834 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,834 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,834 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,834 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,838 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,840 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,840 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,840 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,841 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,841 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,844 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:44:02,847 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-25 20:44:02,848 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-25 20:44:02,849 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:44:02,849 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:44:02,851 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:44:02,853 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,853 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,853 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,853 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,857 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,859 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,860 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,860 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,860 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,861 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,868 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:44:02,872 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-25 20:44:02,874 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,875 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,875 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,875 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,879 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,881 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,882 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,882 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,882 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,883 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,888 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:44:02,891 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:44:02,891 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:44:02,893 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:44:02,893 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:44:02,895 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:44:02.893562')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:44:02.893562')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 20:44:02,901 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:44:02,905 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-25 20:44:02,909 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-25 20:44:02,911 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-25 20:44:02,913 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:44:02,915 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,916 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,916 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,916 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,921 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,923 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,924 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,924 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,924 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,924 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:02,933 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:44:02,934 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:44:02,936 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:44:02,937 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 111185
2025-07-25 20:44:02,939 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:44:02,940 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-25 20:44:02,945 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-25 20:44:02,948 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-25 20:44:02,949 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-25 20:44:02,950 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:44:02,952 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:02,952 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,952 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,952 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:02,957 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:02,960 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:02,961 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:02,961 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:02,962 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:02,962 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:03,205 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:44:03,441 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:44:03,443 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:03,443 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:03,443 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:03,443 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:03,448 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:03,450 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:03,451 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:03,451 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:03,451 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:03,452 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:03,461 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-25 20:44:03,465 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-25 20:44:03,467 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-25 20:44:03,471 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-25 20:44:03,474 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-25 20:44:03,475 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-25 20:44:03,477 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:03,477 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:03,478 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:03,478 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:03,482 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:03,484 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:03,485 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:03,485 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:03,485 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:03,486 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:03,487 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:44:03,488 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:44:03,495 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:44:03,499 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-25 20:44:03,503 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-25 20:44:03,504 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:44:03,508 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-25 20:44:03,508 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-25 20:44:03,520 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-25 20:44:03,522 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:44:03,527 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:44:03,527 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:44:03,531 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:44:03,531 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 20:44:03,533 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 20:44:03,533 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:44:03,535 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 20:44:03,535 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-25 20:44:03,542 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 20:44:03,544 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:44:03,547 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:44:03,548 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-25 20:44:03,550 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-25 20:44:03,550 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-25 20:44:03,552 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-25 20:44:03,553 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-25 20:44:03,560 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-25 20:44:03,561 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-25 20:44:03,566 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:03,567 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:03,567 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:03,567 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:03,571 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:44:03,572 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:03,573 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:03,573 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:03,573 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:03,574 - src.api.main - INFO - 등록된 잡 목록:
2025-07-25 20:44:03,823 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-25 20:44:04,061 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-25 20:44:04,066 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-25 20:44:04,071 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-25 20:44:04,073 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-25 20:44:04,079 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:44:04,080 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-25 20:44:04,084 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-25 20:44:04,086 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-25 20:44:04,089 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-25 20:44:04,093 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-25 20:44:04,093 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-25 20:44:04,094 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-25 20:44:04,094 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-25 20:44:04,095 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:44:04.095079')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-25 20:44:04.095079')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-25 20:44:04,097 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-25 20:44:04,100 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:44:04,100 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:44:04,102 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:44:04,102 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 195558
2025-07-25 20:44:04,103 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-25 20:44:04,104 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-25 20:44:04,106 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-25 20:44:04,108 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-25 20:44:04,108 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-25 20:44:04,109 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-25 20:44:04,110 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:04,110 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:04,111 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:04,111 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:04,118 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:44:04.117960
2025-07-25 20:44:04,118 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-25 20:44:04,118 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:44:04,118 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-25 20:44:04,119 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140678923162464'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140678923178128'>
2025-07-25 20:44:04,119 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-25 20:44:04,122 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140678921217712'>)
2025-07-25 20:44:04,124 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:44:04,124 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:44:04,125 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-25 20:44:04,125 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-25 20:44:04,125 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-25 20:44:04,127 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140678921307040'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140678921585088'>
2025-07-25 20:44:04,127 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-25 20:44:04,127 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140678921217712'>)
2025-07-25 20:44:04,127 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:44:04,128 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:44:04,131 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-25 20:44:04,131 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-25 20:44:04,132 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-25 20:44:04,147 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-25 20:44:11,229 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:44:11,230 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:11,230 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:44:11,230 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:44:15,636 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:44:15,648 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:44:15,653 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:15,653 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:15,654 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:15,654 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:44:15,693 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:44:15,693 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:44:15,693 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:44:15,693 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:44:15,694 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:44:15,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:44:15,694 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:44:15,695 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:45:15.654714+09:00 (in 59.959605 seconds)
2025-07-25 20:44:15,695 - main - INFO - 등록된 잡 목록:
2025-07-25 20:44:15,695 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:44:15,695 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:44:15,696 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:44:15,696 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:45:14,210 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:45:14,211 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:45:15.654714+09:00 (in 1.443630 seconds)
2025-07-25 20:45:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:45:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:46:15 KST)" (scheduled at 2025-07-26 05:45:15.654714+09:00)
2025-07-25 20:45:15,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:46:15.654714+09:00 (in 59.998232 seconds)
2025-07-25 20:45:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:45:15.656903
2025-07-25 20:45:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:45:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:45:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:45:15,668 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:45:15,668 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:45:15,668 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:45:15,668 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:45:15,675 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:45:15,675 - main - DEBUG - 종목 005930 현재가: 190471
2025-07-25 20:45:15,676 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:45:15,676 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 190471, 목표가: 75000.0
2025-07-25 20:45:15,680 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 190471원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:45:15,681 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:45:15,681 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 190471원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:45:15,770 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:45:16,028 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e844c5fc0>
2025-07-25 20:45:16,029 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:45:16,274 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e844c5330>
2025-07-25 20:45:16,274 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:45:16,275 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:45:16,275 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:45:16,276 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:45:16,276 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:45:16,861 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:45:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:45:16,862 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:45:16,862 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:45:16,862 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:45:16,863 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:45:16,863 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:45:16,864 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:45:16,867 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:45:16,867 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:45:16,867 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 190471, 목표가: 76000.0
2025-07-25 20:45:16,869 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 190471원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:45:16,869 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:45:16,870 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 190471원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:45:16,871 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:45:16,871 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:45:16,871 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:45:16,872 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:45:16,872 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:45:16,872 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:45:16,873 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:45:16,873 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:45:16,873 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:45:16,876 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:45:16,877 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:45:16,877 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:45:16,878 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:45:16,878 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:46:15 KST)" executed successfully
2025-07-25 20:46:14,182 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:46:14,182 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:46:15.654714+09:00 (in 1.471943 seconds)
2025-07-25 20:46:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:46:15,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:47:15.654714+09:00 (in 59.998806 seconds)
2025-07-25 20:46:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:47:15 KST)" (scheduled at 2025-07-26 05:46:15.654714+09:00)
2025-07-25 20:46:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:46:15.656664
2025-07-25 20:46:15,656 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:46:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:46:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:46:15,658 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:46:15,658 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:46:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:46:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:46:15,660 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:46:15,660 - main - DEBUG - 종목 005930 현재가: 74405
2025-07-25 20:46:15,660 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:46:15,660 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:46:15,661 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:46:15,661 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:46:15,661 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:46:15,661 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:47:15 KST)" executed successfully
2025-07-25 20:46:19,392 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:46:19,402 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:47:14,194 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:47:14,195 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:47:15.654714+09:00 (in 1.459731 seconds)
2025-07-25 20:47:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:47:15,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:48:15.654714+09:00 (in 59.998749 seconds)
2025-07-25 20:47:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:48:15 KST)" (scheduled at 2025-07-26 05:47:15.654714+09:00)
2025-07-25 20:47:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:47:15.656897
2025-07-25 20:47:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:47:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:47:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:47:15,659 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:47:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:47:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:47:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:47:15,661 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:47:15,661 - main - DEBUG - 종목 005930 현재가: 97953
2025-07-25 20:47:15,661 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:47:15,661 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 97953, 목표가: 75000.0
2025-07-25 20:47:15,663 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 97953원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 20:47:15,663 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:47:15,663 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 97953원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:47:15,664 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:47:15,916 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e821404c0>
2025-07-25 20:47:15,916 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:47:16,159 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84512680>
2025-07-25 20:47:16,160 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:47:16,160 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:47:16,161 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:47:16,162 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:47:16,162 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:47:16,744 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:47:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:47:16,745 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:47:16,745 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:47:16,745 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:47:16,746 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:47:16,746 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:47:16,747 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:47:16,748 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:47:16,748 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:47:16,748 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 97953, 목표가: 76000.0
2025-07-25 20:47:16,749 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 97953원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 20:47:16,750 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:47:16,750 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 97953원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:47:16,751 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:47:16,752 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:47:16,752 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:47:16,753 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:47:16,753 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:47:16,753 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:47:16,754 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:47:16,754 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:47:16,754 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:47:16,755 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:47:16,756 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:47:16,756 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:47:16,756 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:47:16,756 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:48:15 KST)" executed successfully
2025-07-25 20:48:14,169 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:48:14,169 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:48:15.654714+09:00 (in 1.484957 seconds)
2025-07-25 20:48:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:48:15,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:49:15.654714+09:00 (in 59.998962 seconds)
2025-07-25 20:48:15,655 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:49:15 KST)" (scheduled at 2025-07-26 05:48:15.654714+09:00)
2025-07-25 20:48:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:48:15.656518
2025-07-25 20:48:15,656 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:48:15,656 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:48:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:48:15,658 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:48:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:48:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:48:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:48:15,661 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:48:15,661 - main - DEBUG - 종목 005930 현재가: 86800
2025-07-25 20:48:15,662 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:48:15,662 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 86800, 목표가: 75000.0
2025-07-25 20:48:15,664 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 86800원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 20:48:15,664 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:48:15,665 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 86800원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:48:15,667 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:48:15,925 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e844369b0>
2025-07-25 20:48:15,926 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:48:16,175 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84435ea0>
2025-07-25 20:48:16,176 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:48:16,176 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:48:16,176 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:48:16,177 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:48:16,177 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:48:16,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:48:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:48:16,814 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:48:16,814 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:48:16,815 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:48:16,815 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:48:16,815 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:48:16,817 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:48:16,817 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:48:16,817 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:48:16,817 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 86800, 목표가: 76000.0
2025-07-25 20:48:16,819 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 86800원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 20:48:16,819 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:48:16,820 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 86800원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:48:16,821 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:48:16,821 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:48:16,821 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:48:16,822 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:48:16,822 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:48:16,822 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:48:16,822 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:48:16,823 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:48:16,823 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:48:16,824 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:48:16,825 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:48:16,825 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:48:16,825 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:48:16,826 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:49:15 KST)" executed successfully
2025-07-25 20:49:14,178 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:49:14,178 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:49:15.654714+09:00 (in 1.476177 seconds)
2025-07-25 20:49:15,656 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:49:15,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:50:15.654714+09:00 (in 59.997954 seconds)
2025-07-25 20:49:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:50:15 KST)" (scheduled at 2025-07-26 05:49:15.654714+09:00)
2025-07-25 20:49:15,657 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:49:15.657535
2025-07-25 20:49:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:49:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:49:15,658 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:49:15,659 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:49:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:49:15,660 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:49:15,660 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:49:15,661 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:49:15,661 - main - DEBUG - 종목 005930 현재가: 114305
2025-07-25 20:49:15,661 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:49:15,661 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 114305, 목표가: 75000.0
2025-07-25 20:49:15,662 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 114305원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:49:15,663 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:49:15,663 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 114305원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:49:15,664 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:49:15,918 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e821418a0>
2025-07-25 20:49:15,918 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:49:16,161 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e82141270>
2025-07-25 20:49:16,162 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:49:16,162 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:49:16,163 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:49:16,163 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:49:16,163 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:49:16,748 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:49:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:49:16,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:49:16,750 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:49:16,750 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:49:16,750 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:49:16,751 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:49:16,752 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:49:16,753 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:49:16,753 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:49:16,754 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 114305, 목표가: 76000.0
2025-07-25 20:49:16,756 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 114305원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:49:16,756 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:49:16,757 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 114305원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:49:16,758 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:49:16,759 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:49:16,759 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:49:16,768 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:49:16,768 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:49:16,769 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:49:16,769 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:49:16,770 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:49:16,771 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:49:16,772 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:49:16,773 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:49:16,774 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:49:16,774 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:49:16,774 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:50:15 KST)" executed successfully
2025-07-25 20:50:14,169 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:50:14,169 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:50:15.654714+09:00 (in 1.484948 seconds)
2025-07-25 20:50:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:50:15,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:51:15.654714+09:00 (in 59.998597 seconds)
2025-07-25 20:50:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:51:15 KST)" (scheduled at 2025-07-26 05:50:15.654714+09:00)
2025-07-25 20:50:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:50:15.656772
2025-07-25 20:50:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:50:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:50:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:50:15,659 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:50:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:50:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:50:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:50:15,661 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:50:15,661 - main - DEBUG - 종목 005930 현재가: 190099
2025-07-25 20:50:15,661 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:50:15,661 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 190099, 목표가: 75000.0
2025-07-25 20:50:15,663 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 190099원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:50:15,663 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:50:15,664 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 190099원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:50:15,664 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:50:15,912 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84581f30>
2025-07-25 20:50:15,912 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:50:16,152 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e844376a0>
2025-07-25 20:50:16,152 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:50:16,153 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:50:16,154 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:50:16,155 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:50:16,155 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:50:16,792 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:50:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:50:16,793 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:50:16,794 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:50:16,794 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:50:16,795 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:50:16,795 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:50:16,796 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:50:16,797 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:50:16,797 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:50:16,797 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 190099, 목표가: 76000.0
2025-07-25 20:50:16,799 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 190099원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:50:16,799 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:50:16,800 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 190099원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:50:16,801 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:50:16,801 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:50:16,802 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:50:16,802 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:50:16,802 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:50:16,803 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:50:16,803 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:50:16,803 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:50:16,804 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:50:16,805 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:50:16,805 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:50:16,806 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:50:16,806 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:50:16,806 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:51:15 KST)" executed successfully
2025-07-25 20:50:40,486 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:50:40,494 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:51:14,172 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:51:14,172 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:51:15.654714+09:00 (in 1.481896 seconds)
2025-07-25 20:51:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:51:15,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:52:15.654714+09:00 (in 59.998526 seconds)
2025-07-25 20:51:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:52:15 KST)" (scheduled at 2025-07-26 05:51:15.654714+09:00)
2025-07-25 20:51:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:51:15.656896
2025-07-25 20:51:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:51:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:51:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:51:15,659 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:51:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:51:15,660 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:51:15,660 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:51:15,661 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:51:15,661 - main - DEBUG - 종목 005930 현재가: 126584
2025-07-25 20:51:15,661 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:51:15,662 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 126584, 목표가: 75000.0
2025-07-25 20:51:15,663 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 126584원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:51:15,663 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:51:15,663 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 126584원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:51:15,664 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:51:15,916 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e821438b0>
2025-07-25 20:51:15,917 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:51:16,165 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e82141210>
2025-07-25 20:51:16,165 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:51:16,166 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:51:16,167 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:51:16,167 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:51:16,168 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:51:16,763 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:51:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:51:16,763 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:51:16,764 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:51:16,764 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:51:16,764 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:51:16,765 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:51:16,766 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:51:16,767 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:51:16,767 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:51:16,767 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 126584, 목표가: 76000.0
2025-07-25 20:51:16,769 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 126584원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:51:16,769 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:51:16,770 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 126584원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:51:16,771 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:51:16,771 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:51:16,771 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:51:16,772 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:51:16,772 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:51:16,773 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:51:16,773 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:51:16,773 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:51:16,774 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:51:16,774 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:51:16,775 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:51:16,776 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:51:16,776 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:51:16,776 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:52:15 KST)" executed successfully
2025-07-25 20:52:14,162 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:52:14,163 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:52:15.654714+09:00 (in 1.491535 seconds)
2025-07-25 20:52:15,657 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:52:15,658 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:53:15.654714+09:00 (in 59.996537 seconds)
2025-07-25 20:52:15,658 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:53:15 KST)" (scheduled at 2025-07-26 05:52:15.654714+09:00)
2025-07-25 20:52:15,658 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:52:15.658978
2025-07-25 20:52:15,659 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:52:15,659 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:52:15,659 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:52:15,661 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:52:15,661 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:52:15,662 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:52:15,662 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:52:15,663 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:52:15,664 - main - DEBUG - 종목 005930 현재가: 179371
2025-07-25 20:52:15,664 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:52:15,664 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 179371, 목표가: 75000.0
2025-07-25 20:52:15,665 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 179371원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:52:15,666 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:52:15,666 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 179371원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:52:15,667 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:52:15,919 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84436ce0>
2025-07-25 20:52:15,919 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:52:16,163 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84444940>
2025-07-25 20:52:16,164 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:52:16,164 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:52:16,164 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:52:16,165 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:52:16,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:52:16,749 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:52:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:52:16,749 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:52:16,750 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:52:16,750 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:52:16,750 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:52:16,750 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:52:16,751 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:52:16,752 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:52:16,752 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:52:16,752 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 179371, 목표가: 76000.0
2025-07-25 20:52:16,753 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 179371원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:52:16,754 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:52:16,754 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 179371원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:52:16,755 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:52:16,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:52:16,755 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:52:16,756 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:52:16,756 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:52:16,756 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:52:16,757 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:52:16,757 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:52:16,758 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:52:16,758 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:52:16,759 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:52:16,759 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:52:16,759 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:52:16,759 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:53:15 KST)" executed successfully
2025-07-25 20:52:21,918 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:52:21,926 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:53:14,143 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:53:14,143 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:53:15.654714+09:00 (in 1.510999 seconds)
2025-07-25 20:53:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:53:15,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:54:15.654714+09:00 (in 59.998754 seconds)
2025-07-25 20:53:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:54:15 KST)" (scheduled at 2025-07-26 05:53:15.654714+09:00)
2025-07-25 20:53:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:53:15.656745
2025-07-25 20:53:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:53:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:53:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:53:15,659 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:53:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:53:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:53:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:53:15,661 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:53:15,661 - main - DEBUG - 종목 005930 현재가: 189621
2025-07-25 20:53:15,661 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:53:15,662 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189621, 목표가: 75000.0
2025-07-25 20:53:15,663 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 189621원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:53:15,663 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:53:15,664 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 189621원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:53:15,665 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:53:15,912 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e82143100>
2025-07-25 20:53:15,913 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:53:16,156 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e82141360>
2025-07-25 20:53:16,157 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:53:16,158 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:53:16,158 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:53:16,159 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:53:16,159 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:53:16,744 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:53:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:53:16,745 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:53:16,745 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:53:16,745 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:53:16,745 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:53:16,746 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:53:16,747 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:53:16,748 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:53:16,748 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:53:16,748 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189621, 목표가: 76000.0
2025-07-25 20:53:16,750 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 189621원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:53:16,750 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:53:16,751 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 189621원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:53:16,752 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:53:16,752 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:53:16,753 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:53:16,753 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:53:16,753 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:53:16,754 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:53:16,754 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:53:16,754 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:53:16,755 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:53:16,756 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:53:16,756 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:53:16,757 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:53:16,757 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:53:16,757 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:54:15 KST)" executed successfully
2025-07-25 20:54:14,160 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:54:14,161 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:54:15.654714+09:00 (in 1.493464 seconds)
2025-07-25 20:54:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:54:15,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:55:15.654714+09:00 (in 59.998733 seconds)
2025-07-25 20:54:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:55:15 KST)" (scheduled at 2025-07-26 05:54:15.654714+09:00)
2025-07-25 20:54:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:54:15.656625
2025-07-25 20:54:15,656 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:54:15,656 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:54:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:54:15,658 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:54:15,658 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:54:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:54:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:54:15,660 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:54:15,660 - main - DEBUG - 종목 005930 현재가: 156595
2025-07-25 20:54:15,660 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:54:15,661 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 156595, 목표가: 75000.0
2025-07-25 20:54:15,662 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 156595원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:54:15,662 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:54:15,663 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 156595원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:54:15,664 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:54:15,921 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e845113f0>
2025-07-25 20:54:15,921 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:54:16,165 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84510dc0>
2025-07-25 20:54:16,166 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:54:16,167 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:54:16,167 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:54:16,168 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:54:16,168 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:54:16,751 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:54:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:54:16,751 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:54:16,752 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:54:16,752 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:54:16,752 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:54:16,753 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:54:16,754 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:54:16,754 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:54:16,754 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:54:16,754 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 156595, 목표가: 76000.0
2025-07-25 20:54:16,756 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 156595원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:54:16,756 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:54:16,757 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 156595원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:54:16,758 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:54:16,758 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:54:16,758 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:54:16,759 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:54:16,759 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:54:16,759 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:54:16,759 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:54:16,760 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:54:16,760 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:54:16,761 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:54:16,762 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:54:16,762 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:54:16,762 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:54:16,762 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:55:15 KST)" executed successfully
2025-07-25 20:54:39,998 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:54:40,007 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:55:14,122 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:55:14,122 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:55:15.654714+09:00 (in 1.531838 seconds)
2025-07-25 20:55:15,656 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:55:15,657 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:56:15.654714+09:00 (in 59.997383 seconds)
2025-07-25 20:55:15,657 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:56:15 KST)" (scheduled at 2025-07-26 05:55:15.654714+09:00)
2025-07-25 20:55:15,658 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:55:15.658008
2025-07-25 20:55:15,658 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:55:15,658 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:55:15,658 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:55:15,660 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:55:15,660 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:55:15,660 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:55:15,660 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:55:15,662 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:55:15,662 - main - DEBUG - 종목 005930 현재가: 192672
2025-07-25 20:55:15,662 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:55:15,662 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 192672, 목표가: 75000.0
2025-07-25 20:55:15,664 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 192672원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:55:15,664 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:55:15,664 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 192672원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:55:15,666 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:55:15,916 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e84510b50>
2025-07-25 20:55:15,916 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:55:16,161 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e844c4d30>
2025-07-25 20:55:16,161 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:55:16,162 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:55:16,162 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:55:16,163 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:55:16,163 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:55:16,745 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:55:16 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:55:16,746 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:55:16,746 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:55:16,747 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:55:16,747 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:55:16,747 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:55:16,748 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:55:16,749 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:55:16,749 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:55:16,749 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 192672, 목표가: 76000.0
2025-07-25 20:55:16,751 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 192672원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:55:16,751 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:55:16,751 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 192672원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:55:16,752 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:55:16,753 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:55:16,753 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:55:16,753 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:55:16,754 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:55:16,754 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:55:16,754 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:55:16,755 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:55:16,755 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:55:16,756 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:55:16,757 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:55:16,757 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:55:16,757 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:55:16,757 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:56:15 KST)" executed successfully
2025-07-25 20:56:14,151 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:56:14,151 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:56:15.654714+09:00 (in 1.503043 seconds)
2025-07-25 20:56:15,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:56:15,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:57:15.654714+09:00 (in 59.998507 seconds)
2025-07-25 20:56:15,656 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:57:15 KST)" (scheduled at 2025-07-26 05:56:15.654714+09:00)
2025-07-25 20:56:15,656 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:56:15.656965
2025-07-25 20:56:15,657 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:56:15,657 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:56:15,657 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:56:15,659 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:56:15,659 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:56:15,659 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:56:15,659 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:56:15,660 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:56:15,661 - main - DEBUG - 종목 005930 현재가: 182389
2025-07-25 20:56:15,661 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:56:15,661 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 182389, 목표가: 75000.0
2025-07-25 20:56:15,662 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 182389원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:56:15,662 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:56:15,663 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 182389원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:56:15,663 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:56:15,920 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e82169570>
2025-07-25 20:56:15,920 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0e9ca3db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:56:16,163 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f0e821698a0>
2025-07-25 20:56:16,163 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:56:16,164 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:56:16,164 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:56:16,164 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:56:16,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:56:16,747 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:56:15 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:56:16,748 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:56:16,748 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:56:16,749 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:56:16,749 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:56:16,749 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:56:16,750 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:56:16,751 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:56:16,751 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:56:16,751 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 182389, 목표가: 76000.0
2025-07-25 20:56:16,753 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 182389원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:56:16,753 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:56:16,753 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 182389원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:56:16,754 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:56:16,755 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:56:16,755 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:56:16,756 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:56:16,756 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:56:16,756 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:56:16,757 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:56:16,757 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:56:16,757 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:56:16,758 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:56:16,759 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:56:16,759 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:56:16,759 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:56:16,760 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:57:15 KST)" executed successfully
2025-07-25 20:56:36,282 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:56:36,282 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:56:36,282 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:56:36,283 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:56:49,058 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:56:49,065 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:56:49,069 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:56:49,069 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:56:49,070 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:56:49,070 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:56:49,113 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:56:49,114 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:56:49,114 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:56:49,114 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:56:49,114 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:56:49,115 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:56:49,115 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:56:49,115 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:57:49.070546+09:00 (in 59.954662 seconds)
2025-07-25 20:56:49,116 - main - INFO - 등록된 잡 목록:
2025-07-25 20:56:49,116 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:56:49,116 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:56:49,116 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:56:49,117 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:56:56,163 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-25 20:56:56,164 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:56:56,164 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-25 20:56:56,164 - main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-25 20:57:00,374 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:57:00,385 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-25 20:57:00,390 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:57:00,391 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:57:00,392 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:57:00,392 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-25 20:57:00,449 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-25 20:57:00,450 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-25 20:57:00,450 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-25 20:57:00,450 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-25 20:57:00,450 - apscheduler.scheduler - INFO - Scheduler started
2025-07-25 20:57:00,451 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:57:00,451 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-25 20:57:00,452 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:58:00.392664+09:00 (in 59.940647 seconds)
2025-07-25 20:57:00,452 - main - INFO - 등록된 잡 목록:
2025-07-25 20:57:00,453 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-25 20:57:00,453 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-25 20:57:00,454 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-25 20:57:00,455 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-25 20:57:20,167 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:57:20,259 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:57:58,879 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:57:58,880 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:58:00.392664+09:00 (in 1.512387 seconds)
2025-07-25 20:58:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:58:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:59:00 KST)" (scheduled at 2025-07-26 05:58:00.392664+09:00)
2025-07-25 20:58:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:59:00.392664+09:00 (in 59.998182 seconds)
2025-07-25 20:58:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:58:00.394877
2025-07-25 20:58:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:58:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:58:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:58:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:58:00,399 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:58:00,400 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:58:00,400 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:58:00,404 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:58:00,404 - main - DEBUG - 종목 005930 현재가: 129186
2025-07-25 20:58:00,404 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:58:00,404 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 129186, 목표가: 75000.0
2025-07-25 20:58:00,408 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 129186원이 목표가 75000.0원(gte)에 도달...
2025-07-25 20:58:00,408 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:58:00,409 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 129186원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:58:00,411 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:58:00,673 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f437a60>
2025-07-25 20:58:00,673 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:58:00,921 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f4377c0>
2025-07-25 20:58:00,922 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:58:00,923 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:58:00,923 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:58:00,924 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:58:00,924 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:58:01,508 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:58:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:58:01,509 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:58:01,510 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:58:01,510 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:58:01,510 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:58:01,510 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:58:01,512 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:58:01,515 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:58:01,515 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:58:01,515 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 129186, 목표가: 76000.0
2025-07-25 20:58:01,517 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 129186원이 목표가 76000.0원(gte)에 도달...
2025-07-25 20:58:01,518 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:58:01,518 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 129186원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:58:01,519 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:58:01,520 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:58:01,520 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:58:01,521 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:58:01,521 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:58:01,522 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:58:01,522 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:58:01,522 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:58:01,524 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:58:01,527 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:58:01,528 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:58:01,529 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:58:01,529 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:58:01,529 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 05:59:00 KST)" executed successfully
2025-07-25 20:58:58,858 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:58:58,858 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 05:59:00.392664+09:00 (in 1.533953 seconds)
2025-07-25 20:59:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:59:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:00:00.392664+09:00 (in 59.998590 seconds)
2025-07-25 20:59:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:00:00 KST)" (scheduled at 2025-07-26 05:59:00.392664+09:00)
2025-07-25 20:59:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 20:59:00.394619
2025-07-25 20:59:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 20:59:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 20:59:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 20:59:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 20:59:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 20:59:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 20:59:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 20:59:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 20:59:00,398 - main - DEBUG - 종목 005930 현재가: 95869
2025-07-25 20:59:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 20:59:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 95869, 목표가: 75000.0
2025-07-25 20:59:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 95869원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 20:59:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:59:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 95869원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:59:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 20:59:00,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88e50>
2025-07-25 20:59:00,657 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 20:59:00,907 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89390>
2025-07-25 20:59:00,907 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:59:00,908 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:59:00,908 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:59:00,909 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:59:00,909 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:59:01,492 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 20:59:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 20:59:01,493 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 20:59:01,493 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 20:59:01,493 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 20:59:01,494 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:59:01,494 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 20:59:01,495 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 20:59:01,495 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 20:59:01,496 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 20:59:01,496 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 95869, 목표가: 76000.0
2025-07-25 20:59:01,497 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 95869원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 20:59:01,498 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 20:59:01,498 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 95869원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 20:59:01,499 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 20:59:01,500 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 20:59:01,500 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 20:59:01,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 20:59:01,500 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 20:59:01,501 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:59:01,502 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 20:59:01,502 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 20:59:01,503 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 20:59:01,503 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 20:59:01,504 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 20:59:01,505 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 20:59:01,505 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 20:59:01,505 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:00:00 KST)" executed successfully
2025-07-25 20:59:58,860 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 20:59:58,860 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:00:00.392664+09:00 (in 1.531748 seconds)
2025-07-25 21:00:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:00:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:01:00.392664+09:00 (in 59.998772 seconds)
2025-07-25 21:00:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:01:00 KST)" (scheduled at 2025-07-26 06:00:00.392664+09:00)
2025-07-25 21:00:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:00:00.394577
2025-07-25 21:00:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:00:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:00:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:00:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:00:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:00:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:00:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:00:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:00:00,399 - main - DEBUG - 종목 005930 현재가: 134429
2025-07-25 21:00:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:00:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 134429, 목표가: 75000.0
2025-07-25 21:00:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 134429원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:00:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:00:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 134429원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:00:00,403 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:00:00,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88940>
2025-07-25 21:00:00,658 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:00:00,930 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f437790>
2025-07-25 21:00:00,931 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:00:00,931 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:00:00,932 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:00:00,932 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:00:00,933 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:00:01,545 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:00:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:00:01,546 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:00:01,546 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:00:01,547 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:00:01,547 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:00:01,547 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:00:01,549 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:00:01,549 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:00:01,550 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:00:01,550 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 134429, 목표가: 76000.0
2025-07-25 21:00:01,551 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 134429원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:00:01,552 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:00:01,552 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 134429원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:00:01,554 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:00:01,554 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:00:01,555 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:00:01,555 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:00:01,556 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:00:01,556 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:00:01,556 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:00:01,556 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:00:01,557 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:00:01,558 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:00:01,559 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:00:01,559 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:00:01,559 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:00:01,559 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:01:00 KST)" executed successfully
2025-07-25 21:00:58,843 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:00:58,843 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:01:00.392664+09:00 (in 1.548928 seconds)
2025-07-25 21:01:00,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:01:00,397 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:02:00.392664+09:00 (in 59.994971 seconds)
2025-07-25 21:01:00,397 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:02:00 KST)" (scheduled at 2025-07-26 06:01:00.392664+09:00)
2025-07-25 21:01:00,398 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:01:00.398587
2025-07-25 21:01:00,398 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:01:00,399 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:01:00,399 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:01:00,400 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:01:00,401 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:01:00,401 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:01:00,401 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:01:00,402 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:01:00,403 - main - DEBUG - 종목 005930 현재가: 137914
2025-07-25 21:01:00,403 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:01:00,403 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 137914, 목표가: 75000.0
2025-07-25 21:01:00,404 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 137914원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:01:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:01:00,405 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 137914원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:01:00,406 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:01:00,658 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88b20>
2025-07-25 21:01:00,659 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:01:00,902 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8ba00>
2025-07-25 21:01:00,903 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:01:00,903 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:01:00,903 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:01:00,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:01:00,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:01:01,490 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:01:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:01:01,491 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:01:01,491 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:01:01,492 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:01:01,492 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:01:01,492 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:01:01,494 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:01:01,494 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:01:01,494 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:01:01,495 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 137914, 목표가: 76000.0
2025-07-25 21:01:01,496 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 137914원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:01:01,496 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:01:01,497 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 137914원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:01:01,498 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:01:01,498 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:01:01,498 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:01:01,499 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:01:01,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:01:01,500 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:01:01,500 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:01:01,500 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:01:01,501 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:01:01,502 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:01:01,502 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:01:01,503 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:01:01,503 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:01:01,503 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:02:00 KST)" executed successfully
2025-07-25 21:01:58,844 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:01:58,845 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:02:00.392664+09:00 (in 1.547156 seconds)
2025-07-25 21:02:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:02:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:03:00.392664+09:00 (in 59.998095 seconds)
2025-07-25 21:02:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:03:00 KST)" (scheduled at 2025-07-26 06:02:00.392664+09:00)
2025-07-25 21:02:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:02:00.395470
2025-07-25 21:02:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:02:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:02:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:02:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:02:00,399 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:02:00,399 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:02:00,399 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:02:00,401 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:02:00,401 - main - DEBUG - 종목 005930 현재가: 167510
2025-07-25 21:02:00,402 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:02:00,402 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 167510, 목표가: 75000.0
2025-07-25 21:02:00,403 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 167510원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:02:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:02:00,405 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 167510원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:02:00,406 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:02:00,660 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da884f0>
2025-07-25 21:02:00,660 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:02:00,903 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88ac0>
2025-07-25 21:02:00,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:02:00,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:02:00,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:02:00,906 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:02:00,906 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:02:01,490 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:02:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:02:01,491 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:02:01,491 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:02:01,492 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:02:01,492 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:02:01,492 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:02:01,493 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:02:01,494 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:02:01,494 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:02:01,495 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 167510, 목표가: 76000.0
2025-07-25 21:02:01,496 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 167510원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:02:01,497 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:02:01,497 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 167510원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:02:01,498 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:02:01,499 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:02:01,499 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:02:01,500 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:02:01,500 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:02:01,500 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:02:01,500 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:02:01,501 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:02:01,501 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:02:01,502 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:02:01,503 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:02:01,504 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:02:01,504 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:02:01,504 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:03:00 KST)" executed successfully
2025-07-25 21:02:58,860 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:02:58,861 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:03:00.392664+09:00 (in 1.531102 seconds)
2025-07-25 21:03:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:03:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:04:00.392664+09:00 (in 59.998845 seconds)
2025-07-25 21:03:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:04:00 KST)" (scheduled at 2025-07-26 06:03:00.392664+09:00)
2025-07-25 21:03:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:03:00.394633
2025-07-25 21:03:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:03:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:03:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:03:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:03:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:03:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:03:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:03:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:03:00,399 - main - DEBUG - 종목 005930 현재가: 130379
2025-07-25 21:03:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:03:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 130379, 목표가: 75000.0
2025-07-25 21:03:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 130379원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:03:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:03:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 130379원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:03:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:03:00,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f4379a0>
2025-07-25 21:03:00,657 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:03:00,906 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f436980>
2025-07-25 21:03:00,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:03:00,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:03:00,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:03:00,908 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:03:00,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:03:01,511 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:03:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:03:01,512 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:03:01,512 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:03:01,513 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:03:01,513 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:03:01,513 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:03:01,514 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:03:01,515 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:03:01,515 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:03:01,515 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 130379, 목표가: 76000.0
2025-07-25 21:03:01,517 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 130379원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:03:01,517 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:03:01,517 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 130379원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:03:01,518 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:03:01,519 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:03:01,519 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:03:01,519 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:03:01,519 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:03:01,520 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:03:01,520 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:03:01,520 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:03:01,521 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:03:01,521 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:03:01,522 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:03:01,522 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:03:01,522 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:03:01,522 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:04:00 KST)" executed successfully
2025-07-25 21:03:58,823 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:03:58,824 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:04:00.392664+09:00 (in 1.568345 seconds)
2025-07-25 21:04:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:04:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:05:00.392664+09:00 (in 59.998821 seconds)
2025-07-25 21:04:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:05:00 KST)" (scheduled at 2025-07-26 06:04:00.392664+09:00)
2025-07-25 21:04:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:04:00.394504
2025-07-25 21:04:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:04:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:04:00,394 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:04:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:04:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:04:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:04:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:04:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:04:00,398 - main - DEBUG - 종목 005930 현재가: 151656
2025-07-25 21:04:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:04:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 151656, 목표가: 75000.0
2025-07-25 21:04:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 151656원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:04:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:04:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 151656원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:04:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:04:00,654 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a50f0>
2025-07-25 21:04:00,654 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:04:00,897 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88df0>
2025-07-25 21:04:00,897 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:04:00,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:04:00,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:04:00,899 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:04:00,899 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:04:01,518 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:04:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:04:01,519 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:04:01,519 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:04:01,519 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:04:01,519 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:04:01,520 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:04:01,521 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:04:01,521 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:04:01,522 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:04:01,522 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 151656, 목표가: 76000.0
2025-07-25 21:04:01,523 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 151656원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:04:01,524 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:04:01,524 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 151656원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:04:01,525 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:04:01,526 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:04:01,526 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:04:01,526 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:04:01,527 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:04:01,527 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:04:01,527 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:04:01,528 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:04:01,528 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:04:01,529 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:04:01,530 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:04:01,530 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:04:01,530 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:04:01,530 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:05:00 KST)" executed successfully
2025-07-25 21:04:58,844 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:04:58,844 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:05:00.392664+09:00 (in 1.547925 seconds)
2025-07-25 21:05:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:05:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:06:00.392664+09:00 (in 59.998369 seconds)
2025-07-25 21:05:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:06:00 KST)" (scheduled at 2025-07-26 06:05:00.392664+09:00)
2025-07-25 21:05:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:05:00.395090
2025-07-25 21:05:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:05:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:05:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:05:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:05:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:05:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:05:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:05:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:05:00,399 - main - DEBUG - 종목 005930 현재가: 159915
2025-07-25 21:05:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:05:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 159915, 목표가: 75000.0
2025-07-25 21:05:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 159915원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:05:00,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:05:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 159915원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:05:00,403 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:05:00,702 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f436170>
2025-07-25 21:05:00,702 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:05:00,953 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f4377c0>
2025-07-25 21:05:00,953 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:05:00,954 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:05:00,954 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:05:00,955 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:05:00,955 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:05:01,542 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:05:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:05:01,542 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:05:01,543 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:05:01,543 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:05:01,543 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:05:01,543 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:05:01,545 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:05:01,545 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:05:01,545 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:05:01,545 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 159915, 목표가: 76000.0
2025-07-25 21:05:01,547 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 159915원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:05:01,547 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:05:01,548 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 159915원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:05:01,549 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:05:01,549 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:05:01,549 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:05:01,550 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:05:01,550 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:05:01,551 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:05:01,551 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:05:01,551 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:05:01,552 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:05:01,552 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:05:01,553 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:05:01,553 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:05:01,554 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:05:01,554 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:06:00 KST)" executed successfully
2025-07-25 21:05:58,790 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:05:58,790 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:06:00.392664+09:00 (in 1.602108 seconds)
2025-07-25 21:06:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:06:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:07:00.392664+09:00 (in 59.998679 seconds)
2025-07-25 21:06:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:07:00 KST)" (scheduled at 2025-07-26 06:06:00.392664+09:00)
2025-07-25 21:06:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:06:00.394720
2025-07-25 21:06:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:06:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:06:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:06:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:06:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:06:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:06:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:06:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:06:00,399 - main - DEBUG - 종목 005930 현재가: 99801
2025-07-25 21:06:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:06:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 99801, 목표가: 75000.0
2025-07-25 21:06:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 99801원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:06:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:06:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 99801원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:06:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:06:00,659 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a6ce0>
2025-07-25 21:06:00,659 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:06:00,903 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8a9e0>
2025-07-25 21:06:00,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:06:00,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:06:00,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:06:00,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:06:00,905 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:06:01,510 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:06:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:06:01,511 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:06:01,511 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:06:01,511 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:06:01,512 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:06:01,512 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:06:01,513 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:06:01,514 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:06:01,514 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:06:01,514 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 99801, 목표가: 76000.0
2025-07-25 21:06:01,516 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 99801원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:06:01,516 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:06:01,516 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 99801원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:06:01,517 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:06:01,518 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:06:01,518 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:06:01,519 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:06:01,519 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:06:01,519 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:06:01,519 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:06:01,520 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:06:01,520 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:06:01,521 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:06:01,522 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:06:01,522 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:06:01,522 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:06:01,523 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:07:00 KST)" executed successfully
2025-07-25 21:06:58,837 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:06:58,837 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:07:00.392664+09:00 (in 1.555120 seconds)
2025-07-25 21:07:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:07:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:08:00.392664+09:00 (in 59.998842 seconds)
2025-07-25 21:07:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:08:00 KST)" (scheduled at 2025-07-26 06:07:00.392664+09:00)
2025-07-25 21:07:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:07:00.394572
2025-07-25 21:07:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:07:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:07:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:07:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:07:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:07:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:07:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:07:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:07:00,398 - main - DEBUG - 종목 005930 현재가: 78753
2025-07-25 21:07:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:07:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 78753, 목표가: 75000.0
2025-07-25 21:07:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 78753원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:07:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:07:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 78753원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:07:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:07:00,649 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7a30>
2025-07-25 21:07:00,649 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:07:00,901 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5450>
2025-07-25 21:07:00,901 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:07:00,902 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:07:00,902 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:07:00,903 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:07:00,903 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:07:01,499 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:07:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:07:01,500 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:07:01,500 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:07:01,500 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:07:01,500 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:07:01,501 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:07:01,502 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:07:01,503 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:07:01,503 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:07:01,503 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 78753, 목표가: 76000.0
2025-07-25 21:07:01,505 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 78753원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:07:01,506 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:07:01,506 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 78753원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:07:01,507 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:07:01,508 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:07:01,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:07:01,508 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:07:01,509 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:07:01,509 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:07:01,510 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:07:01,510 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:07:01,511 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:07:01,512 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:07:01,513 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:07:01,513 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:07:01,513 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:07:01,513 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:08:00 KST)" executed successfully
2025-07-25 21:07:58,815 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:07:58,815 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:08:00.392664+09:00 (in 1.576992 seconds)
2025-07-25 21:08:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:08:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:09:00.392664+09:00 (in 59.999021 seconds)
2025-07-25 21:08:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:09:00 KST)" (scheduled at 2025-07-26 06:08:00.392664+09:00)
2025-07-25 21:08:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:08:00.394301
2025-07-25 21:08:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:08:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:08:00,394 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:08:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:08:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:08:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:08:00,396 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:08:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:08:00,398 - main - DEBUG - 종목 005930 현재가: 177488
2025-07-25 21:08:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:08:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 177488, 목표가: 75000.0
2025-07-25 21:08:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 177488원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:08:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:08:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 177488원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:08:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:08:00,643 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7b50>
2025-07-25 21:08:00,643 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:08:00,882 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a6e30>
2025-07-25 21:08:00,883 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:08:00,883 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:08:00,883 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:08:00,884 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:08:00,884 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:08:01,473 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:08:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:08:01,473 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:08:01,474 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:08:01,474 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:08:01,474 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:08:01,474 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:08:01,475 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:08:01,476 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:08:01,476 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:08:01,476 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 177488, 목표가: 76000.0
2025-07-25 21:08:01,478 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 177488원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:08:01,478 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:08:01,479 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 177488원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:08:01,480 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:08:01,480 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:08:01,481 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:08:01,481 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:08:01,481 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:08:01,482 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:08:01,482 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:08:01,482 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:08:01,483 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:08:01,484 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:08:01,484 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:08:01,485 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:08:01,485 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:08:01,485 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:09:00 KST)" executed successfully
2025-07-25 21:08:58,831 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:08:58,832 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:09:00.392664+09:00 (in 1.560269 seconds)
2025-07-25 21:09:00,061 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:09:00,061 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:09:00.392664+09:00 (in 0.331095 seconds)
2025-07-25 21:08:59,920 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:08:59,920 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:09:00.392664+09:00 (in 0.471820 seconds)
2025-07-25 21:09:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:09:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:10:00.392664+09:00 (in 59.998845 seconds)
2025-07-25 21:09:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:10:00 KST)" (scheduled at 2025-07-26 06:09:00.392664+09:00)
2025-07-25 21:09:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:09:00.394630
2025-07-25 21:09:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:09:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:09:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:09:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:09:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:09:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:09:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:09:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:09:00,399 - main - DEBUG - 종목 005930 현재가: 68363
2025-07-25 21:09:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:09:00,399 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:09:00,400 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:09:00,400 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:09:00,400 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:09:00,400 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:10:00 KST)" executed successfully
2025-07-25 21:09:58,759 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:09:58,760 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:10:00.392664+09:00 (in 1.632370 seconds)
2025-07-25 21:10:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:10:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:11:00.392664+09:00 (in 59.998551 seconds)
2025-07-25 21:10:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:11:00 KST)" (scheduled at 2025-07-26 06:10:00.392664+09:00)
2025-07-25 21:10:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:10:00.395193
2025-07-25 21:10:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:10:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:10:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:10:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:10:00,401 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:10:00,402 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:10:00,402 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:10:00,406 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:10:00,407 - main - DEBUG - 종목 005930 현재가: 171140
2025-07-25 21:10:00,407 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:10:00,408 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 171140, 목표가: 75000.0
2025-07-25 21:10:00,411 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 171140원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:10:00,411 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:10:00,412 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 171140원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:10:00,413 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:10:00,659 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8b7c0>
2025-07-25 21:10:00,659 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:10:00,902 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88880>
2025-07-25 21:10:00,903 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:10:00,903 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:10:00,903 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:10:00,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:10:00,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:10:01,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:10:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:10:01,497 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:10:01,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:10:01,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:10:01,498 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:10:01,498 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:10:01,500 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:10:01,500 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:10:01,500 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:10:01,500 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 171140, 목표가: 76000.0
2025-07-25 21:10:01,502 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 171140원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:10:01,502 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:10:01,502 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 171140원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:10:01,503 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:10:01,504 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:10:01,504 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:10:01,505 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:10:01,505 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:10:01,505 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:10:01,505 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:10:01,506 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:10:01,506 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:10:01,507 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:10:01,508 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:10:01,508 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:10:01,508 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:10:01,509 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:11:00 KST)" executed successfully
2025-07-25 21:10:54,198 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:10:54,209 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:10:58,799 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:10:58,800 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:11:00.392664+09:00 (in 1.592472 seconds)
2025-07-25 21:11:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:11:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:12:00.392664+09:00 (in 59.998613 seconds)
2025-07-25 21:11:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:12:00 KST)" (scheduled at 2025-07-26 06:11:00.392664+09:00)
2025-07-25 21:11:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:11:00.394597
2025-07-25 21:11:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:11:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:11:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:11:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:11:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:11:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:11:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:11:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:11:00,398 - main - DEBUG - 종목 005930 현재가: 199939
2025-07-25 21:11:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:11:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 199939, 목표가: 75000.0
2025-07-25 21:11:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 199939원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:11:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:11:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 199939원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:11:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:11:00,649 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f437c70>
2025-07-25 21:11:00,650 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:11:00,896 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f436170>
2025-07-25 21:11:00,897 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:11:00,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:11:00,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:11:00,898 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:11:00,899 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:11:01,491 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:11:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:11:01,492 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:11:01,492 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:11:01,492 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:11:01,492 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:11:01,493 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:11:01,494 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:11:01,494 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:11:01,495 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:11:01,495 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 199939, 목표가: 76000.0
2025-07-25 21:11:01,496 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 199939원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:11:01,497 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:11:01,497 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 199939원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:11:01,498 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:11:01,498 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:11:01,498 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:11:01,499 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:11:01,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:11:01,499 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:11:01,499 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:11:01,500 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:11:01,500 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:11:01,501 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:11:01,502 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:11:01,502 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:11:01,502 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:11:01,502 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:12:00 KST)" executed successfully
2025-07-25 21:11:58,792 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:11:58,793 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:12:00.392664+09:00 (in 1.599548 seconds)
2025-07-25 21:12:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:12:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:13:00.392664+09:00 (in 59.998600 seconds)
2025-07-25 21:12:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:13:00 KST)" (scheduled at 2025-07-26 06:12:00.392664+09:00)
2025-07-25 21:12:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:12:00.395041
2025-07-25 21:12:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:12:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:12:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:12:00,398 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:12:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:12:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:12:00,399 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:12:00,401 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:12:00,401 - main - DEBUG - 종목 005930 현재가: 71601
2025-07-25 21:12:00,401 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:12:00,401 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:12:00,402 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:12:00,403 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:12:00,403 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:12:00,403 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:13:00 KST)" executed successfully
2025-07-25 21:12:58,796 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:12:58,796 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:13:00.392664+09:00 (in 1.596159 seconds)
2025-07-25 21:13:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:13:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:14:00.392664+09:00 (in 59.998858 seconds)
2025-07-25 21:13:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:14:00 KST)" (scheduled at 2025-07-26 06:13:00.392664+09:00)
2025-07-25 21:13:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:13:00.394549
2025-07-25 21:13:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:13:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:13:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:13:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:13:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:13:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:13:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:13:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:13:00,398 - main - DEBUG - 종목 005930 현재가: 186608
2025-07-25 21:13:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:13:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 186608, 목표가: 75000.0
2025-07-25 21:13:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 186608원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:13:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:13:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 186608원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:13:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:13:00,646 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a58d0>
2025-07-25 21:13:00,647 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:13:00,892 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a6500>
2025-07-25 21:13:00,893 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:13:00,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:13:00,894 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:13:00,894 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:13:00,894 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:13:01,482 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:13:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:13:01,483 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:13:01,484 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:13:01,484 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:13:01,484 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:13:01,485 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:13:01,486 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:13:01,487 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:13:01,487 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:13:01,488 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 186608, 목표가: 76000.0
2025-07-25 21:13:01,489 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 186608원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:13:01,490 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:13:01,490 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 186608원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:13:01,491 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:13:01,493 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:13:01,493 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:13:01,494 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:13:01,494 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:13:01,495 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:13:01,495 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:13:01,495 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:13:01,496 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:13:01,497 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:13:01,498 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:13:01,499 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:13:01,499 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:13:01,500 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:14:00 KST)" executed successfully
2025-07-25 21:13:58,724 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:13:58,725 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:14:00.392664+09:00 (in 1.667111 seconds)
2025-07-25 21:14:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:14:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:15:00.392664+09:00 (in 59.997996 seconds)
2025-07-25 21:14:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:15:00 KST)" (scheduled at 2025-07-26 06:14:00.392664+09:00)
2025-07-25 21:14:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:14:00.396061
2025-07-25 21:14:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:14:00,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:14:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:14:00,401 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:14:00,401 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:14:00,401 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:14:00,402 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:14:00,404 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:14:00,405 - main - DEBUG - 종목 005930 현재가: 72115
2025-07-25 21:14:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:14:00,405 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:14:00,406 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:14:00,406 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:14:00,406 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:14:00,407 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:15:00 KST)" executed successfully
2025-07-25 21:14:58,775 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:14:58,776 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:15:00.392664+09:00 (in 1.616533 seconds)
2025-07-25 21:15:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:15:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:16:00.392664+09:00 (in 59.998733 seconds)
2025-07-25 21:15:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:16:00 KST)" (scheduled at 2025-07-26 06:15:00.392664+09:00)
2025-07-25 21:15:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:15:00.394613
2025-07-25 21:15:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:15:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:15:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:15:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:15:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:15:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:15:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:15:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:15:00,398 - main - DEBUG - 종목 005930 현재가: 133288
2025-07-25 21:15:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:15:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 133288, 목표가: 75000.0
2025-07-25 21:15:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 133288원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:15:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:15:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 133288원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:15:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:15:00,666 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7c70>
2025-07-25 21:15:00,667 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:15:00,935 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a55d0>
2025-07-25 21:15:00,936 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:15:00,936 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:15:00,936 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:15:00,937 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:15:00,937 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:15:01,536 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:15:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:15:01,537 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:15:01,537 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:15:01,537 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:15:01,538 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:15:01,538 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:15:01,539 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:15:01,539 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:15:01,540 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:15:01,540 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 133288, 목표가: 76000.0
2025-07-25 21:15:01,541 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 133288원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:15:01,541 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:15:01,542 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 133288원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:15:01,543 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:15:01,543 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:15:01,543 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:15:01,544 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:15:01,544 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:15:01,544 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:15:01,544 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:15:01,545 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:15:01,545 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:15:01,546 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:15:01,547 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:15:01,547 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:15:01,547 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:15:01,547 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:16:00 KST)" executed successfully
2025-07-25 21:15:58,768 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:15:58,769 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:16:00.392664+09:00 (in 1.623339 seconds)
2025-07-25 21:16:00,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:16:00,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:17:00.392664+09:00 (in 59.997628 seconds)
2025-07-25 21:16:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:17:00 KST)" (scheduled at 2025-07-26 06:16:00.392664+09:00)
2025-07-25 21:16:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:16:00.395691
2025-07-25 21:16:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:16:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:16:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:16:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:16:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:16:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:16:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:16:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:16:00,399 - main - DEBUG - 종목 005930 현재가: 132630
2025-07-25 21:16:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:16:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 132630, 목표가: 75000.0
2025-07-25 21:16:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 132630원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:16:00,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:16:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 132630원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:16:00,403 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:16:00,646 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a6fb0>
2025-07-25 21:16:00,646 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:16:00,896 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a6bf0>
2025-07-25 21:16:00,897 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:16:00,897 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:16:00,897 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:16:00,898 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:16:00,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:16:01,485 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:16:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:16:01,486 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:16:01,486 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:16:01,486 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:16:01,486 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:16:01,487 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:16:01,488 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:16:01,488 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:16:01,488 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:16:01,489 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 132630, 목표가: 76000.0
2025-07-25 21:16:01,490 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 132630원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:16:01,491 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:16:01,491 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 132630원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:16:01,492 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:16:01,492 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:16:01,492 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:16:01,493 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:16:01,493 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:16:01,494 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:16:01,494 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:16:01,494 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:16:01,495 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:16:01,495 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:16:01,496 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:16:01,496 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:16:01,497 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:16:01,497 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:17:00 KST)" executed successfully
2025-07-25 21:16:58,758 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:16:58,759 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:17:00.392664+09:00 (in 1.633633 seconds)
2025-07-25 21:17:00,396 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:17:00,396 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:18:00.392664+09:00 (in 59.995766 seconds)
2025-07-25 21:17:00,397 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:18:00 KST)" (scheduled at 2025-07-26 06:17:00.392664+09:00)
2025-07-25 21:17:00,397 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:17:00.397748
2025-07-25 21:17:00,397 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:17:00,398 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:17:00,398 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:17:00,400 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:17:00,400 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:17:00,400 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:17:00,400 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:17:00,401 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:17:00,402 - main - DEBUG - 종목 005930 현재가: 191865
2025-07-25 21:17:00,402 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:17:00,402 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 191865, 목표가: 75000.0
2025-07-25 21:17:00,403 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 191865원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:17:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:17:00,404 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 191865원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:17:00,405 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:17:00,661 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8aad0>
2025-07-25 21:17:00,661 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:17:00,910 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8ab00>
2025-07-25 21:17:00,911 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:17:00,912 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:17:00,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:17:00,912 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:17:00,913 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:17:01,512 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:17:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:17:01,513 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:17:01,513 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:17:01,514 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:17:01,514 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:17:01,514 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:17:01,515 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:17:01,516 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:17:01,516 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:17:01,516 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 191865, 목표가: 76000.0
2025-07-25 21:17:01,518 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 191865원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:17:01,518 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:17:01,518 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 191865원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:17:01,520 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:17:01,520 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:17:01,521 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:17:01,521 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:17:01,521 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:17:01,522 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:17:01,522 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:17:01,522 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:17:01,523 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:17:01,524 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:17:01,524 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:17:01,524 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:17:01,525 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:17:01,525 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:18:00 KST)" executed successfully
2025-07-25 21:17:58,740 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:17:58,741 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:18:00.392664+09:00 (in 1.651678 seconds)
2025-07-25 21:18:00,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:18:00,398 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:19:00.392664+09:00 (in 59.994231 seconds)
2025-07-25 21:18:00,398 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:19:00 KST)" (scheduled at 2025-07-26 06:18:00.392664+09:00)
2025-07-25 21:18:00,400 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:18:00.400315
2025-07-25 21:18:00,400 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:18:00,400 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:18:00,400 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:18:00,402 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:18:00,402 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:18:00,403 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:18:00,403 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:18:00,404 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:18:00,405 - main - DEBUG - 종목 005930 현재가: 150193
2025-07-25 21:18:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:18:00,405 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 150193, 목표가: 75000.0
2025-07-25 21:18:00,406 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 150193원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:18:00,406 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:18:00,407 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 150193원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:18:00,407 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:18:00,664 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a41f0>
2025-07-25 21:18:00,665 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:18:00,910 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a4d00>
2025-07-25 21:18:00,911 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:18:00,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:18:00,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:18:00,912 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:18:00,912 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:18:01,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:18:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:18:01,498 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:18:01,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:18:01,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:18:01,499 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:18:01,499 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:18:01,500 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:18:01,500 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:18:01,500 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:18:01,501 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 150193, 목표가: 76000.0
2025-07-25 21:18:01,502 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 150193원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:18:01,503 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:18:01,503 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 150193원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:18:01,504 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:18:01,505 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:18:01,505 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:18:01,505 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:18:01,505 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:18:01,506 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:18:01,506 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:18:01,506 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:18:01,507 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:18:01,507 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:18:01,508 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:18:01,508 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:18:01,508 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:18:01,509 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:19:00 KST)" executed successfully
2025-07-25 21:18:58,720 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:18:58,721 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:19:00.392664+09:00 (in 1.671403 seconds)
2025-07-25 21:19:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:19:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:20:00.392664+09:00 (in 59.999163 seconds)
2025-07-25 21:19:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:20:00 KST)" (scheduled at 2025-07-26 06:19:00.392664+09:00)
2025-07-25 21:19:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:19:00.394141
2025-07-25 21:19:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:19:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:19:00,394 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:19:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:19:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:19:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:19:00,396 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:19:00,397 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:19:00,397 - main - DEBUG - 종목 005930 현재가: 129660
2025-07-25 21:19:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:19:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 129660, 목표가: 75000.0
2025-07-25 21:19:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 129660원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:19:00,399 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:19:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 129660원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:19:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:19:00,656 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8be80>
2025-07-25 21:19:00,656 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:19:00,903 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8b9d0>
2025-07-25 21:19:00,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:19:00,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:19:00,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:19:00,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:19:00,905 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:19:01,495 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:19:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:19:01,495 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:19:01,496 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:19:01,496 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:19:01,496 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:19:01,496 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:19:01,498 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:19:01,498 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:19:01,499 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:19:01,499 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 129660, 목표가: 76000.0
2025-07-25 21:19:01,501 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 129660원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:19:01,501 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:19:01,501 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 129660원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:19:01,502 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:19:01,503 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:19:01,503 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:19:01,503 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:19:01,504 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:19:01,504 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:19:01,504 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:19:01,505 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:19:01,505 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:19:01,506 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:19:01,507 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:19:01,507 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:19:01,507 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:19:01,507 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:20:00 KST)" executed successfully
2025-07-25 21:19:58,750 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:19:58,750 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:20:00.392664+09:00 (in 1.642102 seconds)
2025-07-25 21:20:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:20:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:21:00.392664+09:00 (in 59.997931 seconds)
2025-07-25 21:20:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:21:00 KST)" (scheduled at 2025-07-26 06:20:00.392664+09:00)
2025-07-25 21:20:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:20:00.395815
2025-07-25 21:20:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:20:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:20:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:20:00,401 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:20:00,402 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:20:00,402 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:20:00,402 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:20:00,405 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:20:00,405 - main - DEBUG - 종목 005930 현재가: 186296
2025-07-25 21:20:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:20:00,406 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 186296, 목표가: 75000.0
2025-07-25 21:20:00,408 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 186296원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:20:00,408 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:20:00,409 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 186296원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:20:00,410 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:20:00,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5ab0>
2025-07-25 21:20:00,658 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:20:00,905 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a41c0>
2025-07-25 21:20:00,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:20:00,906 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:20:00,906 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:20:00,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:20:00,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:20:01,505 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:20:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:20:01,505 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:20:01,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:20:01,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:20:01,506 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:20:01,506 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:20:01,508 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:20:01,508 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:20:01,508 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:20:01,508 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 186296, 목표가: 76000.0
2025-07-25 21:20:01,510 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 186296원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:20:01,510 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:20:01,510 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 186296원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:20:01,511 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:20:01,512 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:20:01,512 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:20:01,513 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:20:01,513 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:20:01,513 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:20:01,513 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:20:01,514 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:20:01,514 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:20:01,515 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:20:01,516 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:20:01,517 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:20:01,517 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:20:01,517 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:21:00 KST)" executed successfully
2025-07-25 21:20:58,743 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:20:58,743 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:21:00.392664+09:00 (in 1.649141 seconds)
2025-07-25 21:21:00,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:21:00,396 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:22:00.392664+09:00 (in 59.996573 seconds)
2025-07-25 21:21:00,396 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:22:00 KST)" (scheduled at 2025-07-26 06:21:00.392664+09:00)
2025-07-25 21:21:00,397 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:21:00.397190
2025-07-25 21:21:00,397 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:21:00,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:21:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:21:00,400 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:21:00,401 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:21:00,401 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:21:00,401 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:21:00,404 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:21:00,405 - main - DEBUG - 종목 005930 현재가: 102584
2025-07-25 21:21:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:21:00,405 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 102584, 목표가: 75000.0
2025-07-25 21:21:00,408 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 102584원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:21:00,408 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:21:00,409 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 102584원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:21:00,410 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:21:00,666 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8b0d0>
2025-07-25 21:21:00,667 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:21:00,908 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88a90>
2025-07-25 21:21:00,909 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:21:00,909 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:21:00,909 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:21:00,910 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:21:00,910 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:21:01,515 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:21:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:21:01,516 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:21:01,516 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:21:01,516 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:21:01,517 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:21:01,517 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:21:01,519 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:21:01,520 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:21:01,520 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:21:01,520 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 102584, 목표가: 76000.0
2025-07-25 21:21:01,522 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 102584원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:21:01,522 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:21:01,523 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 102584원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:21:01,524 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:21:01,524 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:21:01,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:21:01,525 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:21:01,525 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:21:01,526 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:21:01,526 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:21:01,527 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:21:01,527 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:21:01,528 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:21:01,529 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:21:01,529 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:21:01,529 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:21:01,529 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:22:00 KST)" executed successfully
2025-07-25 21:21:58,708 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:21:58,708 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:22:00.392664+09:00 (in 1.683951 seconds)
2025-07-25 21:22:00,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:22:00,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:23:00.392664+09:00 (in 59.997101 seconds)
2025-07-25 21:22:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:23:00 KST)" (scheduled at 2025-07-26 06:22:00.392664+09:00)
2025-07-25 21:22:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:22:00.396473
2025-07-25 21:22:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:22:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:22:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:22:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:22:00,399 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:22:00,399 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:22:00,399 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:22:00,401 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:22:00,401 - main - DEBUG - 종목 005930 현재가: 161426
2025-07-25 21:22:00,401 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:22:00,401 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 161426, 목표가: 75000.0
2025-07-25 21:22:00,403 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 161426원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:22:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:22:00,404 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 161426원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:22:00,405 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:22:00,651 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a4d30>
2025-07-25 21:22:00,651 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:22:00,897 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a77f0>
2025-07-25 21:22:00,898 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:22:00,899 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:22:00,899 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:22:00,900 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:22:00,900 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:22:01,483 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:22:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:22:01,483 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:22:01,484 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:22:01,484 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:22:01,484 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:22:01,485 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:22:01,486 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:22:01,486 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:22:01,487 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:22:01,487 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 161426, 목표가: 76000.0
2025-07-25 21:22:01,489 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 161426원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:22:01,490 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:22:01,490 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 161426원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:22:01,491 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:22:01,492 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:22:01,492 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:22:01,493 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:22:01,500 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:22:01,502 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:22:01,503 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:22:01,505 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:22:01,506 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:22:01,507 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:22:01,508 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:22:01,508 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:22:01,509 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:22:01,509 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:23:00 KST)" executed successfully
2025-07-25 21:22:58,728 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:22:58,728 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:23:00.392664+09:00 (in 1.664203 seconds)
2025-07-25 21:23:00,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:23:00,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:24:00.392664+09:00 (in 59.997678 seconds)
2025-07-25 21:23:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:24:00 KST)" (scheduled at 2025-07-26 06:23:00.392664+09:00)
2025-07-25 21:23:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:23:00.395701
2025-07-25 21:23:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:23:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:23:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:23:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:23:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:23:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:23:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:23:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:23:00,400 - main - DEBUG - 종목 005930 현재가: 123621
2025-07-25 21:23:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:23:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 123621, 목표가: 75000.0
2025-07-25 21:23:00,402 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 123621원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:23:00,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:23:00,403 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 123621원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:23:00,404 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:23:00,659 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8a830>
2025-07-25 21:23:00,660 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:23:00,903 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89270>
2025-07-25 21:23:00,903 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:23:00,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:23:00,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:23:00,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:23:00,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:23:01,519 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:23:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:23:01,520 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:23:01,520 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:23:01,520 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:23:01,520 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:23:01,521 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:23:01,522 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:23:01,522 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:23:01,523 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:23:01,523 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 123621, 목표가: 76000.0
2025-07-25 21:23:01,524 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 123621원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:23:01,525 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:23:01,525 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 123621원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:23:01,526 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:23:01,526 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:23:01,527 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:23:01,527 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:23:01,527 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:23:01,528 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:23:01,528 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:23:01,528 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:23:01,529 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:23:01,530 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:23:01,530 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:23:01,531 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:23:01,531 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:23:01,531 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:24:00 KST)" executed successfully
2025-07-25 21:23:58,719 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:23:58,719 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:24:00.392664+09:00 (in 1.673239 seconds)
2025-07-25 21:24:00,399 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:24:00,399 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:25:00.392664+09:00 (in 59.992949 seconds)
2025-07-25 21:24:00,400 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:25:00 KST)" (scheduled at 2025-07-26 06:24:00.392664+09:00)
2025-07-25 21:24:00,400 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:24:00.400722
2025-07-25 21:24:00,400 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:24:00,401 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:24:00,401 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:24:00,403 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:24:00,403 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:24:00,403 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:24:00,403 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:24:00,405 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:24:00,405 - main - DEBUG - 종목 005930 현재가: 90148
2025-07-25 21:24:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:24:00,405 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 90148, 목표가: 75000.0
2025-07-25 21:24:00,406 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 90148원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:24:00,407 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:24:00,407 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 90148원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:24:00,409 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:24:00,659 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89b10>
2025-07-25 21:24:00,660 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:24:00,918 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da882b0>
2025-07-25 21:24:00,918 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:24:00,920 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:24:00,920 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:24:00,921 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:24:00,921 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:24:01,551 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:24:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:24:01,551 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:24:01,552 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:24:01,552 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:24:01,552 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:24:01,552 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:24:01,554 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:24:01,554 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:24:01,554 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:24:01,554 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 90148, 목표가: 76000.0
2025-07-25 21:24:01,556 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 90148원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:24:01,556 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:24:01,557 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 90148원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:24:01,558 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:24:01,558 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:24:01,558 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:24:01,559 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:24:01,559 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:24:01,559 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:24:01,560 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:24:01,560 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:24:01,560 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:24:01,561 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:24:01,562 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:24:01,562 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:24:01,562 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:24:01,562 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:25:00 KST)" executed successfully
2025-07-25 21:24:58,726 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:24:58,726 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:25:00.392664+09:00 (in 1.665811 seconds)
2025-07-25 21:25:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:25:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:26:00.392664+09:00 (in 59.998602 seconds)
2025-07-25 21:25:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:26:00 KST)" (scheduled at 2025-07-26 06:25:00.392664+09:00)
2025-07-25 21:25:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:25:00.394872
2025-07-25 21:25:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:25:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:25:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:25:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:25:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:25:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:25:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:25:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:25:00,399 - main - DEBUG - 종목 005930 현재가: 64950
2025-07-25 21:25:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:25:00,399 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:25:00,400 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:25:00,400 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:25:00,401 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:25:00,401 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:26:00 KST)" executed successfully
2025-07-25 21:25:58,700 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:25:58,700 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:26:00.392664+09:00 (in 1.692257 seconds)
2025-07-25 21:26:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:26:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:27:00.392664+09:00 (in 59.998452 seconds)
2025-07-25 21:26:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:27:00 KST)" (scheduled at 2025-07-26 06:26:00.392664+09:00)
2025-07-25 21:26:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:26:00.394808
2025-07-25 21:26:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:26:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:26:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:26:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:26:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:26:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:26:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:26:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:26:00,398 - main - DEBUG - 종목 005930 현재가: 175593
2025-07-25 21:26:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:26:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 175593, 목표가: 75000.0
2025-07-25 21:26:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 175593원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:26:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:26:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 175593원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:26:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:26:00,648 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7400>
2025-07-25 21:26:00,649 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:26:00,898 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8b2b0>
2025-07-25 21:26:00,899 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:26:00,899 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:26:00,900 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:26:00,900 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:26:00,900 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:26:01,494 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:26:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:26:01,495 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:26:01,495 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:26:01,495 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:26:01,496 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:26:01,496 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:26:01,497 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:26:01,497 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:26:01,498 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:26:01,498 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 175593, 목표가: 76000.0
2025-07-25 21:26:01,499 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 175593원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:26:01,500 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:26:01,500 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 175593원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:26:01,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:26:01,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:26:01,502 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:26:01,502 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:26:01,502 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:26:01,503 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:26:01,503 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:26:01,503 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:26:01,504 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:26:01,504 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:26:01,505 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:26:01,506 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:26:01,506 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:26:01,506 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:27:00 KST)" executed successfully
2025-07-25 21:26:58,701 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:26:58,702 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:27:00.392664+09:00 (in 1.690523 seconds)
2025-07-25 21:26:59,556 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:26:59,557 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:27:00.392664+09:00 (in 0.835195 seconds)
2025-07-25 21:27:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:27:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:28:00.392664+09:00 (in 59.998319 seconds)
2025-07-25 21:27:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:28:00 KST)" (scheduled at 2025-07-26 06:27:00.392664+09:00)
2025-07-25 21:27:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:27:00.395021
2025-07-25 21:27:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:27:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:27:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:27:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:27:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:27:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:27:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:27:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:27:00,399 - main - DEBUG - 종목 005930 현재가: 90326
2025-07-25 21:27:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:27:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 90326, 목표가: 75000.0
2025-07-25 21:27:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 90326원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:27:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:27:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 90326원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:27:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:27:00,649 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7250>
2025-07-25 21:27:00,649 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:27:00,899 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5510>
2025-07-25 21:27:00,899 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:27:00,900 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:27:00,900 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:27:00,900 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:27:00,901 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:27:01,501 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:27:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:27:01,501 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:27:01,502 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:27:01,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:27:01,502 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:27:01,502 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:27:01,503 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:27:01,504 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:27:01,504 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:27:01,504 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 90326, 목표가: 76000.0
2025-07-25 21:27:01,506 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 90326원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:27:01,506 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:27:01,506 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 90326원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:27:01,507 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:27:01,508 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:27:01,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:27:01,508 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:27:01,509 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:27:01,509 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:27:01,509 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:27:01,509 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:27:01,510 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:27:01,511 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:27:01,511 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:27:01,512 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:27:01,512 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:27:01,512 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:28:00 KST)" executed successfully
2025-07-25 21:27:58,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:27:58,667 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:28:00.392664+09:00 (in 1.724972 seconds)
2025-07-25 21:28:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:28:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:29:00.392664+09:00 (in 59.998669 seconds)
2025-07-25 21:28:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:29:00 KST)" (scheduled at 2025-07-26 06:28:00.392664+09:00)
2025-07-25 21:28:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:28:00.395088
2025-07-25 21:28:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:28:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:28:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:28:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:28:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:28:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:28:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:28:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:28:00,400 - main - DEBUG - 종목 005930 현재가: 101828
2025-07-25 21:28:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:28:00,401 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 101828, 목표가: 75000.0
2025-07-25 21:28:00,402 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 101828원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:28:00,403 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:28:00,403 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 101828원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:28:00,404 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:28:00,653 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8ae00>
2025-07-25 21:28:00,654 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:28:00,904 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89a80>
2025-07-25 21:28:00,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:28:00,905 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:28:00,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:28:00,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:28:00,906 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:28:01,543 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:28:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:28:01,543 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:28:01,544 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:28:01,544 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:28:01,544 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:28:01,544 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:28:01,546 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:28:01,546 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:28:01,546 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:28:01,547 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 101828, 목표가: 76000.0
2025-07-25 21:28:01,548 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 101828원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:28:01,548 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:28:01,549 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 101828원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:28:01,550 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:28:01,550 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:28:01,550 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:28:01,551 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:28:01,551 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:28:01,551 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:28:01,551 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:28:01,552 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:28:01,552 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:28:01,553 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:28:01,554 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:28:01,554 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:28:01,554 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:28:01,555 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:29:00 KST)" executed successfully
2025-07-25 21:28:58,687 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:28:58,688 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:29:00.392664+09:00 (in 1.704197 seconds)
2025-07-25 21:29:00,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:29:00,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:30:00.392664+09:00 (in 59.997485 seconds)
2025-07-25 21:29:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:30:00 KST)" (scheduled at 2025-07-26 06:29:00.392664+09:00)
2025-07-25 21:29:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:29:00.395921
2025-07-25 21:29:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:29:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:29:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:29:00,398 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:29:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:29:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:29:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:29:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:29:00,400 - main - DEBUG - 종목 005930 현재가: 95805
2025-07-25 21:29:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:29:00,401 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 95805, 목표가: 75000.0
2025-07-25 21:29:00,402 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 95805원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:29:00,403 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:29:00,403 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 95805원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:29:00,404 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:29:00,658 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f4372e0>
2025-07-25 21:29:00,658 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:29:00,905 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89300>
2025-07-25 21:29:00,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:29:00,906 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:29:00,906 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:29:00,907 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:29:00,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:29:01,503 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:29:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:29:01,504 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:29:01,504 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:29:01,505 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:29:01,505 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:29:01,505 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:29:01,506 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:29:01,507 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:29:01,507 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:29:01,507 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 95805, 목표가: 76000.0
2025-07-25 21:29:01,508 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 95805원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:29:01,509 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:29:01,509 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 95805원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:29:01,511 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:29:01,512 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:29:01,512 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:29:01,512 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:29:01,512 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:29:01,513 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:29:01,513 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:29:01,513 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:29:01,514 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:29:01,514 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:29:01,515 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:29:01,516 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:29:01,516 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:29:01,516 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:30:00 KST)" executed successfully
2025-07-25 21:29:58,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:29:58,694 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:30:00.392664+09:00 (in 1.697931 seconds)
2025-07-25 21:30:00,399 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:30:00,399 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:31:00.392664+09:00 (in 59.992710 seconds)
2025-07-25 21:30:00,400 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:31:00 KST)" (scheduled at 2025-07-26 06:30:00.392664+09:00)
2025-07-25 21:30:00,400 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:30:00.400731
2025-07-25 21:30:00,400 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:30:00,401 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:30:00,401 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:30:00,403 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:30:00,403 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:30:00,403 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:30:00,403 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:30:00,405 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:30:00,405 - main - DEBUG - 종목 005930 현재가: 96078
2025-07-25 21:30:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:30:00,405 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 96078, 목표가: 75000.0
2025-07-25 21:30:00,406 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 96078원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:30:00,407 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:30:00,407 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 96078원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:30:00,408 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:30:00,666 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8bac0>
2025-07-25 21:30:00,666 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:30:00,916 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8a290>
2025-07-25 21:30:00,917 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:30:00,917 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:30:00,917 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:30:00,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:30:00,918 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:30:01,516 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:30:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:30:01,517 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:30:01,517 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:30:01,517 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:30:01,518 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:30:01,518 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:30:01,519 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:30:01,520 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:30:01,520 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:30:01,520 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 96078, 목표가: 76000.0
2025-07-25 21:30:01,522 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 96078원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:30:01,522 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:30:01,522 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 96078원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:30:01,523 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:30:01,524 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:30:01,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:30:01,524 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:30:01,524 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:30:01,525 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:30:01,525 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:30:01,525 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:30:01,526 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:30:01,526 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:30:01,527 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:30:01,527 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:30:01,527 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:30:01,528 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:31:00 KST)" executed successfully
2025-07-25 21:30:58,684 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:30:58,684 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:31:00.392664+09:00 (in 1.707715 seconds)
2025-07-25 21:31:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:31:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:32:00.392664+09:00 (in 59.998707 seconds)
2025-07-25 21:31:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:32:00 KST)" (scheduled at 2025-07-26 06:31:00.392664+09:00)
2025-07-25 21:31:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:31:00.394706
2025-07-25 21:31:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:31:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:31:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:31:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:31:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:31:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:31:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:31:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:31:00,399 - main - DEBUG - 종목 005930 현재가: 146672
2025-07-25 21:31:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:31:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 146672, 목표가: 75000.0
2025-07-25 21:31:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 146672원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:31:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:31:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 146672원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:31:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:31:00,646 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a4460>
2025-07-25 21:31:00,646 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:31:00,895 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f436170>
2025-07-25 21:31:00,896 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:31:00,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:31:00,896 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:31:00,897 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:31:00,897 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:31:01,502 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:31:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:31:01,503 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:31:01,503 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:31:01,504 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:31:01,504 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:31:01,504 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:31:01,505 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:31:01,506 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:31:01,506 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:31:01,506 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 146672, 목표가: 76000.0
2025-07-25 21:31:01,507 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 146672원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:31:01,508 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:31:01,508 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 146672원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:31:01,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:31:01,509 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:31:01,510 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:31:01,510 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:31:01,510 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:31:01,511 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:31:01,511 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:31:01,511 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:31:01,512 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:31:01,512 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:31:01,513 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:31:01,513 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:31:01,513 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:31:01,514 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:32:00 KST)" executed successfully
2025-07-25 21:31:58,656 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:31:58,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:32:00.392664+09:00 (in 1.736241 seconds)
2025-07-25 21:32:00,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:32:00,396 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:33:00.392664+09:00 (in 59.996682 seconds)
2025-07-25 21:32:00,396 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:33:00 KST)" (scheduled at 2025-07-26 06:32:00.392664+09:00)
2025-07-25 21:32:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:32:00.396712
2025-07-25 21:32:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:32:00,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:32:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:32:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:32:00,399 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:32:00,400 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:32:00,400 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:32:00,401 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:32:00,401 - main - DEBUG - 종목 005930 현재가: 93036
2025-07-25 21:32:00,402 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:32:00,402 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 93036, 목표가: 75000.0
2025-07-25 21:32:00,403 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 93036원이 목표가 75000.0원(gte)에 도달했...
2025-07-25 21:32:00,403 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:32:00,404 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 93036원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:32:00,404 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:32:00,658 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7640>
2025-07-25 21:32:00,658 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:32:00,905 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f436500>
2025-07-25 21:32:00,906 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:32:00,907 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:32:00,907 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:32:00,908 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:32:00,908 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:32:01,493 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:32:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:32:01,494 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:32:01,495 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:32:01,495 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:32:01,495 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:32:01,495 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:32:01,496 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:32:01,497 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:32:01,497 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:32:01,497 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 93036, 목표가: 76000.0
2025-07-25 21:32:01,499 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 93036원이 목표가 76000.0원(gte)에 도달했...
2025-07-25 21:32:01,499 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:32:01,500 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 93036원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:32:01,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:32:01,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:32:01,501 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:32:01,502 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:32:01,502 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:32:01,502 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:32:01,502 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:32:01,503 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:32:01,503 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:32:01,504 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:32:01,505 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:32:01,505 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:32:01,505 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:32:01,505 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:33:00 KST)" executed successfully
2025-07-25 21:32:58,691 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:32:58,692 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:33:00.392664+09:00 (in 1.700666 seconds)
2025-07-25 21:33:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:33:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:34:00.392664+09:00 (in 59.998873 seconds)
2025-07-25 21:33:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:34:00 KST)" (scheduled at 2025-07-26 06:33:00.392664+09:00)
2025-07-25 21:33:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:33:00.394659
2025-07-25 21:33:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:33:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:33:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:33:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:33:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:33:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:33:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:33:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:33:00,400 - main - DEBUG - 종목 005930 현재가: 189817
2025-07-25 21:33:00,401 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:33:00,401 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189817, 목표가: 75000.0
2025-07-25 21:33:00,403 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 189817원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:33:00,403 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:33:00,403 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 189817원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:33:00,404 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:33:00,657 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8ba90>
2025-07-25 21:33:00,658 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:33:00,902 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8af80>
2025-07-25 21:33:00,903 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:33:00,903 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:33:00,904 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:33:00,904 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:33:00,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:33:01,494 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:33:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:33:01,495 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:33:01,495 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:33:01,495 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:33:01,495 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:33:01,496 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:33:01,497 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:33:01,497 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:33:01,498 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:33:01,498 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189817, 목표가: 76000.0
2025-07-25 21:33:01,499 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 189817원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:33:01,500 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:33:01,500 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 189817원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:33:01,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:33:01,502 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:33:01,502 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:33:01,502 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:33:01,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:33:01,503 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:33:01,503 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:33:01,503 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:33:01,504 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:33:01,505 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:33:01,505 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:33:01,506 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:33:01,506 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:33:01,506 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:34:00 KST)" executed successfully
2025-07-25 21:33:58,638 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:33:58,639 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:34:00.392664+09:00 (in 1.753654 seconds)
2025-07-25 21:34:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:34:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:35:00.392664+09:00 (in 59.998955 seconds)
2025-07-25 21:34:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:35:00 KST)" (scheduled at 2025-07-26 06:34:00.392664+09:00)
2025-07-25 21:34:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:34:00.394494
2025-07-25 21:34:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:34:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:34:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:34:00,406 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:34:00,407 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:34:00,407 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:34:00,407 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:34:00,409 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:34:00,409 - main - DEBUG - 종목 005930 현재가: 60283
2025-07-25 21:34:00,410 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:34:00,410 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:34:00,411 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:34:00,411 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:34:00,411 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:34:00,411 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:35:00 KST)" executed successfully
2025-07-25 21:34:58,682 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:34:58,683 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:35:00.392664+09:00 (in 1.709660 seconds)
2025-07-25 21:35:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:35:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:36:00.392664+09:00 (in 59.998732 seconds)
2025-07-25 21:35:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:36:00 KST)" (scheduled at 2025-07-26 06:35:00.392664+09:00)
2025-07-25 21:35:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:35:00.394660
2025-07-25 21:35:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:35:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:35:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:35:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:35:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:35:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:35:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:35:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:35:00,399 - main - DEBUG - 종목 005930 현재가: 73757
2025-07-25 21:35:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:35:00,399 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:35:00,400 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:35:00,400 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:35:00,400 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:35:00,400 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:36:00 KST)" executed successfully
2025-07-25 21:35:58,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:35:58,656 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:36:00.392664+09:00 (in 1.736674 seconds)
2025-07-25 21:36:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:36:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:37:00.392664+09:00 (in 59.998720 seconds)
2025-07-25 21:36:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:37:00 KST)" (scheduled at 2025-07-26 06:36:00.392664+09:00)
2025-07-25 21:36:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:36:00.394806
2025-07-25 21:36:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:36:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:36:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:36:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:36:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:36:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:36:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:36:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:36:00,398 - main - DEBUG - 종목 005930 현재가: 156492
2025-07-25 21:36:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:36:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 156492, 목표가: 75000.0
2025-07-25 21:36:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 156492원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:36:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:36:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 156492원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:36:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:36:00,652 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8b2b0>
2025-07-25 21:36:00,652 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:36:00,901 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8bee0>
2025-07-25 21:36:00,902 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:36:00,903 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:36:00,903 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:36:00,903 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:36:00,903 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:36:01,501 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:36:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:36:01,502 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:36:01,502 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:36:01,502 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:36:01,503 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:36:01,503 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:36:01,505 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:36:01,505 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:36:01,506 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:36:01,506 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 156492, 목표가: 76000.0
2025-07-25 21:36:01,507 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 156492원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:36:01,508 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:36:01,508 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 156492원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:36:01,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:36:01,510 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:36:01,510 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:36:01,510 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:36:01,511 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:36:01,511 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:36:01,511 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:36:01,512 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:36:01,512 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:36:01,513 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:36:01,514 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:36:01,514 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:36:01,514 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:36:01,515 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:37:00 KST)" executed successfully
2025-07-25 21:36:58,618 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:36:58,618 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:37:00.392664+09:00 (in 1.774081 seconds)
2025-07-25 21:37:00,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:37:00,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:38:00.392664+09:00 (in 59.996796 seconds)
2025-07-25 21:37:00,396 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:38:00 KST)" (scheduled at 2025-07-26 06:37:00.392664+09:00)
2025-07-25 21:37:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:37:00.396598
2025-07-25 21:37:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:37:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:37:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:37:00,398 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:37:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:37:00,399 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:37:00,399 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:37:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:37:00,400 - main - DEBUG - 종목 005930 현재가: 147019
2025-07-25 21:37:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:37:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 147019, 목표가: 75000.0
2025-07-25 21:37:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 147019원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:37:00,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:37:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 147019원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:37:00,403 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:37:00,645 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a7130>
2025-07-25 21:37:00,646 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:37:00,894 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a72e0>
2025-07-25 21:37:00,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:37:00,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:37:00,896 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:37:00,896 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:37:00,896 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:37:01,516 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:37:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:37:01,517 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:37:01,517 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:37:01,517 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:37:01,518 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:37:01,518 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:37:01,519 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:37:01,520 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:37:01,520 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:37:01,520 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 147019, 목표가: 76000.0
2025-07-25 21:37:01,521 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 147019원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:37:01,522 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:37:01,522 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 147019원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:37:01,523 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:37:01,524 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:37:01,524 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:37:01,524 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:37:01,524 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:37:01,525 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:37:01,525 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:37:01,525 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:37:01,526 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:37:01,527 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:37:01,527 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:37:01,528 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:37:01,528 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:37:01,528 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:38:00 KST)" executed successfully
2025-07-25 21:37:58,633 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:37:58,633 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:38:00.392664+09:00 (in 1.758894 seconds)
2025-07-25 21:38:00,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:38:00,396 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:39:00.392664+09:00 (in 59.996597 seconds)
2025-07-25 21:38:00,396 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:39:00 KST)" (scheduled at 2025-07-26 06:38:00.392664+09:00)
2025-07-25 21:38:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:38:00.396934
2025-07-25 21:38:00,397 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:38:00,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:38:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:38:00,400 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:38:00,401 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:38:00,401 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:38:00,401 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:38:00,403 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:38:00,403 - main - DEBUG - 종목 005930 현재가: 74356
2025-07-25 21:38:00,403 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:38:00,403 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:38:00,404 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:38:00,405 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:38:00,405 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:38:00,405 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:39:00 KST)" executed successfully
2025-07-25 21:38:58,654 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:38:58,654 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:39:00.392664+09:00 (in 1.737931 seconds)
2025-07-25 21:39:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:39:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:40:00.392664+09:00 (in 59.998845 seconds)
2025-07-25 21:39:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:40:00 KST)" (scheduled at 2025-07-26 06:39:00.392664+09:00)
2025-07-25 21:39:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:39:00.394438
2025-07-25 21:39:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:39:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:39:00,394 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:39:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:39:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:39:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:39:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:39:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:39:00,401 - main - DEBUG - 종목 005930 현재가: 150606
2025-07-25 21:39:00,401 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:39:00,401 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 150606, 목표가: 75000.0
2025-07-25 21:39:00,403 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 150606원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:39:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:39:00,405 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 150606원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:39:00,414 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:39:00,721 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5ff0>
2025-07-25 21:39:00,721 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:39:00,967 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5000>
2025-07-25 21:39:00,968 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:39:00,969 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:39:00,969 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:39:00,970 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:39:00,970 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:39:01,563 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:39:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:39:01,563 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:39:01,564 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:39:01,564 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:39:01,564 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:39:01,565 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:39:01,566 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:39:01,566 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:39:01,567 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:39:01,567 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 150606, 목표가: 76000.0
2025-07-25 21:39:01,568 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 150606원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:39:01,568 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:39:01,569 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 150606원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:39:01,570 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:39:01,570 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:39:01,570 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:39:01,571 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:39:01,571 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:39:01,572 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:39:01,572 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:39:01,572 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:39:01,573 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:39:01,573 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:39:01,574 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:39:01,574 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:39:01,574 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:39:01,575 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:40:00 KST)" executed successfully
2025-07-25 21:39:58,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:39:58,639 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:40:00.392664+09:00 (in 1.753023 seconds)
2025-07-25 21:40:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:40:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:41:00.392664+09:00 (in 59.998667 seconds)
2025-07-25 21:40:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:41:00 KST)" (scheduled at 2025-07-26 06:40:00.392664+09:00)
2025-07-25 21:40:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:40:00.394993
2025-07-25 21:40:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:40:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:40:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:40:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:40:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:40:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:40:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:40:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:40:00,399 - main - DEBUG - 종목 005930 현재가: 178599
2025-07-25 21:40:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:40:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 178599, 목표가: 75000.0
2025-07-25 21:40:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 178599원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:40:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:40:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 178599원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:40:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:40:00,658 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89030>
2025-07-25 21:40:00,659 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:40:00,902 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8be80>
2025-07-25 21:40:00,902 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:40:00,903 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:40:00,903 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:40:00,903 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:40:00,904 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:40:01,491 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:40:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:40:01,491 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:40:01,492 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:40:01,492 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:40:01,492 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:40:01,492 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:40:01,493 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:40:01,494 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:40:01,494 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:40:01,494 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 178599, 목표가: 76000.0
2025-07-25 21:40:01,496 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 178599원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:40:01,496 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:40:01,497 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 178599원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:40:01,497 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:40:01,498 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:40:01,498 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:40:01,499 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:40:01,499 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:40:01,499 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:40:01,499 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:40:01,500 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:40:01,500 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:40:01,501 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:40:01,502 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:40:01,502 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:40:01,502 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:40:01,503 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:41:00 KST)" executed successfully
2025-07-25 21:40:58,606 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:40:58,607 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:41:00.392664+09:00 (in 1.785258 seconds)
2025-07-25 21:41:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:41:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:42:00.392664+09:00 (in 59.999002 seconds)
2025-07-25 21:41:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:42:00 KST)" (scheduled at 2025-07-26 06:41:00.392664+09:00)
2025-07-25 21:41:00,405 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:41:00.405256
2025-07-25 21:41:00,405 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:41:00,405 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:41:00,405 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:41:00,409 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:41:00,409 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:41:00,409 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:41:00,409 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:41:00,411 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:41:00,412 - main - DEBUG - 종목 005930 현재가: 112580
2025-07-25 21:41:00,412 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:41:00,412 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 112580, 목표가: 75000.0
2025-07-25 21:41:00,414 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 112580원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:41:00,415 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:41:00,416 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 112580원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:41:00,416 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:41:00,678 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8a470>
2025-07-25 21:41:00,678 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:41:00,919 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8a6b0>
2025-07-25 21:41:00,919 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:41:00,920 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:41:00,920 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:41:00,921 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:41:00,921 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:41:01,505 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:41:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:41:01,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:41:01,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:41:01,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:41:01,507 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:41:01,507 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:41:01,508 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:41:01,508 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:41:01,509 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:41:01,509 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 112580, 목표가: 76000.0
2025-07-25 21:41:01,510 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 112580원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:41:01,511 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:41:01,511 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 112580원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:41:01,512 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:41:01,512 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:41:01,513 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:41:01,513 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:41:01,513 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:41:01,514 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:41:01,514 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:41:01,514 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:41:01,515 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:41:01,515 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:41:01,516 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:41:01,516 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:41:01,516 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:41:01,517 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:42:00 KST)" executed successfully
2025-07-25 21:41:58,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:41:58,639 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:42:00.392664+09:00 (in 1.752993 seconds)
2025-07-25 21:42:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:42:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:43:00.392664+09:00 (in 59.998958 seconds)
2025-07-25 21:42:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:43:00 KST)" (scheduled at 2025-07-26 06:42:00.392664+09:00)
2025-07-25 21:42:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:42:00.394365
2025-07-25 21:42:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:42:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:42:00,394 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:42:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:42:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:42:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:42:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:42:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:42:00,399 - main - DEBUG - 종목 005930 현재가: 185004
2025-07-25 21:42:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:42:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 185004, 목표가: 75000.0
2025-07-25 21:42:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 185004원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:42:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:42:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 185004원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:42:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:42:00,652 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5f60>
2025-07-25 21:42:00,653 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:42:00,901 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a5ff0>
2025-07-25 21:42:00,902 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:42:00,902 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:42:00,902 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:42:00,903 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:42:00,903 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:42:01,493 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:42:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:42:01,493 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:42:01,494 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:42:01,494 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:42:01,494 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:42:01,495 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:42:01,496 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:42:01,497 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:42:01,497 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:42:01,497 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 185004, 목표가: 76000.0
2025-07-25 21:42:01,499 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 185004원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:42:01,499 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:42:01,500 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 185004원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:42:01,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:42:01,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:42:01,502 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:42:01,502 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:42:01,503 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:42:01,503 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:42:01,503 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:42:01,504 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:42:01,504 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:42:01,505 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:42:01,506 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:42:01,506 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:42:01,506 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:42:01,507 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:43:00 KST)" executed successfully
2025-07-25 21:42:58,582 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:42:58,583 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:43:00.392664+09:00 (in 1.809578 seconds)
2025-07-25 21:43:00,399 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:43:00,400 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:44:00.392664+09:00 (in 59.992650 seconds)
2025-07-25 21:43:00,400 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:44:00 KST)" (scheduled at 2025-07-26 06:43:00.392664+09:00)
2025-07-25 21:43:00,400 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:43:00.400765
2025-07-25 21:43:00,401 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:43:00,401 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:43:00,401 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:43:00,403 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:43:00,403 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:43:00,403 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:43:00,403 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:43:00,405 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:43:00,405 - main - DEBUG - 종목 005930 현재가: 72929
2025-07-25 21:43:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:43:00,405 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:43:00,406 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:43:00,406 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:43:00,406 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:43:00,406 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:44:00 KST)" executed successfully
2025-07-25 21:43:58,627 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:43:58,628 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:44:00.392664+09:00 (in 1.764390 seconds)
2025-07-25 21:43:59,498 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:43:59,499 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:44:00.392664+09:00 (in 0.893671 seconds)
2025-07-25 21:44:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:44:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:45:00.392664+09:00 (in 59.998112 seconds)
2025-07-25 21:44:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:45:00 KST)" (scheduled at 2025-07-26 06:44:00.392664+09:00)
2025-07-25 21:44:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:44:00.395250
2025-07-25 21:44:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:44:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:44:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:44:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:44:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:44:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:44:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:44:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:44:00,400 - main - DEBUG - 종목 005930 현재가: 142912
2025-07-25 21:44:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:44:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 142912, 목표가: 75000.0
2025-07-25 21:44:00,402 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 142912원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:44:00,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:44:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 142912원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:44:00,403 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:44:00,660 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a4730>
2025-07-25 21:44:00,661 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:44:00,916 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f4373a0>
2025-07-25 21:44:00,917 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:44:00,918 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:44:00,918 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:44:00,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:44:00,919 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:44:01,512 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:44:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:44:01,512 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:44:01,513 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:44:01,513 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:44:01,513 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:44:01,513 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:44:01,514 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:44:01,515 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:44:01,515 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:44:01,515 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 142912, 목표가: 76000.0
2025-07-25 21:44:01,517 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 142912원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:44:01,517 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:44:01,518 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 142912원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:44:01,519 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:44:01,519 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:44:01,519 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:44:01,520 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:44:01,520 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:44:01,521 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:44:01,521 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:44:01,521 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:44:01,522 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:44:01,523 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:44:01,523 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:44:01,524 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:44:01,524 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:44:01,524 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:45:00 KST)" executed successfully
2025-07-25 21:44:58,608 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:44:58,608 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:45:00.392664+09:00 (in 1.783728 seconds)
2025-07-25 21:45:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:45:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:46:00.392664+09:00 (in 59.998249 seconds)
2025-07-25 21:45:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:46:00 KST)" (scheduled at 2025-07-26 06:45:00.392664+09:00)
2025-07-25 21:45:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:45:00.396136
2025-07-25 21:45:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:45:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:45:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:45:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:45:00,400 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:45:00,400 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:45:00,400 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:45:00,404 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:45:00,406 - main - DEBUG - 종목 005930 현재가: 56463
2025-07-25 21:45:00,406 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:45:00,406 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:45:00,408 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:45:00,409 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:45:00,409 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:45:00,409 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:46:00 KST)" executed successfully
2025-07-25 21:45:58,608 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:45:58,608 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:46:00.392664+09:00 (in 1.783738 seconds)
2025-07-25 21:46:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:46:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:47:00.392664+09:00 (in 59.998567 seconds)
2025-07-25 21:46:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:47:00 KST)" (scheduled at 2025-07-26 06:46:00.392664+09:00)
2025-07-25 21:46:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:46:00.395190
2025-07-25 21:46:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:46:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:46:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:46:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:46:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:46:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:46:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:46:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:46:00,399 - main - DEBUG - 종목 005930 현재가: 189858
2025-07-25 21:46:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:46:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189858, 목표가: 75000.0
2025-07-25 21:46:00,400 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 189858원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:46:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:46:00,401 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 189858원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:46:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:46:00,661 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89a20>
2025-07-25 21:46:00,661 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:46:00,909 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89870>
2025-07-25 21:46:00,910 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:46:00,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:46:00,911 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:46:00,911 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:46:00,911 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:46:01,574 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:46:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:46:01,574 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:46:01,575 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:46:01,575 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:46:01,575 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:46:01,575 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:46:01,577 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:46:01,577 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:46:01,577 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:46:01,577 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189858, 목표가: 76000.0
2025-07-25 21:46:01,579 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 189858원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:46:01,579 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:46:01,579 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 189858원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:46:01,580 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:46:01,581 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:46:01,581 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:46:01,582 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:46:01,582 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:46:01,582 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:46:01,582 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:46:01,583 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:46:01,583 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:46:01,584 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:46:01,585 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:46:01,585 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:46:01,585 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:46:01,585 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:47:00 KST)" executed successfully
2025-07-25 21:46:58,575 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:46:58,575 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:47:00.392664+09:00 (in 1.817069 seconds)
2025-07-25 21:47:00,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:47:00,395 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:48:00.392664+09:00 (in 59.997404 seconds)
2025-07-25 21:47:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:48:00 KST)" (scheduled at 2025-07-26 06:47:00.392664+09:00)
2025-07-25 21:47:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:47:00.396030
2025-07-25 21:47:00,396 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:47:00,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:47:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:47:00,398 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:47:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:47:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:47:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:47:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:47:00,400 - main - DEBUG - 종목 005930 현재가: 177033
2025-07-25 21:47:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:47:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 177033, 목표가: 75000.0
2025-07-25 21:47:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 177033원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:47:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:47:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 177033원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:47:00,404 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:47:00,655 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f37ccd0>
2025-07-25 21:47:00,656 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:47:00,921 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f37cc70>
2025-07-25 21:47:00,921 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:47:00,922 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:47:00,922 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:47:00,923 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:47:00,923 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:47:01,514 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:47:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:47:01,514 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:47:01,515 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:47:01,515 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:47:01,515 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:47:01,515 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:47:01,517 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:47:01,517 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:47:01,517 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:47:01,518 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 177033, 목표가: 76000.0
2025-07-25 21:47:01,519 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 177033원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:47:01,520 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:47:01,520 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 177033원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:47:01,521 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:47:01,522 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:47:01,522 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:47:01,523 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:47:01,523 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:47:01,524 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:47:01,524 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:47:01,524 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:47:01,525 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:47:01,526 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:47:01,528 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:47:01,528 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:47:01,528 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:47:01,529 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:48:00 KST)" executed successfully
2025-07-25 21:47:58,613 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:47:58,614 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:48:00.392664+09:00 (in 1.778547 seconds)
2025-07-25 21:48:00,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:48:00,397 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:49:00.392664+09:00 (in 59.994791 seconds)
2025-07-25 21:48:00,398 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:49:00 KST)" (scheduled at 2025-07-26 06:48:00.392664+09:00)
2025-07-25 21:48:00,398 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:48:00.398655
2025-07-25 21:48:00,398 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:48:00,399 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:48:00,399 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:48:00,400 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:48:00,400 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:48:00,401 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:48:00,401 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:48:00,402 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:48:00,402 - main - DEBUG - 종목 005930 현재가: 54925
2025-07-25 21:48:00,402 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:48:00,402 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:48:00,403 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:48:00,403 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:48:00,404 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:48:00,404 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:49:00 KST)" executed successfully
2025-07-25 21:48:58,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:48:58,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:49:00.392664+09:00 (in 1.839766 seconds)
2025-07-25 21:49:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:49:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:50:00.392664+09:00 (in 59.998185 seconds)
2025-07-25 21:49:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:50:00 KST)" (scheduled at 2025-07-26 06:49:00.392664+09:00)
2025-07-25 21:49:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:49:00.395247
2025-07-25 21:49:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:49:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:49:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:49:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:49:00,397 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:49:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:49:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:49:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:49:00,399 - main - DEBUG - 종목 005930 현재가: 171565
2025-07-25 21:49:00,399 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:49:00,399 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 171565, 목표가: 75000.0
2025-07-25 21:49:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 171565원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:49:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:49:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 171565원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:49:00,403 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:49:00,661 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89e40>
2025-07-25 21:49:00,662 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:49:00,908 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88bb0>
2025-07-25 21:49:00,908 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:49:00,909 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:49:00,910 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:49:00,910 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:49:00,911 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:49:01,497 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:49:01 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:49:01,497 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:49:01,498 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:49:01,498 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:49:01,498 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:49:01,498 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:49:01,500 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:49:01,501 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:49:01,501 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:49:01,501 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 171565, 목표가: 76000.0
2025-07-25 21:49:01,503 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 171565원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:49:01,503 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:49:01,503 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 171565원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:49:01,504 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:49:01,505 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:49:01,505 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:49:01,505 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:49:01,505 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:49:01,506 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:49:01,506 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:49:01,506 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:49:01,507 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:49:01,508 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:49:01,508 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:49:01,509 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:49:01,509 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:49:01,509 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:50:00 KST)" executed successfully
2025-07-25 21:49:58,596 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:49:58,597 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:50:00.392664+09:00 (in 1.795439 seconds)
2025-07-25 21:50:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:50:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:51:00.392664+09:00 (in 59.999138 seconds)
2025-07-25 21:50:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:51:00 KST)" (scheduled at 2025-07-26 06:50:00.392664+09:00)
2025-07-25 21:50:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:50:00.394103
2025-07-25 21:50:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:50:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:50:00,394 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:50:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:50:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:50:00,396 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:50:00,396 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:50:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:50:00,398 - main - DEBUG - 종목 005930 현재가: 67040
2025-07-25 21:50:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:50:00,399 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:50:00,399 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:50:00,399 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:50:00,400 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:50:00,400 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:51:00 KST)" executed successfully
2025-07-25 21:50:58,579 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:50:58,580 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:51:00.392664+09:00 (in 1.812387 seconds)
2025-07-25 21:51:00,394 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:51:00,394 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:52:00.392664+09:00 (in 59.997773 seconds)
2025-07-25 21:51:00,395 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:52:00 KST)" (scheduled at 2025-07-26 06:51:00.392664+09:00)
2025-07-25 21:51:00,395 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:51:00.395605
2025-07-25 21:51:00,395 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:51:00,395 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:51:00,396 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:51:00,397 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:51:00,398 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:51:00,398 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:51:00,398 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:51:00,399 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:51:00,399 - main - DEBUG - 종목 005930 현재가: 189318
2025-07-25 21:51:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:51:00,400 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189318, 목표가: 75000.0
2025-07-25 21:51:00,401 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 189318원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:51:00,401 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:51:00,402 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 189318원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:51:00,402 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:51:00,650 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da895a0>
2025-07-25 21:51:00,650 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:51:00,896 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da888e0>
2025-07-25 21:51:00,897 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:51:00,897 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:51:00,897 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:51:00,898 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:51:00,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:51:01,498 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:51:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:51:01,498 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:51:01,499 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:51:01,499 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:51:01,499 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:51:01,499 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:51:01,501 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:51:01,501 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:51:01,501 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:51:01,501 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 189318, 목표가: 76000.0
2025-07-25 21:51:01,503 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 189318원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:51:01,503 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:51:01,504 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 189318원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:51:01,504 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:51:01,505 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:51:01,505 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:51:01,506 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:51:01,506 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:51:01,507 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:51:01,507 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:51:01,507 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:51:01,508 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:51:01,509 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:51:01,509 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:51:01,510 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:51:01,510 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:51:01,510 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:52:00 KST)" executed successfully
2025-07-25 21:51:58,527 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:51:58,528 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:52:00.392664+09:00 (in 1.864664 seconds)
2025-07-25 21:52:00,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:52:00,397 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:53:00.392664+09:00 (in 59.995028 seconds)
2025-07-25 21:52:00,397 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:53:00 KST)" (scheduled at 2025-07-26 06:52:00.392664+09:00)
2025-07-25 21:52:00,398 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:52:00.398490
2025-07-25 21:52:00,398 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:52:00,398 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:52:00,399 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:52:00,401 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:52:00,401 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:52:00,401 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:52:00,401 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:52:00,403 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:52:00,403 - main - DEBUG - 종목 005930 현재가: 187041
2025-07-25 21:52:00,403 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:52:00,403 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 187041, 목표가: 75000.0
2025-07-25 21:52:00,404 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 187041원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:52:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:52:00,405 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 187041원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:52:00,406 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:52:00,652 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8be20>
2025-07-25 21:52:00,653 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:52:00,897 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8add0>
2025-07-25 21:52:00,898 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:52:00,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:52:00,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:52:00,899 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:52:00,899 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:52:01,503 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:52:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:52:01,504 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:52:01,504 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:52:01,505 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:52:01,505 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:52:01,505 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:52:01,506 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:52:01,507 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:52:01,507 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:52:01,507 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 187041, 목표가: 76000.0
2025-07-25 21:52:01,509 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 187041원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:52:01,509 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:52:01,509 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 187041원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:52:01,510 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:52:01,511 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:52:01,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:52:01,511 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:52:01,511 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:52:01,512 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:52:01,512 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:52:01,512 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:52:01,513 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:52:01,513 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:52:01,514 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:52:01,514 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:52:01,515 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:52:01,515 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:53:00 KST)" executed successfully
2025-07-25 21:52:58,564 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:52:58,565 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:53:00.392664+09:00 (in 1.827651 seconds)
2025-07-25 21:53:00,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:53:00,396 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:54:00.392664+09:00 (in 59.996470 seconds)
2025-07-25 21:53:00,396 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:54:00 KST)" (scheduled at 2025-07-26 06:53:00.392664+09:00)
2025-07-25 21:53:00,396 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:53:00.396860
2025-07-25 21:53:00,397 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:53:00,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:53:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:53:00,398 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:53:00,399 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:53:00,399 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:53:00,399 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:53:00,400 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:53:00,400 - main - DEBUG - 종목 005930 현재가: 57858
2025-07-25 21:53:00,400 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:53:00,401 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:53:00,401 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:53:00,402 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:53:00,402 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:53:00,402 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:54:00 KST)" executed successfully
2025-07-25 21:53:58,525 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:53:58,525 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:54:00.392664+09:00 (in 1.867026 seconds)
2025-07-25 21:54:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:54:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:55:00.392664+09:00 (in 59.998858 seconds)
2025-07-25 21:54:00,393 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:55:00 KST)" (scheduled at 2025-07-26 06:54:00.392664+09:00)
2025-07-25 21:54:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:54:00.394600
2025-07-25 21:54:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:54:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:54:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:54:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:54:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:54:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:54:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:54:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:54:00,398 - main - DEBUG - 종목 005930 현재가: 148513
2025-07-25 21:54:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:54:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 148513, 목표가: 75000.0
2025-07-25 21:54:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 148513원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:54:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:54:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 148513원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:54:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:54:00,650 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a65c0>
2025-07-25 21:54:00,650 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:54:00,893 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2c8a77f0>
2025-07-25 21:54:00,893 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:54:00,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:54:00,894 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:54:00,894 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:54:00,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:54:01,604 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:54:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:54:01,604 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:54:01,606 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:54:01,606 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:54:01,606 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:54:01,607 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:54:01,608 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:54:01,608 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:54:01,608 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:54:01,608 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 148513, 목표가: 76000.0
2025-07-25 21:54:01,611 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 148513원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:54:01,611 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:54:01,611 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 148513원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:54:01,612 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:54:01,613 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:54:01,613 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:54:01,613 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:54:01,613 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:54:01,614 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:54:01,614 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:54:01,614 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:54:01,615 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:54:01,615 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:54:01,616 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:54:01,616 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:54:01,616 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:54:01,616 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:55:00 KST)" executed successfully
2025-07-25 21:54:58,565 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:54:58,566 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:55:00.392664+09:00 (in 1.826638 seconds)
2025-07-25 21:55:00,400 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:55:00,401 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:56:00.392664+09:00 (in 59.991312 seconds)
2025-07-25 21:55:00,401 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:56:00 KST)" (scheduled at 2025-07-26 06:55:00.392664+09:00)
2025-07-25 21:55:00,402 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:55:00.402281
2025-07-25 21:55:00,402 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:55:00,402 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:55:00,402 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:55:00,404 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:55:00,404 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:55:00,404 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:55:00,404 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:55:00,406 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:55:00,406 - main - DEBUG - 종목 005930 현재가: 111507
2025-07-25 21:55:00,406 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:55:00,406 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 111507, 목표가: 75000.0
2025-07-25 21:55:00,407 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 111507원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:55:00,407 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:55:00,408 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 111507원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:55:00,409 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:55:00,664 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8a920>
2025-07-25 21:55:00,664 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:55:00,910 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da889d0>
2025-07-25 21:55:00,910 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:55:00,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:55:00,911 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:55:00,912 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:55:00,912 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:55:01,520 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:55:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:55:01,520 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:55:01,521 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:55:01,521 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:55:01,521 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:55:01,522 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:55:01,523 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:55:01,523 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:55:01,523 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:55:01,523 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 111507, 목표가: 76000.0
2025-07-25 21:55:01,525 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 111507원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:55:01,525 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:55:01,526 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 111507원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:55:01,527 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:55:01,528 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:55:01,528 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:55:01,528 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:55:01,528 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:55:01,529 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:55:01,529 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:55:01,529 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:55:01,530 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:55:01,531 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:55:01,531 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:55:01,532 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:55:01,532 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:55:01,532 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:56:00 KST)" executed successfully
2025-07-25 21:55:58,535 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:55:58,536 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:56:00.392664+09:00 (in 1.856393 seconds)
2025-07-25 21:56:00,393 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:56:00,393 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:57:00.392664+09:00 (in 59.998796 seconds)
2025-07-25 21:56:00,394 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:57:00 KST)" (scheduled at 2025-07-26 06:56:00.392664+09:00)
2025-07-25 21:56:00,394 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:56:00.394600
2025-07-25 21:56:00,394 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:56:00,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:56:00,395 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:56:00,396 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:56:00,396 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:56:00,397 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:56:00,397 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:56:00,398 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:56:00,398 - main - DEBUG - 종목 005930 현재가: 138914
2025-07-25 21:56:00,398 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:56:00,398 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 138914, 목표가: 75000.0
2025-07-25 21:56:00,399 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 138914원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:56:00,400 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:56:00,400 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 138914원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:56:00,401 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:56:00,659 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89ab0>
2025-07-25 21:56:00,660 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:56:00,904 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da88bb0>
2025-07-25 21:56:00,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:56:00,906 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:56:00,906 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:56:00,906 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:56:00,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:56:01,541 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:56:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:56:01,542 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:56:01,542 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:56:01,543 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:56:01,543 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:56:01,543 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:56:01,544 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:56:01,545 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:56:01,545 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:56:01,545 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 138914, 목표가: 76000.0
2025-07-25 21:56:01,547 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 138914원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:56:01,547 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:56:01,547 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 138914원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:56:01,549 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:56:01,550 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:56:01,550 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:56:01,551 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:56:01,551 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:56:01,551 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:56:01,551 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:56:01,552 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:56:01,552 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:56:01,553 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:56:01,554 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:56:01,554 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:56:01,554 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:56:01,554 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:57:00 KST)" executed successfully
2025-07-25 21:56:58,505 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:56:58,505 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:57:00.392664+09:00 (in 1.887327 seconds)
2025-07-25 21:57:00,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:57:00,396 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:58:00.392664+09:00 (in 59.996489 seconds)
2025-07-25 21:57:00,396 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:58:00 KST)" (scheduled at 2025-07-26 06:57:00.392664+09:00)
2025-07-25 21:57:00,397 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:57:00.397109
2025-07-25 21:57:00,397 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:57:00,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:57:00,397 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:57:00,399 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:57:00,400 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:57:00,400 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:57:00,400 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:57:00,401 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:57:00,402 - main - DEBUG - 종목 005930 현재가: 107436
2025-07-25 21:57:00,402 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:57:00,402 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 107436, 목표가: 75000.0
2025-07-25 21:57:00,404 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 107436원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:57:00,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:57:00,404 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 107436원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:57:00,405 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:57:00,665 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da8ab30>
2025-07-25 21:57:00,665 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:57:00,911 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da880a0>
2025-07-25 21:57:00,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:57:00,912 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:57:00,913 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:57:00,913 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:57:00,913 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:57:01,505 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:57:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:57:01,506 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:57:01,506 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:57:01,506 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:57:01,506 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:57:01,507 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:57:01,508 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:57:01,508 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:57:01,508 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:57:01,509 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 107436, 목표가: 76000.0
2025-07-25 21:57:01,510 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 107436원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:57:01,510 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:57:01,511 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 107436원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:57:01,512 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:57:01,513 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:57:01,513 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:57:01,514 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:57:01,514 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:57:01,515 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:57:01,515 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:57:01,515 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:57:01,516 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:57:01,517 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:57:01,518 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:57:01,518 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:57:01,518 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:57:01,518 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:58:00 KST)" executed successfully
2025-07-25 21:57:58,557 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:57:58,557 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:58:00.392664+09:00 (in 1.835205 seconds)
2025-07-25 21:58:00,399 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:58:00,400 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:59:00.392664+09:00 (in 59.992194 seconds)
2025-07-25 21:58:00,400 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:59:00 KST)" (scheduled at 2025-07-26 06:58:00.392664+09:00)
2025-07-25 21:58:00,401 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:58:00.401309
2025-07-25 21:58:00,401 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:58:00,401 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:58:00,401 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:58:00,403 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:58:00,403 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:58:00,403 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:58:00,403 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:58:00,405 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:58:00,405 - main - DEBUG - 종목 005930 현재가: 154839
2025-07-25 21:58:00,405 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:58:00,405 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 154839, 목표가: 75000.0
2025-07-25 21:58:00,406 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 154839원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:58:00,406 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:58:00,407 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 154839원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:58:00,408 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:58:00,651 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f437760>
2025-07-25 21:58:00,651 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:58:00,893 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da885b0>
2025-07-25 21:58:00,893 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:58:00,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:58:00,894 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:58:00,895 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:58:00,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:58:01,547 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:58:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:58:01,548 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:58:01,548 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:58:01,548 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:58:01,548 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:58:01,549 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:58:01,550 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:58:01,550 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:58:01,551 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:58:01,551 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 154839, 목표가: 76000.0
2025-07-25 21:58:01,552 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 154839원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:58:01,552 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:58:01,553 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 154839원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:58:01,554 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:58:01,554 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:58:01,554 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:58:01,555 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:58:01,555 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:58:01,555 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:58:01,556 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:58:01,556 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:58:01,557 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:58:01,557 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:58:01,558 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:58:01,558 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:58:01,558 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:58:01,559 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 06:59:00 KST)" executed successfully
2025-07-25 21:58:58,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:58:58,552 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 06:59:00.392664+09:00 (in 1.839717 seconds)
2025-07-25 21:59:00,402 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-25 21:59:00,403 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-26 07:00:00+09:00 (in 59.596432 seconds)
2025-07-25 21:59:00,403 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 07:00:00 KST)" (scheduled at 2025-07-26 06:59:00.392664+09:00)
2025-07-25 21:59:00,404 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-25 21:59:00.404187
2025-07-25 21:59:00,404 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-25 21:59:00,404 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-25 21:59:00,404 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-25 21:59:00,407 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-25 21:59:00,407 - main - DEBUG - 활성 알림 수: 2
2025-07-25 21:59:00,407 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-25 21:59:00,407 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-25 21:59:00,409 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-25 21:59:00,409 - main - DEBUG - 종목 005930 현재가: 173758
2025-07-25 21:59:00,409 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-25 21:59:00,409 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 173758, 목표가: 75000.0
2025-07-25 21:59:00,410 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 173758원이 목표가 75000.0원(gte)에 도달...
2025-07-25 21:59:00,410 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:59:00,411 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 173758원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:59:00,411 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-25 21:59:00,667 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2da89ff0>
2025-07-25 21:59:00,667 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f6f4793db40> server_hostname='api.telegram.org' timeout=5.0
2025-07-25 21:59:00,911 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f6f2f437d30>
2025-07-25 21:59:00,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:59:00,912 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:59:00,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:59:00,913 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:59:00,913 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:59:00,567 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Fri, 25 Jul 2025 21:59:00 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-25 21:59:00,567 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-25 21:59:00,568 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-25 21:59:00,568 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-25 21:59:00,568 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:59:00,569 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-25 21:59:00,570 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-25 21:59:00,570 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-25 21:59:00,571 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-25 21:59:00,571 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 173758, 목표가: 76000.0
2025-07-25 21:59:00,572 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 173758원이 목표가 76000.0원(gte)에 도달...
2025-07-25 21:59:00,573 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-25 21:59:00,573 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 173758원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-25 21:59:00,574 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-25 21:59:00,574 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-25 21:59:00,575 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-25 21:59:00,575 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-25 21:59:00,575 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-25 21:59:00,576 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:59:00,576 - httpcore.http11 - DEBUG - response_closed.started
2025-07-25 21:59:00,576 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-25 21:59:00,577 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-25 21:59:00,578 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-25 21:59:00,578 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-25 21:59:00,579 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-25 21:59:00,579 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-25 21:59:00,579 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-26 07:00:00 KST)" executed successfully
2025-07-27 12:27:03,040 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:27:03,051 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:27:03,060 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:27:03,061 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:27:03,062 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:27:03,063 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:52,804 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:29:52,813 - main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:29:52,818 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:52,819 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:52,819 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:52,819 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:52,849 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:29:52,850 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:29:52,850 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:29:52,850 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:29:52,850 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:29:52,851 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:29:52,851 - main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:29:52,851 - main - INFO - 등록된 잡 목록:
2025-07-27 12:29:52,851 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:30:52.819898+09:00 (in 59.968347 seconds)
2025-07-27 12:29:52,851 - main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:29:52,852 - main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:29:52,852 - main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:29:52,852 - main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:29:59,512 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:29:59,519 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:29:59,522 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:59,523 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:59,524 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:29:59,524 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:30:11,838 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:30:11,844 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:30:11,847 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:30:11,848 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:30:11,849 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:30:11,849 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:30:12,167 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,175 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:30:12,180 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,186 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:30:12,190 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,195 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:30:12,199 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,202 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:30:12,204 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:30:12,206 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:30:12,220 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,225 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:30:12,225 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:30:12,225 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:30:12,226 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:30:12,226 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,226 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,227 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,227 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:31:11.849439+09:00 (in 59.621923 seconds)
2025-07-27 12:30:12,227 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,228 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:30:12,228 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:30:12,229 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:30:12,229 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:30:12,264 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:30:12,265 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,266 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,266 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,266 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,271 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,273 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,273 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,273 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,274 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,274 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,295 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:30:12,296 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:30:12,297 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:30:12,557 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:30:12,798 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:30:12,802 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:12,806 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:30:12,811 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:30:12,813 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:30:12,816 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:12,817 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:30:12,820 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-27 12:30:12,822 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:30:12,823 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,824 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,824 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,824 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,829 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,833 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:30:12,836 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,838 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,838 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,838 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,839 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,839 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,842 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:30:12,847 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:30:12,847 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:30:12,851 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:30:12,851 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:30:12,853 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:30:12,854 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,854 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,855 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,855 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,859 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,861 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,862 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,862 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,862 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,862 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,866 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:30:12,869 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:30:12,869 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:30:12,871 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:30:12,871 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:30:12,873 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:30:12,875 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,875 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,875 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,876 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,880 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,881 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,882 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,882 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,883 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,883 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,886 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:30:12,889 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:30:12,891 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,891 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,891 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,892 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,896 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,898 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,899 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,900 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,900 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,901 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,907 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:30:12,910 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:30:12,911 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:30:12,912 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:30:12,912 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:30:12,914 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:30:12.912740')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:30:12.912740')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:30:12,919 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:30:12,922 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:30:12,927 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:30:12,929 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:30:12,931 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:30:12,933 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,934 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,934 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,935 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,940 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,942 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,943 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,943 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,943 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,944 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:12,952 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:30:12,952 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:30:12,956 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:30:12,956 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 125705
2025-07-27 12:30:12,961 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:30:12,963 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:30:12,970 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:30:12,975 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:30:12,975 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:30:12,977 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:30:12,980 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:12,981 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,981 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,981 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:12,986 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:12,988 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:12,988 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:12,988 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:12,989 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:12,990 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:13,245 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:30:13,248 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:13,248 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:13,248 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:13,249 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:13,254 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:13,255 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:13,256 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:13,256 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:13,257 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:13,257 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:13,509 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:30:13,630 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:13,630 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:13,631 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:13,632 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:13,638 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:13,640 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:13,640 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:13,641 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:13,641 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:13,641 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:14,136 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:30:14,138 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:14,139 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,139 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,139 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:14,145 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:14,146 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:14,147 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,147 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:14,148 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,148 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:14,156 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:30:14,158 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:14,159 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,159 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,159 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:14,164 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:14,165 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:14,166 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,166 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:14,167 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,167 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:14,658 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:30:14,659 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:14,660 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,660 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,660 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:14,664 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:14,666 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:14,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,667 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:14,667 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,668 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:14,966 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:14,967 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,967 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,967 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:14,973 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:14,975 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:14,976 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,977 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,976 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:14,977 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:14,983 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:30:14,991 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:14,992 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:14,992 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:14,993 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:14,998 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:15,000 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:15,001 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,001 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:15,002 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,002 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:15,189 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:15,189 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,189 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,190 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:15,194 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:15,196 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:15,196 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,197 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:15,197 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,197 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:15,214 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:30:15,217 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:15,218 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,219 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,219 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:15,225 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:15,227 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:15,228 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,228 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:15,229 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,229 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:15,502 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:30:15,504 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:15,505 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,505 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,506 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:15,511 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:15,513 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:15,514 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,514 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:15,515 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:15,515 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,841 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:30:15,845 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:15,846 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,846 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,846 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:15,855 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:15,857 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:15,858 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,858 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:15,859 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,859 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:15,868 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:30:15,870 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:15,871 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,872 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,872 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:15,877 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:15,880 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:15,881 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:15,881 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:15,881 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:15,882 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:16,202 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:16,204 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,205 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,206 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:16,218 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:16,223 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:16,226 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,227 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,227 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:16,227 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:16,670 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:16,671 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,671 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,671 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:16,679 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:16,687 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:16,688 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,688 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:16,692 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:16,691 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,725 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:30:16,746 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:30:16,753 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:30:16,760 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:30:16,763 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:30:16,765 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:30:16,767 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:16,767 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,767 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,768 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:16,776 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:16,779 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:16,780 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,780 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:16,781 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,781 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:16,784 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:30:16,785 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:30:16,794 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:16,802 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:30:16,825 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:30:16,826 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:30:16,843 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:30:16,844 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:30:16,877 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:30:16,882 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:30:16,893 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:30:16,894 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:30:16,904 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:16,905 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:30:16,908 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:30:16,909 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:30:16,913 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:30:16,914 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:30:16,930 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:30:16,933 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:30:16,942 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:16,945 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:30:16,952 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:30:16,953 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:30:16,956 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:30:16,956 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:30:16,973 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:30:16,975 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:30:16,990 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:16,990 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:16,991 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:16,992 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:17,000 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:17,002 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:30:17,003 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:17,003 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:30:17,004 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:30:17,004 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:17,463 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:30:17,874 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:30:17,887 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:30:17,891 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:30:17,893 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:30:17,902 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:17,903 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:30:17,907 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:30:17,911 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:30:17,914 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:30:17,922 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:30:17,923 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:30:17,925 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:30:17,925 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:30:17,927 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:30:17.926153')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:30:17.926153')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:30:17,932 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:30:17,938 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:30:17,938 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:30:17,940 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:30:17,940 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 142260
2025-07-27 12:30:17,942 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:30:17,944 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:30:17,952 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:30:17,955 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:30:17,956 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:30:17,961 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:30:17,963 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:30:17,965 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:17,965 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:30:17,966 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:30:17,989 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:30:17.989667
2025-07-27 12:30:17,991 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:30:17,992 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:30:17,992 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:30:17,996 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140560455607216'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140560455639264'>
2025-07-27 12:30:17,996 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:30:18,004 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140560455743232'>)
2025-07-27 12:30:18,008 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:30:18,009 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:30:18,010 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:30:18,012 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:30:18,012 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:30:18,020 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140560455856288'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140560456113008'>
2025-07-27 12:30:18,020 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:30:18,023 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140560455743232'>)
2025-07-27 12:30:18,026 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:30:18,027 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:30:18,031 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:30:18,032 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:30:18,034 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:30:18,071 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:30:52,686 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:52,686 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:30:52.819898+09:00 (in 0.133298 seconds)
2025-07-27 12:30:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:30:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:31:52 KST)" (scheduled at 2025-07-27 21:30:52.819898+09:00)
2025-07-27 12:30:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:31:52.819898+09:00 (in 59.998371 seconds)
2025-07-27 12:30:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:30:52.821931
2025-07-27 12:30:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:30:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:30:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:30:52,833 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:30:52,834 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:30:52,834 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:30:52,834 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:30:52,842 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:30:52,842 - main - DEBUG - 종목 005930 현재가: 193037
2025-07-27 12:30:52,842 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:30:52,842 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 193037, 목표가: 75000.0
2025-07-27 12:30:52,845 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 193037원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:30:52,845 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:52,846 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 193037원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:30:52,907 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:30:53,147 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89619fc0>
2025-07-27 12:30:53,147 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:30:53,388 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89619330>
2025-07-27 12:30:53,389 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:30:53,389 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:30:53,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:30:53,390 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:30:53,390 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:30:53,965 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:30:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:30:53,966 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:30:53,967 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:30:53,967 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:30:53,967 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:30:53,968 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:30:53,969 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:30:53,971 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:30:53,971 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:30:53,971 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 193037, 목표가: 76000.0
2025-07-27 12:30:53,973 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 193037원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:30:53,973 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:30:53,974 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 193037원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:30:53,975 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:30:53,975 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:30:53,975 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:30:53,976 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:30:53,976 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:30:53,977 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:30:53,977 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:30:53,978 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:30:53,978 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:30:53,981 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:30:53,981 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:30:53,982 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:30:53,982 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:30:53,982 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:31:52 KST)" executed successfully
2025-07-27 12:31:52,668 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:31:52,668 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:31:52.819898+09:00 (in 0.151257 seconds)
2025-07-27 12:31:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:31:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:32:52.819898+09:00 (in 59.998995 seconds)
2025-07-27 12:31:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:32:52 KST)" (scheduled at 2025-07-27 21:31:52.819898+09:00)
2025-07-27 12:31:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:31:52.821613
2025-07-27 12:31:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:31:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:31:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:31:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:31:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:31:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:31:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:31:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:31:52,825 - main - DEBUG - 종목 005930 현재가: 152719
2025-07-27 12:31:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:31:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 152719, 목표가: 75000.0
2025-07-27 12:31:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 152719원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:31:52,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:31:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 152719원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:31:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:31:53,084 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88464e50>
2025-07-27 12:31:53,085 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:31:53,325 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88466740>
2025-07-27 12:31:53,325 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:31:53,326 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:31:53,326 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:31:53,327 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:31:53,327 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:31:53,896 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:31:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:31:53,897 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:31:53,897 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:31:53,898 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:31:53,898 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:31:53,898 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:31:53,899 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:31:53,900 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:31:53,900 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:31:53,900 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 152719, 목표가: 76000.0
2025-07-27 12:31:53,902 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 152719원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:31:53,902 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:31:53,903 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 152719원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:31:53,904 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:31:53,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:31:53,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:31:53,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:31:53,905 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:31:53,906 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:31:53,906 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:31:53,907 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:31:53,907 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:31:53,908 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:31:53,909 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:31:53,910 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:31:53,910 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:31:53,910 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:32:52 KST)" executed successfully
2025-07-27 12:32:12,576 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:32:12,581 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:32:12,584 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:12,585 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:12,586 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:12,586 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:12,879 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:12,885 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:32:12,889 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:12,893 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:32:12,896 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:12,899 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:32:12,902 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:12,905 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:32:12,905 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:32:12,907 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:32:12,918 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:12,922 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:32:12,922 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:32:12,923 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:32:12,923 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:32:12,923 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:12,924 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:12,924 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:12,924 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:33:12.586433+09:00 (in 59.661920 seconds)
2025-07-27 12:32:12,924 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:12,925 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:32:12,925 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:32:12,926 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:32:12,926 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:32:12,953 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:32:12,955 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:12,955 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:12,956 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:12,956 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:12,960 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:12,961 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:12,962 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:12,962 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:12,963 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:12,963 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:12,984 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:32:12,986 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:32:12,986 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:32:13,240 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:32:13,477 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:32:13,480 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:13,483 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:32:13,489 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:32:13,491 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:32:13,495 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:13,495 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:32:13,498 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-27 12:32:13,500 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:32:13,502 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,503 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,503 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,504 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,510 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,516 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:32:13,520 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,521 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,522 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,522 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,522 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,522 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,526 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:13,533 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:32:13,533 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:32:13,537 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:13,537 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:13,538 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:13,540 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,540 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,541 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,541 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,545 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,547 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,548 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,548 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,549 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,549 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,552 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:13,555 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:32:13,555 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:32:13,557 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:13,557 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:13,559 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:13,560 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,560 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,561 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,561 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,565 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,567 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,567 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,567 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,568 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,568 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,571 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:13,575 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:32:13,576 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,576 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,577 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,577 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,581 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,582 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,583 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,583 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,584 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,584 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,590 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:13,594 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:32:13,594 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:32:13,595 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:13,596 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:13,598 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:13.596282')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:13.596282')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:32:13,603 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:13,606 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:32:13,610 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:32:13,612 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:32:13,614 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:13,615 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,616 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,616 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,616 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,621 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,622 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,623 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,623 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,624 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,624 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,632 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:13,632 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:32:13,635 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:32:13,635 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 185618
2025-07-27 12:32:13,638 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:13,639 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:32:13,644 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:32:13,646 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:32:13,647 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:32:13,648 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:13,650 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,650 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,651 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,651 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,655 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,656 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,657 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,657 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,658 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,658 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,903 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:32:13,906 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,906 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,907 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,907 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,911 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,913 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,914 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,914 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,914 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,915 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:13,925 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:32:13,928 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:13,929 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,929 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,929 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:13,937 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:13,939 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:13,939 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:13,939 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:13,940 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:13,940 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:14,727 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:14,728 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:14,728 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:14,728 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:14,731 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:14,733 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:14,733 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:14,733 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:14,734 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:14,734 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:14,740 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:32:14,741 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:14,741 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:14,742 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:14,742 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:14,745 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:14,746 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:14,747 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:14,747 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:14,747 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:14,748 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,282 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,283 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,283 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,283 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,287 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,288 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,289 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,289 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,289 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,289 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,299 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:32:15,300 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,301 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,301 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,301 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,305 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,307 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,307 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,307 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,308 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,308 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,312 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:32:15,313 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,314 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,314 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,314 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,317 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,319 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,319 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,319 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,320 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,320 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,335 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:32:15,336 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,337 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,337 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,337 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,341 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,342 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,343 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,343 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,343 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,344 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,356 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:32:15,357 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,358 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,358 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,358 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,365 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,366 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,367 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,367 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,368 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,368 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,380 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:32:15,382 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,383 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,383 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,388 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,390 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,391 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,391 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,392 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,392 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,415 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:15,418 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,418 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,418 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,419 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,423 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,425 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,426 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,426 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,426 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,427 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,434 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:32:15,436 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,436 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,437 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,437 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,443 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,446 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,447 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,447 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,448 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,448 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,462 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:32:15,463 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,464 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,464 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,464 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,469 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,471 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,472 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,472 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,473 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,473 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,484 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:32:15,486 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,486 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,487 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,487 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,492 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,495 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,495 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,496 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,496 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,496 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,507 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:32:15,513 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:32:15,516 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:32:15,520 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:32:15,523 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:32:15,524 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:15,526 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,526 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,527 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,527 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,531 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,533 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,533 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,534 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,534 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,534 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,536 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:32:15,536 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:32:15,540 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:15,543 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:32:15,548 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:32:15,548 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:32:15,553 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:32:15,553 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:32:15,565 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:32:15,567 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:32:15,572 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:32:15,572 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:32:15,575 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:15,575 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:32:15,577 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:32:15,578 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:32:15,580 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:32:15,581 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:32:15,589 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:32:15,592 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:32:15,595 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:15,596 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:32:15,598 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:32:15,598 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:32:15,600 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:32:15,601 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:32:15,606 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:32:15,607 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:32:15,611 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:15,612 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,612 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,612 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:15,616 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:15,617 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:15,618 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:15,618 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:15,618 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:15,618 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:15,854 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:32:16,077 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:32:16,081 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:32:16,083 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:32:16,085 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:32:16,088 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:16,089 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:32:16,091 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:32:16,093 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:32:16,095 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:16,097 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:32:16,098 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:32:16,099 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:16,099 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:16,100 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:16.099694')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:16.099694')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:32:16,102 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:16,105 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:16,106 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:32:16,107 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:32:16,108 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 198285
2025-07-27 12:32:16,110 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:16,112 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:32:16,115 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:32:16,118 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:32:16,118 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:32:16,121 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:16,124 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:16,125 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:16,126 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:16,126 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:16,135 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:32:16.135249
2025-07-27 12:32:16,136 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:32:16,138 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:32:16,138 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:32:16,140 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139699497427744'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139699502283264'>
2025-07-27 12:32:16,141 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:32:16,144 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139699504780800'>)
2025-07-27 12:32:16,146 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:32:16,146 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:32:16,146 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:32:16,147 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:32:16,148 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:32:16,151 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139699498359616'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139699498365664'>
2025-07-27 12:32:16,152 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:32:16,153 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139699504780800'>)
2025-07-27 12:32:16,153 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:32:16,153 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:32:16,157 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:32:16,157 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:32:16,158 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:32:16,175 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:32:43,746 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:32:43,752 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:32:43,756 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:43,757 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:43,759 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:43,759 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:32:43,947 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:43,951 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:32:43,953 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:43,956 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:32:43,959 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:43,962 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:32:43,964 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:43,966 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:32:43,967 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:32:43,969 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:32:44,058 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,063 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:32:44,063 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:32:44,063 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:32:44,064 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:32:44,064 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,065 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,065 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:33:43.759349+09:00 (in 59.693674 seconds)
2025-07-27 12:32:44,066 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,066 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:32:44,066 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:32:44,067 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:32:44,067 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:32:44,102 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:32:44,104 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,104 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,104 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,105 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,110 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,112 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,113 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,113 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,114 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,114 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,132 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:32:44,134 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:32:44,134 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:32:44,385 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:32:44,612 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:32:44,616 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:44,619 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:32:44,624 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:32:44,626 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:32:44,630 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:44,630 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:32:44,632 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-27 12:32:44,634 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:32:44,636 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,637 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,637 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,637 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,642 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,646 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:32:44,649 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,651 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,651 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,651 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,652 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,652 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,654 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:44,658 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:32:44,658 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:32:44,662 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:44,662 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:44,663 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:44,665 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,665 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,665 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,666 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,669 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,670 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,670 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,671 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,671 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,671 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,674 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:44,676 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:32:44,676 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:32:44,678 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:44,678 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:44,680 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:44,681 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,681 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,681 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,682 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,685 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,686 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,686 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,687 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,687 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,687 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,690 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:44,694 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:32:44,695 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,695 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,695 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,696 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,699 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,700 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,701 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,701 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,701 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,701 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,706 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:44,709 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:32:44,709 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:32:44,711 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:44,711 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:44,713 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:44.711477')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:44.711477')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:32:44,718 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:44,721 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:32:44,725 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:32:44,727 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:32:44,729 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:44,730 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,731 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,731 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,731 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,735 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,736 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,737 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,737 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,737 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,738 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,746 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:44,746 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:32:44,748 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:32:44,749 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 188497
2025-07-27 12:32:44,751 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:44,753 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:32:44,758 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:32:44,761 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:32:44,761 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:32:44,763 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:44,764 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,765 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,765 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,765 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,769 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,771 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,771 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,771 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,771 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,772 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:44,937 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:32:44,939 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:44,940 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,940 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,940 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:44,944 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:44,946 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:44,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:44,947 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:44,948 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:44,948 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:45,181 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:32:45,182 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:45,183 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:45,183 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:45,184 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:45,188 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:45,190 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:45,190 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:45,190 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:45,191 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:45,191 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:45,694 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:32:45,696 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:45,696 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:45,696 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:45,696 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:45,701 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:45,703 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:45,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:45,704 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:45,704 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:45,704 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:45,713 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:32:45,715 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:45,716 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:45,716 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:45,716 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:45,719 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:45,721 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:45,721 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:45,722 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:45,722 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:45,722 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:46,170 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:32:46,172 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:46,172 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,172 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,173 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:46,176 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:46,178 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:46,178 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,178 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:46,179 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,179 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:46,416 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:32:46,418 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:46,419 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,419 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,419 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:46,424 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:46,426 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:46,427 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,427 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,427 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:46,428 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:46,432 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:32:46,435 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:46,435 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,436 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,436 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:46,440 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:46,444 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:46,445 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,445 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:46,446 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,446 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:46,693 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:32:46,695 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:46,695 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,696 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,696 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:46,700 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:46,701 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:46,702 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,702 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:46,703 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,703 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:46,731 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:32:46,733 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:46,733 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,733 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,734 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:46,738 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:46,740 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:46,741 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,741 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:46,741 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,742 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:46,988 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:32:46,989 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:46,989 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,990 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,990 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:46,994 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:46,995 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:46,996 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:46,996 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:46,997 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:46,997 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:47,228 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:47,229 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:47,230 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,230 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,230 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:47,233 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:47,235 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:47,236 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,236 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:47,236 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,236 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:47,242 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:32:47,243 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:47,244 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,244 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,244 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:47,247 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:47,248 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:47,249 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,249 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:47,249 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,249 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:47,709 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:32:47,710 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:47,711 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,711 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,711 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:47,716 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:47,717 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:47,718 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,718 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,719 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:47,719 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:47,953 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:32:47,955 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:47,956 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,956 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,957 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:47,961 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:47,962 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:47,963 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,963 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:47,964 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,964 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:47,972 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:32:47,977 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:32:47,978 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:32:47,981 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:32:47,983 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:32:47,985 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:47,986 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:47,986 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,986 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,987 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:47,990 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:47,991 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:47,991 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:47,992 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:47,992 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:47,992 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:47,993 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:32:47,993 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:32:47,997 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:48,000 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:32:48,004 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:32:48,004 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:32:48,009 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:32:48,009 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:32:48,023 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:32:48,025 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:32:48,030 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:32:48,030 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:32:48,034 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:48,035 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:32:48,037 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:32:48,038 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:32:48,040 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:32:48,041 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:32:48,054 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:32:48,057 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:32:48,061 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:48,062 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:32:48,066 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:32:48,074 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:32:48,076 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:32:48,076 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:32:48,106 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:32:48,108 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:32:48,114 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:48,115 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:48,115 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:48,116 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:48,121 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:48,123 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:32:48,125 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:48,125 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:32:48,126 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:48,126 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:32:48,359 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:32:48,588 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:32:48,592 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:32:48,594 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:32:48,595 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:32:48,599 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:48,600 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:32:48,602 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:32:48,604 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:32:48,607 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:32:48,610 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:32:48,610 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:32:48,612 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:32:48,612 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:32:48,614 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:48.612878')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:32:48.612878')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:32:48,616 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:32:48,619 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:48,619 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:32:48,620 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:32:48,620 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 145904
2025-07-27 12:32:48,621 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:32:48,623 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:32:48,625 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:32:48,626 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:32:48,627 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:32:48,628 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:32:48,631 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:32:48,632 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:48,632 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:32:48,632 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:32:48,642 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:32:48.641999
2025-07-27 12:32:48,643 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:32:48,643 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:32:48,643 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:32:48,646 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140438720100240'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140438720132288'>
2025-07-27 12:32:48,647 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:32:48,652 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140438720252704'>)
2025-07-27 12:32:48,656 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:32:48,656 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:32:48,657 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:32:48,658 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:32:48,659 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:32:48,661 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140438720341968'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140438720636400'>
2025-07-27 12:32:48,662 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:32:48,662 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140438720252704'>)
2025-07-27 12:32:48,663 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:32:48,663 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:32:48,666 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:32:48,666 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:32:48,668 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:32:48,689 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:32:52,673 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:52,673 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:32:52.819898+09:00 (in 0.146333 seconds)
2025-07-27 12:32:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:32:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:33:52.819898+09:00 (in 59.998785 seconds)
2025-07-27 12:32:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:33:52 KST)" (scheduled at 2025-07-27 21:32:52.819898+09:00)
2025-07-27 12:32:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:32:52.821783
2025-07-27 12:32:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:32:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:32:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:32:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:32:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:32:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:32:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:32:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:32:52,825 - main - DEBUG - 종목 005930 현재가: 168834
2025-07-27 12:32:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:32:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 168834, 목표가: 75000.0
2025-07-27 12:32:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 168834원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:32:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 168834원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:32:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:32:53,072 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88467430>
2025-07-27 12:32:53,072 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:32:53,315 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89618c70>
2025-07-27 12:32:53,315 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:32:53,316 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:32:53,316 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:32:53,316 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:32:53,317 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:32:53,896 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:32:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:32:53,897 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:32:53,897 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:32:53,897 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:32:53,897 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:32:53,898 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:32:53,899 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:32:53,899 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:32:53,900 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:32:53,900 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 168834, 목표가: 76000.0
2025-07-27 12:32:53,901 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 168834원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:32:53,902 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:32:53,902 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 168834원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:32:53,903 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:32:53,904 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:32:53,905 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:32:53,905 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:32:53,906 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:32:53,907 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:32:53,907 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:32:53,907 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:32:53,908 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:32:53,910 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:32:53,911 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:32:53,911 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:32:53,912 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:32:53,912 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:33:52 KST)" executed successfully
2025-07-27 12:33:30,244 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:33:30,249 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:33:30,253 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:33:30,253 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:33:30,254 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:33:30,254 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:33:30,559 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:30,564 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:33:30,566 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:30,569 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:33:30,572 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:30,575 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:33:30,579 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:30,581 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:33:30,582 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:33:30,584 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:33:30,594 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:30,599 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:33:30,599 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:33:30,600 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:33:30,600 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:33:30,600 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:30,601 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:30,601 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:30,601 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:34:30.254806+09:00 (in 59.653321 seconds)
2025-07-27 12:33:30,601 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:30,602 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:33:30,602 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:33:30,602 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:33:30,603 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:33:30,629 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:33:30,631 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:30,631 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:30,631 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:30,632 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:30,636 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:30,638 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:30,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:30,639 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:30,639 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:30,640 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:30,656 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:33:30,657 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:33:30,657 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:33:30,932 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:33:31,156 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:33:31,159 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:31,162 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:33:31,167 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:33:31,168 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,172 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:31,172 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:33:31,174 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-27 12:33:31,176 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,178 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,178 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,178 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,178 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,182 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,185 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,188 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,189 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,189 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,189 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,190 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,190 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,192 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:33:31,196 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:33:31,197 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:33:31,201 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:33:31,201 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:33:31,203 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,204 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,204 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,204 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,204 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,208 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,209 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,209 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,209 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,210 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,210 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,212 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:33:31,215 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:33:31,216 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:33:31,217 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:33:31,217 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:33:31,219 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,220 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,220 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,220 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,221 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,224 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,226 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,226 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,226 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,227 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,227 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,230 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:33:31,233 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:33:31,235 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,235 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,235 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,236 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,239 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,240 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,241 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,241 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,241 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,241 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,246 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:33:31,249 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:33:31,249 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:33:31,250 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:33:31,250 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:33:31,252 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:33:31.250882')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:33:31.250882')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:33:31,257 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,259 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:33:31,262 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:33:31,264 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:33:31,266 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:33:31,267 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,268 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,268 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,268 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,272 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,273 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,273 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,273 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,274 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,274 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,283 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:33:31,283 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:33:31,285 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:33:31,285 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 90834
2025-07-27 12:33:31,288 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:33:31,289 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:33:31,294 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:33:31,297 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:33:31,298 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:33:31,300 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:33:31,302 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,302 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,302 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,303 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,308 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,310 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,310 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,310 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,311 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,311 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,329 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,331 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,332 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,332 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,332 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,337 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,339 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,340 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,340 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,340 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,341 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,349 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:33:31,351 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,351 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,352 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,352 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,357 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,359 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,360 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,360 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,360 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,360 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,375 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:33:31,377 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,378 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,378 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,379 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,384 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,387 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,387 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,387 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,388 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,388 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,407 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:33:31,409 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,410 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,410 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,411 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,417 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,419 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,420 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,420 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,420 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,421 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,436 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:33:31,439 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,439 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,440 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,440 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,446 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,449 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,450 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,450 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,450 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,451 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,470 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:33:31,472 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,473 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,473 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,473 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,479 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,480 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,481 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,481 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,482 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,482 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,488 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:33:31,491 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,492 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,492 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,492 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,497 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,499 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,499 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,499 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,500 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,500 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:31,506 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:33:31,508 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:31,508 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,508 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,508 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:31,512 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:31,514 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:31,514 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:31,514 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:31,515 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:31,515 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:32,025 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:32,025 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,026 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,026 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:32,029 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:32,031 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:32,031 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,031 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:32,032 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,032 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:32,259 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:33:32,260 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:32,261 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,261 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,261 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:32,265 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:32,266 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:32,267 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,267 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:32,267 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,267 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:32,532 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:33:32,534 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:32,534 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,534 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,534 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:32,538 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:32,539 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:32,540 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,540 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:32,540 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,541 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:32,989 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:33:32,991 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:32,991 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,991 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,991 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:32,996 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:32,997 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:32,998 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:32,998 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:32,999 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:32,999 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:33,007 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:33:33,010 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:33,011 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,011 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,012 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:33,017 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:33,019 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:33,020 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,020 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:33,020 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,021 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:33,492 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:33:33,494 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:33,495 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,495 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,495 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:33,500 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:33,502 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:33,503 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,503 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:33,504 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,504 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:33,748 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:33:33,750 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:33,751 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,751 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,751 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:33,755 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:33,757 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:33,757 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,757 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:33,758 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,758 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:33,761 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:33:33,763 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:33,763 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,764 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,764 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:33,768 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:33,769 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:33,770 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:33,770 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:33,770 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:33,771 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:34,013 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:33:34,015 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:34,015 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,015 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,016 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:34,020 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:34,021 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:34,021 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,021 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:34,022 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,022 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:34,030 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:33:34,031 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:34,032 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,032 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,032 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:34,036 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:34,038 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:34,039 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,039 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:34,040 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,040 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:34,287 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:33:34,288 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:34,289 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,289 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,289 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:34,292 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:34,294 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:34,294 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,294 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:34,294 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,295 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:34,530 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:33:34,532 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:34,532 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,533 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,533 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:34,536 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:34,537 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:34,538 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,538 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:34,539 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,539 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:34,546 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:33:34,547 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:34,547 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,548 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,548 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:34,552 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:34,554 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:34,554 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:34,554 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:34,555 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:34,555 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:35,016 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:33:35,019 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:35,020 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,021 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,021 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:35,026 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:35,028 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:35,029 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,029 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:35,030 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,030 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:35,264 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:33:35,266 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:35,267 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,267 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,267 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:35,271 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:35,273 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:35,273 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,273 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:35,274 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,274 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:35,280 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:33:35,285 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:33:35,287 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:33:35,290 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:33:35,293 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:33:35,295 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:33:35,296 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:35,297 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,297 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,297 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:35,302 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:35,304 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:35,305 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,305 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:35,305 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,306 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:35,307 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:33:35,307 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:33:35,311 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:35,314 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:33:35,318 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:33:35,318 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:33:35,322 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:33:35,322 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:33:35,331 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:33:35,332 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:33:35,336 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:33:35,337 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:33:35,339 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:35,340 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:33:35,341 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:33:35,342 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:33:35,343 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:33:35,343 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:33:35,350 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:33:35,351 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:33:35,354 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:35,355 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:33:35,357 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:33:35,357 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:33:35,358 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:33:35,358 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:33:35,365 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:33:35,367 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:33:35,372 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:35,373 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,373 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,374 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:35,378 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:35,379 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:33:35,380 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,380 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:33:35,381 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,381 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:33:35,615 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:33:35,848 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:33:35,851 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:33:35,853 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:33:35,854 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:33:35,857 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:35,858 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:33:35,860 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:33:35,862 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:33:35,864 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:33:35,866 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:33:35,866 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:33:35,868 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:33:35,868 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:33:35,869 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:33:35.868450')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:33:35.868450')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:33:35,871 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:33:35,874 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:33:35,874 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:33:35,876 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:33:35,876 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 58483
2025-07-27 12:33:35,878 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:33:35,879 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:33:35,882 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:33:35,883 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:33:35,883 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:33:35,885 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:33:35,887 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:33:35,888 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:35,888 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:33:35,889 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:33:35,895 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:33:35.895915
2025-07-27 12:33:35,896 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:33:35,896 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:33:35,897 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:33:35,898 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139669510067280'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139669474815104'>
2025-07-27 12:33:35,898 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:33:35,902 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139669467324688'>)
2025-07-27 12:33:35,904 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:33:35,904 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:33:35,904 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:33:35,905 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:33:35,905 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:33:35,907 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139669470948576'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139669470358272'>
2025-07-27 12:33:35,907 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:33:35,908 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139669467324688'>)
2025-07-27 12:33:35,908 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:33:35,908 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:33:35,911 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:33:35,911 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:33:35,913 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:33:35,932 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:33:52,673 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:52,674 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:33:52.819898+09:00 (in 0.145663 seconds)
2025-07-27 12:33:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:33:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:34:52.819898+09:00 (in 59.998919 seconds)
2025-07-27 12:33:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:34:52 KST)" (scheduled at 2025-07-27 21:33:52.819898+09:00)
2025-07-27 12:33:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:33:52.821884
2025-07-27 12:33:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:33:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:33:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:33:52,825 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:33:52,826 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:33:52,826 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:33:52,826 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:33:52,828 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:33:52,829 - main - DEBUG - 종목 005930 현재가: 115886
2025-07-27 12:33:52,829 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:33:52,829 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 115886, 목표가: 75000.0
2025-07-27 12:33:52,831 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 115886원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:33:52,831 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:52,832 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 115886원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:33:52,832 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:33:53,070 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829c610>
2025-07-27 12:33:53,071 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:33:53,308 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829cdf0>
2025-07-27 12:33:53,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:33:53,309 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:33:53,309 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:33:53,310 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:33:53,310 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:33:53,885 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:33:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:33:53,886 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:33:53,886 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:33:53,886 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:33:53,887 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:33:53,887 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:33:53,889 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:33:53,889 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:33:53,889 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:33:53,890 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 115886, 목표가: 76000.0
2025-07-27 12:33:53,892 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 115886원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:33:53,892 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:33:53,892 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 115886원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:33:53,893 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:33:53,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:33:53,894 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:33:53,894 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:33:53,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:33:53,895 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:33:53,895 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:33:53,896 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:33:53,896 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:33:53,897 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:33:53,897 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:33:53,898 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:33:53,898 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:33:53,898 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:34:52 KST)" executed successfully
2025-07-27 12:34:23,231 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:34:23,236 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:34:23,241 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:34:23,241 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:34:23,242 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:34:23,242 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:34:23,543 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:23,548 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:34:23,550 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:23,554 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:34:23,558 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:23,561 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:34:23,564 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:23,566 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:34:23,567 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:34:23,569 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:34:23,580 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:23,583 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:34:23,584 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:34:23,584 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:34:23,584 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:34:23,585 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:23,585 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:23,585 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:23,586 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:35:23.242734+09:00 (in 59.656701 seconds)
2025-07-27 12:34:23,586 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:23,586 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:34:23,586 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:34:23,587 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:34:23,587 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:34:23,617 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:34:23,619 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:23,619 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:23,620 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:23,620 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:23,625 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:23,627 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:23,627 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:23,627 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:23,628 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:23,628 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:23,645 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:34:23,646 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:34:23,646 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:34:23,900 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:34:24,144 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:34:24,147 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:24,150 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:34:24,155 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:34:24,157 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,160 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:24,161 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:34:24,164 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 1개 조회됨.
2025-07-27 12:34:24,165 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,167 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,167 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,167 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,168 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,172 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,175 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,178 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,180 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,181 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,181 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,182 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,182 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,186 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:34:24,190 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:34:24,191 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:34:24,195 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:34:24,195 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:34:24,197 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,198 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,199 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,199 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,199 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,203 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,205 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,205 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,205 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,205 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,206 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,209 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:34:24,212 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:34:24,212 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:34:24,214 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:34:24,214 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:34:24,216 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,218 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,218 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,218 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,219 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,224 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,226 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,227 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,227 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,227 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,227 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,230 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:34:24,234 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:34:24,235 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,236 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,236 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,236 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,240 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,241 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,242 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,242 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,242 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,243 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,248 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:34:24,250 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:34:24,251 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:34:24,252 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:34:24,253 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:34:24,255 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:34:24.253470')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:34:24.253470')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:34:24,259 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,262 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:34:24,265 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:34:24,267 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:34:24,268 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:34:24,270 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,270 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,271 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,271 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,275 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,277 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,277 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,277 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,278 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,278 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,286 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:34:24,286 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:34:24,289 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:34:24,289 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 55385
2025-07-27 12:34:24,292 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:34:24,293 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:34:24,298 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:34:24,300 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:34:24,301 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:34:24,303 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:34:24,304 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,305 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,305 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,305 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,309 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,311 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,311 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,311 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,312 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,312 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,323 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,325 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,325 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,325 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,326 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,329 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,331 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,331 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,331 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,332 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,332 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,338 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:34:24,340 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,340 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,340 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,341 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,345 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,347 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,347 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,348 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,348 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,349 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,361 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:34:24,363 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,364 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,364 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,364 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,369 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,371 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,371 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,372 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,372 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,372 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,387 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:34:24,389 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,390 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,390 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,391 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,398 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,401 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,402 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,402 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,403 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,404 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,417 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:34:24,419 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,419 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,419 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,420 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,424 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,426 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,426 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,427 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,427 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,427 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,437 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:34:24,440 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,441 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,441 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,442 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,446 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,447 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,448 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,448 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,449 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,448 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,454 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:34:24,457 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,457 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,458 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,458 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,463 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,465 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,466 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,466 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,466 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,467 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,476 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:34:24,479 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,479 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,479 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,480 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,484 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,486 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,487 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,487 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,488 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,488 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,496 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:34:24,498 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,498 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,498 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,499 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,503 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,505 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,506 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,506 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,506 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,507 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:24,760 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:34:24,763 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:24,764 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,765 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,766 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:24,774 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:24,778 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:24,780 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:24,780 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:24,781 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:24,782 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:25,030 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:34:25,032 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:25,033 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:25,033 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:25,033 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:25,038 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:25,039 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:25,040 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:25,040 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:25,041 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:25,041 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:25,539 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:34:25,541 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:25,541 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:25,541 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:25,542 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:25,547 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:25,552 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:25,552 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:25,553 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:25,553 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:25,553 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:25,561 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:34:25,562 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:25,563 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:25,563 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:25,563 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:25,567 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:25,569 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:25,569 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:25,569 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:25,570 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:25,570 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:26,019 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:34:26,020 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:26,021 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,021 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,021 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:26,025 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:26,027 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:26,027 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,027 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:26,028 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,028 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:26,262 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:34:26,264 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:26,264 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,264 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,265 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:26,268 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:26,269 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:26,270 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,270 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:26,270 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,270 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:26,273 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:34:26,275 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:26,275 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,275 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,275 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:26,278 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:26,279 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:26,280 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,280 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:26,280 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,281 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:26,517 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:34:26,519 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:26,519 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,520 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,520 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:26,523 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:26,526 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:26,527 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,527 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:26,527 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,528 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:26,537 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:34:26,538 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:26,538 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,539 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,539 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:26,543 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:26,544 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:26,545 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,545 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:26,545 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,546 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:26,778 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:34:26,780 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:26,780 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,781 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,781 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:26,784 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:26,786 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:26,786 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:26,786 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:26,787 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:26,787 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:27,023 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:34:27,025 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:27,026 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,026 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,026 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:27,031 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:27,033 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:27,034 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,034 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:27,035 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,035 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:27,042 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:34:27,043 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:27,043 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,043 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,044 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:27,048 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:27,049 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:27,050 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,050 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:27,051 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,051 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:27,553 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:34:27,555 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:27,555 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,555 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,556 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:27,559 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:27,560 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:27,561 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,561 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:27,561 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,562 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:27,791 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:34:27,792 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:27,793 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,793 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,793 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:27,796 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:27,798 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:27,798 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,798 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:27,799 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,799 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:27,806 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:34:27,810 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:34:27,812 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:34:27,816 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:34:27,818 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:34:27,819 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:34:27,821 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:27,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,821 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,822 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:27,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:27,827 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:27,828 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,828 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:27,828 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,829 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:27,830 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:34:27,831 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:34:27,836 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:27,839 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:34:27,844 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:34:27,844 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:34:27,848 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:34:27,849 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:34:27,859 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:34:27,861 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:34:27,865 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:34:27,866 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:34:27,868 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:27,869 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:34:27,871 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:34:27,872 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:34:27,873 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:34:27,873 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:34:27,881 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:34:27,883 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:34:27,887 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:27,887 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:34:27,889 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:34:27,890 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:34:27,891 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:34:27,892 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:34:27,898 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:34:27,899 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:34:27,904 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:27,905 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,905 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,905 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:27,910 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:27,912 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:34:27,913 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:27,913 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:34:27,913 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:27,914 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:34:28,157 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:34:28,384 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:34:28,388 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:34:28,391 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:34:28,393 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:34:28,398 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:28,399 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:34:28,402 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:34:28,404 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:34:28,406 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:34:28,410 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:34:28,410 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:34:28,412 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:34:28,412 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:34:28,413 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:34:28.412811')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:34:28.412811')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:34:28,416 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:34:28,419 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:34:28,419 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:34:28,421 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:34:28,421 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 164844
2025-07-27 12:34:28,422 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:34:28,424 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:34:28,428 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:34:28,430 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:34:28,430 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:34:28,432 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:34:28,434 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:34:28,435 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:28,435 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:34:28,435 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:34:28,445 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:34:28.445306
2025-07-27 12:34:28,446 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:34:28,446 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:34:28,455 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:34:28,458 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139758321242448'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139758321323648'>
2025-07-27 12:34:28,458 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:34:28,474 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139758321427616'>)
2025-07-27 12:34:28,475 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:34:28,476 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:34:28,476 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:34:28,484 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:34:28,485 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:34:28,487 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139758321540672'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139758321802336'>
2025-07-27 12:34:28,487 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:34:28,488 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139758321427616'>)
2025-07-27 12:34:28,488 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:34:28,489 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:34:28,493 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:34:28,494 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:34:28,496 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:34:28,527 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:34:52,657 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:52,657 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:34:52.819898+09:00 (in 0.161981 seconds)
2025-07-27 12:34:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:34:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:35:52.819898+09:00 (in 59.998450 seconds)
2025-07-27 12:34:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:35:52 KST)" (scheduled at 2025-07-27 21:34:52.819898+09:00)
2025-07-27 12:34:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:34:52.822516
2025-07-27 12:34:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:34:52,823 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:34:52,823 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:34:52,825 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:34:52,826 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:34:52,826 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:34:52,826 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:34:52,828 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:34:52,829 - main - DEBUG - 종목 005930 현재가: 101636
2025-07-27 12:34:52,829 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:34:52,829 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 101636, 목표가: 75000.0
2025-07-27 12:34:52,832 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 101636원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:34:52,832 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:52,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 101636원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:34:52,834 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:34:53,076 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89618eb0>
2025-07-27 12:34:53,076 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:34:53,313 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88467580>
2025-07-27 12:34:53,313 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:34:53,314 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:34:53,315 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:34:53,315 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:34:53,316 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:34:53,887 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:34:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:34:53,887 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:34:53,888 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:34:53,888 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:34:53,888 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:34:53,889 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:34:53,890 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:34:53,890 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:34:53,891 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:34:53,891 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 101636, 목표가: 76000.0
2025-07-27 12:34:53,892 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 101636원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:34:53,893 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:34:53,893 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 101636원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:34:53,894 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:34:53,894 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:34:53,895 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:34:53,895 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:34:53,895 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:34:53,896 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:34:53,896 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:34:53,897 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:34:53,897 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:34:53,898 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:34:53,899 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:34:53,899 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:34:53,899 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:34:53,900 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:35:52 KST)" executed successfully
2025-07-27 12:35:36,382 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:35:36,388 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:35:36,392 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:35:36,393 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:35:36,394 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:35:36,394 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:35:36,749 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:36,754 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:35:36,757 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:36,760 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:35:36,762 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:36,765 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:35:36,768 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:36,770 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:35:36,770 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:35:36,772 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:35:36,782 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:36,786 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:35:36,786 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:35:36,786 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:35:36,786 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:35:36,787 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:36,787 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:36,787 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:36,788 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:36:36.394613+09:00 (in 59.606593 seconds)
2025-07-27 12:35:36,788 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:36,788 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:35:36,789 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:35:36,789 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:35:36,789 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:35:36,819 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:35:36,821 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:36,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:36,822 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:36,822 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:36,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:36,829 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:36,829 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:36,829 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:36,830 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:36,830 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:36,832 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:35:36,833 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:35:36,834 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:35:37,080 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:37,083 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:37,087 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:37,089 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:37,092 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:37,093 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,093 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,093 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:37,097 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:37,098 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:37,099 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,099 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:37,099 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,100 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:37,102 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:37,178 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:37,179 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,179 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,179 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:37,183 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:37,184 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:37,185 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,185 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:37,186 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,186 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:37,407 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:37,409 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:35:37,410 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:37,410 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,411 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,411 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:37,414 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:37,415 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:37,416 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,416 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:37,416 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,416 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:37,643 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:37,644 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:37,646 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:37,647 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:37,650 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:37,651 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:37,653 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:35:37,655 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:37,658 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:37,659 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:35:37,662 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:35:37,663 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:37,665 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:37,665 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,665 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,666 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:37,669 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:37,670 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:37,671 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,671 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:37,671 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,672 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:37,899 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:37,900 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:35:37,901 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:35:37,902 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:37,904 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:37,904 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,904 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,905 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:37,908 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:37,909 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:37,910 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,910 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:37,910 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,911 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:37,913 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:37,920 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:37,920 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,920 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,921 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:37,924 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:37,925 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:37,926 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:37,926 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:37,926 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:37,926 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:38,151 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:38,152 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:38,154 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:38,156 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:38,158 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:38,159 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:35:38,161 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:35:38,162 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:35:38,164 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:38,164 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,164 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,164 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:38,168 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:38,169 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:38,170 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,170 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:38,170 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,170 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:38,394 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:38,395 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:35:38,396 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:35:38,397 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:35:38,399 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:38,399 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,399 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,400 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:38,403 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:38,405 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:38,405 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,406 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:38,406 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,406 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:38,670 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:38,670 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:38,672 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:38,674 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:38,677 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:38,681 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:35:38,686 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:35:38,688 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:38,689 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:38,690 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,690 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,690 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:38,694 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:38,696 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:38,697 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,697 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:38,698 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,698 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:38,928 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:38,929 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:38,931 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:38,932 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:38,934 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:38,944 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:38,944 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,944 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,945 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:38,950 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:38,952 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:38,953 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:38,953 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:38,954 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:38,954 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:39,180 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:39,182 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:35:39,183 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:35:39,185 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:35:39,187 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:39,187 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:39,187 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:39,188 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:39,192 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:39,194 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:39,195 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:39,195 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:39,195 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:39,196 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:39,668 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:39,669 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:39,681 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:39,684 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:39,687 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:39,688 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:35:39,691 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:35:39,692 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:39,694 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:39,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:39,695 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:39,695 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:39,699 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:39,701 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:39,702 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:39,702 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:39,702 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:39,702 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:39,941 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:39,942 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:39,943 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:39,945 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:39,948 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:39,950 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:35:39,952 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:35:39,954 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:39,956 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:39,957 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:39,957 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:39,957 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:39,961 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:39,963 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:39,964 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:39,964 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:39,964 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:39,964 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:40,198 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:40,198 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:40,201 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:40,202 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:40,204 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:40,212 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:40,212 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,213 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:40,213 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:40,217 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:40,219 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:40,219 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,219 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:40,220 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:40,220 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:40,451 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:40,452 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:35:40,453 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:35:40,455 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:35:40,457 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:40,458 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,458 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:40,458 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:40,464 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:40,466 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:40,467 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,467 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:40,468 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:40,468 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:40,960 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:40,961 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:40,963 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:40,965 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:40,970 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:40,975 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:40,978 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:40,979 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,979 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:40,980 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:40,986 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:40,987 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:40,988 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,988 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:40,989 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:40,989 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:40,997 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:35:40,999 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:40,999 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:40,999 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,000 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,005 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,008 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,009 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,010 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,009 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,010 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,015 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:35:41,017 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,018 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,018 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,018 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,023 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,026 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:35:41,029 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,031 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,031 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,031 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,032 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,032 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,035 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:35:41,048 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:35:41,048 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:35:41,052 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:35:41,052 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:35:41,055 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:35:41,056 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,057 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,057 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,057 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,070 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,072 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,073 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,073 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,074 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,074 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,086 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:35:41,090 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:35:41,090 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:35:41,093 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:35:41,093 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:35:41,095 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:35:41,097 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,097 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,098 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,098 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,103 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,105 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,105 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,106 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,106 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,107 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,110 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:35:41,115 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:35:41,117 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,117 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,118 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,122 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,124 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,124 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,125 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,125 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,125 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,139 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:35:41,142 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:35:41,143 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:35:41,144 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:35:41,145 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:35:41,147 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:35:41.145339')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:35:41.145339')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:35:41,153 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:35:41,156 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:35:41,161 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:35:41,164 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:35:41,167 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:41,169 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,169 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,169 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,170 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,174 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,176 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,177 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,177 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,178 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,179 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,189 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:35:41,190 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:35:41,192 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:35:41,193 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 103315
2025-07-27 12:35:41,196 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:35:41,198 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:35:41,202 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:35:41,205 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:35:41,205 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:35:41,207 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:41,209 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,210 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,210 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,211 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,217 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,219 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,219 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,220 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,219 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,220 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,234 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:35:41,237 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,238 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,238 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,238 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,243 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,245 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,245 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,246 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,246 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,247 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,254 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:35:41,256 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,257 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,257 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,257 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,263 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,265 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,267 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,267 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,267 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,267 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,288 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:35:41,291 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,292 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,292 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,292 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,299 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,301 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,303 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,303 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,304 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,304 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,318 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:35:41,321 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,321 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,322 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,322 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,332 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,336 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,337 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,337 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,337 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,338 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,353 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:35:41,355 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,356 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,356 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,356 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,361 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,364 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,364 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,365 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,365 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,365 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,375 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:35:41,378 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,378 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,379 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,379 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,384 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,386 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,387 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,387 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,387 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,388 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,393 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:35:41,396 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,396 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,397 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,397 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,404 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,406 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,407 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,407 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,408 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,409 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,423 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:35:41,426 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,427 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,428 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,428 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,434 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,436 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,437 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,437 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,437 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,438 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,446 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:35:41,449 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,449 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,449 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,450 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,454 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,455 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,456 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,456 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,457 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,457 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,728 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:35:41,730 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,730 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,731 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,731 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,734 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,736 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,736 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,736 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,737 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,737 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:41,969 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:35:41,971 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:41,972 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,972 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,972 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:41,977 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:41,980 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:41,980 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:41,981 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:41,981 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:41,981 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:42,466 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:35:42,469 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:42,469 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:42,470 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:42,470 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:42,474 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:42,475 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:42,476 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:42,476 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:42,476 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:42,476 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:42,483 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:35:42,485 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:42,486 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:42,486 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:42,486 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:42,490 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:42,492 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:42,492 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:42,492 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:42,493 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:42,493 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:42,951 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:35:42,952 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:42,953 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:42,953 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:42,953 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:42,957 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:42,959 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:42,959 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:42,960 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:42,960 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:42,960 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:43,192 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:35:43,193 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:43,193 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,194 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,194 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:43,198 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:43,200 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:43,200 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,201 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,200 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:43,201 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:43,204 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:43,206 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:43,207 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,207 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,207 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:43,210 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:43,212 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:43,212 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,212 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:43,212 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,213 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:43,446 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:35:43,448 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:43,449 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,449 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,449 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:43,453 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:43,454 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:43,455 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,455 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:43,455 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,456 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:43,463 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:35:43,465 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:43,465 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,465 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,465 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:43,468 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:43,470 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:43,470 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,470 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:43,471 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,471 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:43,742 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:35:43,744 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:43,745 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,745 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,745 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:43,749 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:43,750 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:43,751 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:43,751 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:43,751 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:43,752 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:44,001 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:44,002 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:44,003 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,003 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,003 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:44,007 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:44,008 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:44,009 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,009 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:44,009 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,010 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:44,016 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:35:44,018 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:44,018 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,018 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,019 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:44,022 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:44,023 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:44,024 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,024 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:44,024 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,025 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:44,424 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:35:44,425 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:44,426 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,426 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,426 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:44,430 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:44,432 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:44,432 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,432 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:44,433 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,433 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:44,660 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:35:44,662 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:44,662 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,662 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,662 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:44,666 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:44,667 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:44,668 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,668 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:44,668 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,669 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:44,674 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:35:44,678 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:35:44,680 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:35:44,683 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:35:44,685 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:35:44,687 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:44,689 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:44,689 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,690 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,690 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:44,695 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:44,698 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:44,699 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,699 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:44,699 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,700 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:44,701 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:35:44,702 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:35:44,706 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:44,709 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:35:44,713 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:35:44,713 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:35:44,717 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:35:44,717 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:35:44,727 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:35:44,729 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:35:44,733 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:35:44,734 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:35:44,736 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:44,737 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:35:44,739 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:35:44,739 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:35:44,740 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:35:44,741 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:35:44,747 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:35:44,748 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:35:44,751 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:44,751 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:35:44,753 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:35:44,753 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:35:44,754 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:35:44,754 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:35:44,760 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:35:44,761 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:35:44,766 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:44,766 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,766 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,767 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:44,770 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:44,772 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:35:44,772 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:44,772 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:35:44,773 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:44,773 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:35:45,015 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:35:45,264 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:35:45,267 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:35:45,269 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:35:45,270 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:35:45,273 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:45,274 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:35:45,276 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:35:45,277 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:35:45,279 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:35:45,281 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:35:45,282 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:35:45,283 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:35:45,283 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:35:45,284 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:35:45.283966')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:35:45.283966')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:35:45,286 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:35:45,289 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:35:45,289 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:35:45,290 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:35:45,291 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 120233
2025-07-27 12:35:45,292 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:35:45,293 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:35:45,295 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:35:45,296 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:35:45,297 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:35:45,298 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:35:45,300 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:35:45,300 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:45,300 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:35:45,301 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:35:45,306 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:35:45.306874
2025-07-27 12:35:45,307 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:35:45,307 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:35:45,307 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:35:45,309 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139869995254736'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139869995270400'>
2025-07-27 12:35:45,309 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:35:45,313 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139869995362160'>)
2025-07-27 12:35:45,314 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:35:45,314 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:35:45,315 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:35:45,316 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:35:45,316 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:35:45,317 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139869993410832'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139869993688880'>
2025-07-27 12:35:45,318 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:35:45,318 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139869995362160'>)
2025-07-27 12:35:45,319 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:35:45,319 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:35:45,321 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:35:45,322 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:35:45,324 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:35:45,340 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:35:52,672 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:52,673 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:35:52.819898+09:00 (in 0.146778 seconds)
2025-07-27 12:35:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:35:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:36:52.819898+09:00 (in 59.999151 seconds)
2025-07-27 12:35:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:36:52 KST)" (scheduled at 2025-07-27 21:35:52.819898+09:00)
2025-07-27 12:35:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:35:52.821387
2025-07-27 12:35:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:35:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:35:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:35:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:35:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:35:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:35:52,823 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:35:52,824 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:35:52,825 - main - DEBUG - 종목 005930 현재가: 111410
2025-07-27 12:35:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:35:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 111410, 목표가: 75000.0
2025-07-27 12:35:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 111410원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:35:52,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 111410원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:35:52,827 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:35:53,067 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89619240>
2025-07-27 12:35:53,068 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:35:53,304 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea896190f0>
2025-07-27 12:35:53,304 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:35:53,305 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:35:53,305 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:35:53,305 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:35:53,305 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:35:53,877 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:35:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:35:53,877 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:35:53,878 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:35:53,878 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:35:53,878 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:35:53,879 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:35:53,880 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:35:53,880 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:35:53,880 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:35:53,881 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 111410, 목표가: 76000.0
2025-07-27 12:35:53,882 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 111410원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:35:53,882 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:35:53,883 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 111410원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:35:53,884 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:35:53,884 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:35:53,884 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:35:53,885 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:35:53,885 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:35:53,885 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:35:53,885 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:35:53,886 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:35:53,886 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:35:53,887 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:35:53,888 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:35:53,888 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:35:53,888 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:35:53,888 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:36:52 KST)" executed successfully
2025-07-27 12:36:11,267 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:36:11,274 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:36:11,278 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:36:11,279 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:36:11,280 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:36:11,280 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:36:11,578 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,583 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:36:11,587 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,591 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:36:11,594 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,599 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:36:11,603 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,606 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:36:11,607 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:36:11,609 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:36:11,623 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,627 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:36:11,628 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:36:11,628 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:36:11,629 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:36:11,629 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:11,629 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,629 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:11,630 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:37:11.280268+09:00 (in 59.649869 seconds)
2025-07-27 12:36:11,630 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:11,631 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:36:11,631 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:36:11,631 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:36:11,632 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:36:11,676 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:36:11,678 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:11,678 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,678 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:11,679 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:11,682 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,683 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:11,684 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,684 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:11,684 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:11,685 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:11,687 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:36:11,688 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:36:11,688 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:36:11,933 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:11,937 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:11,942 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:11,943 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:11,946 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:11,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,947 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:11,947 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:11,951 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,953 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:11,954 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,954 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:11,955 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:11,955 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:11,958 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:11,959 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:11,959 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,960 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:11,960 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:11,963 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:11,965 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:11,965 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:11,965 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:11,966 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:11,966 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:12,188 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,189 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:36:12,190 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:12,191 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,191 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,191 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:12,195 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:12,196 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:12,197 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,197 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:12,197 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,198 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:12,423 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,423 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:12,425 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:12,427 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:12,430 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,430 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:12,432 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:36:12,434 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:12,437 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,437 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:36:12,440 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:36:12,441 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:12,443 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:12,443 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,443 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,444 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:12,447 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:12,449 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:12,449 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,449 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:12,450 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,450 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:12,685 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,686 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:36:12,687 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:36:12,689 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:12,691 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:12,691 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,692 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,692 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:12,696 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:12,698 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:12,698 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,698 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:12,699 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,699 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:12,702 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:12,703 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:12,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,704 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,704 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:12,708 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:12,710 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:12,710 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,710 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:12,711 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,711 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:12,948 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,949 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:12,951 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:12,953 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:12,956 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:12,957 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:36:12,959 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:36:12,961 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:36:12,962 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:12,963 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,963 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,963 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:12,967 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:12,968 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:12,968 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:12,969 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:12,969 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:12,969 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:13,207 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:13,207 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:36:13,208 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:36:13,209 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:36:13,211 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:13,211 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:13,211 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:13,212 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:13,216 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:13,218 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:13,218 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:13,218 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:13,219 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:13,219 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:13,469 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:13,470 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:13,472 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:13,474 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:13,477 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:13,481 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:36:13,486 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:36:13,487 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:13,490 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:13,490 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:13,491 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:13,491 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:13,496 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:13,498 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:13,499 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:13,499 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:13,499 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:13,500 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:13,739 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:13,740 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:13,742 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:13,743 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:13,746 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:13,748 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:13,749 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:13,749 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:13,749 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:13,755 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:13,757 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:13,757 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:13,757 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:13,758 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:13,758 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:13,995 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:13,996 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:36:13,998 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:36:14,000 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:36:14,003 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:14,004 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,004 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,005 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:14,010 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:14,012 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:14,013 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,013 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:14,013 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,013 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:14,426 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:14,427 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:14,429 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:14,431 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:14,435 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:14,436 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:36:14,439 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:36:14,441 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:14,442 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:14,442 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,443 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,443 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:14,447 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:14,449 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:14,450 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,450 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:14,451 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,451 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:14,687 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:14,689 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:14,692 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:14,694 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:14,699 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:14,703 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:36:14,706 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:36:14,707 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:14,710 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:14,712 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,712 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,712 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:14,717 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:14,719 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:14,720 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,720 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:14,720 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,720 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:14,974 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:14,975 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:14,977 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:14,979 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:14,982 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:14,983 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:14,983 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,984 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,984 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:14,987 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:14,989 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:14,989 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:14,990 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:14,990 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:14,990 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,222 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:15,225 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:36:15,227 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:36:15,228 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:36:15,230 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,231 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,231 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,231 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,237 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,239 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,240 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,240 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,241 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,241 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,713 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:15,714 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:15,718 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:15,720 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,723 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:15,726 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:15,727 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,728 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,728 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,728 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,733 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,735 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,736 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,736 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,736 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,736 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,742 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:36:15,744 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,746 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,746 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,747 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,751 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,752 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,753 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,753 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,753 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,754 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,758 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:36:15,760 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,760 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,760 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,761 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,765 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,768 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,772 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,774 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,774 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,774 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,775 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,776 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,779 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:36:15,782 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:36:15,783 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:36:15,786 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:36:15,786 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:36:15,788 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,789 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,789 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,790 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,790 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,794 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,796 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,796 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,797 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,797 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,797 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,800 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:36:15,804 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:36:15,804 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:36:15,806 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:36:15,807 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:36:15,809 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,811 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,812 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,812 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,812 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,817 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,819 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,820 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,820 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,821 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,825 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:36:15,831 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:36:15,833 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,834 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,835 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,835 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,846 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,848 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,849 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,850 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,850 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,851 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,856 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:36:15,860 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:36:15,860 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:36:15,862 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:36:15,862 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:36:15,866 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:36:15.863280')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:36:15.863280')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:36:15,874 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,877 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:36:15,882 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:36:15,885 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:36:15,887 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:15,888 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,889 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,889 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,890 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,894 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,896 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,896 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,897 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,897 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,897 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,907 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:36:15,907 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:36:15,910 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:36:15,910 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 115382
2025-07-27 12:36:15,912 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:36:15,914 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:36:15,917 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:36:15,920 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:36:15,920 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:36:15,922 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:15,923 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,923 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,924 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,924 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,928 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,930 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,931 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,931 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,931 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,932 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,945 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,947 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,948 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,949 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,954 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,957 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,957 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,958 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,958 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,959 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,965 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:36:15,966 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,967 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,967 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,967 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,970 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,972 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,973 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,973 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,973 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,974 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:15,987 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:36:15,989 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:15,990 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,990 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:15,991 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:15,996 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:15,998 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:15,999 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:15,999 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:15,999 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,000 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,010 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:36:16,012 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,012 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,013 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,013 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,018 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,020 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,021 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,021 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,021 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,022 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,036 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:36:16,039 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,039 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,039 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,040 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,043 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,045 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,045 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,045 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,046 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,046 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,056 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:36:16,057 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,058 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,058 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,058 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,064 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,066 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,067 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,067 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,068 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,068 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,075 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:36:16,077 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,077 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,077 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,077 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,083 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,084 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,085 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,085 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,085 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,086 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,091 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:36:16,093 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,093 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,094 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,094 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,098 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,099 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,100 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,100 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,101 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,101 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,109 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:36:16,110 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,110 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,111 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,111 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,115 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,116 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,116 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,117 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,117 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,387 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:36:16,389 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,389 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,389 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,390 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,393 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,395 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,395 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,395 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,396 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,396 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:16,629 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:36:16,631 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:16,631 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,632 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,632 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:16,637 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:16,639 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:16,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:16,640 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:16,640 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:16,641 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:17,100 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:36:17,102 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:17,102 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,102 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,102 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:17,106 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:17,108 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:17,108 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,108 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:17,109 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,109 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:17,116 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:36:17,118 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:17,118 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,118 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,119 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:17,122 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:17,124 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:17,125 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,125 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:17,125 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,125 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:17,578 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:36:17,580 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:17,580 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,581 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,581 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:17,584 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:17,586 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:17,586 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,586 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:17,587 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,587 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:17,857 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:36:17,859 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:17,860 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,860 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,860 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:17,864 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:17,865 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:17,866 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,867 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:17,867 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,867 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:17,871 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:17,872 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:17,873 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,873 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,873 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:17,876 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:17,878 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:17,878 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:17,878 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:17,879 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:17,879 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:18,114 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:36:18,115 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:18,116 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,116 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,116 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:18,120 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:18,122 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:18,123 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,123 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:18,124 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,124 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:18,137 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:36:18,140 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:18,140 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,140 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,141 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:18,147 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:18,149 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:18,149 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,149 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:18,150 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,150 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:18,381 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:36:18,383 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:18,384 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,384 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,384 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:18,388 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:18,389 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:18,390 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,390 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:18,390 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,391 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:18,619 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:18,621 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:18,621 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,621 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,622 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:18,625 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:18,626 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:18,626 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,626 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:18,627 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,627 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:18,632 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:36:18,634 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:18,634 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,634 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,635 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:18,638 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:18,639 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:18,640 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:18,640 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:18,641 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:18,641 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:19,100 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:36:19,102 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:19,102 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,102 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,103 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:19,106 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:19,108 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:19,108 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,108 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:19,109 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,109 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:19,339 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:36:19,341 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:19,342 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,342 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,342 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:19,346 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:19,347 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:19,347 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,347 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:19,348 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,348 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:19,358 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:36:19,365 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:36:19,367 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:36:19,371 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:36:19,373 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:36:19,375 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:19,376 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:19,377 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,377 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,377 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:19,381 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:19,383 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:19,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,383 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:19,384 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:19,384 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,385 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:36:19,386 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:36:19,396 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:19,400 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:36:19,405 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:36:19,405 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:36:19,420 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:36:19,420 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:36:19,442 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:36:19,444 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:36:19,459 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:36:19,459 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:36:19,463 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:19,463 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:36:19,465 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:36:19,466 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:36:19,467 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:36:19,467 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:36:19,474 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:36:19,476 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:36:19,479 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:19,480 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:36:19,482 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:36:19,482 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:36:19,484 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:36:19,485 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:36:19,492 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:36:19,494 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:36:19,499 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:19,499 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,500 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,500 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:19,504 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:19,506 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:36:19,507 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:19,507 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:36:19,508 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:19,508 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:36:19,741 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:36:19,964 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:36:19,967 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:36:19,969 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:36:19,971 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:36:19,974 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:19,975 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:36:19,977 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:36:19,979 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:36:19,982 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:36:19,984 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:36:19,984 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:36:19,986 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:36:19,986 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:36:19,987 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:36:19.986627')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:36:19.986627')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:36:19,989 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:36:19,992 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:36:19,993 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:36:19,994 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:36:19,994 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 162039
2025-07-27 12:36:19,995 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:36:19,997 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:36:20,000 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:36:20,001 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:36:20,001 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:36:20,003 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:36:20,005 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:36:20,006 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:20,006 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:36:20,006 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:36:20,013 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:36:20.013078
2025-07-27 12:36:20,013 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:36:20,013 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:36:20,013 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:36:20,015 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139726830230864'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139726830246528'>
2025-07-27 12:36:20,015 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:36:20,018 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139726830366880'>)
2025-07-27 12:36:20,019 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:36:20,019 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:36:20,020 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:36:20,021 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:36:20,021 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:36:20,024 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139726626564672'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139726626854160'>
2025-07-27 12:36:20,024 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:36:20,025 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139726830366880'>)
2025-07-27 12:36:20,026 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:36:20,026 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:36:20,030 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:36:20,031 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:36:20,033 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:36:20,051 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:36:52,672 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:52,673 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:36:52.819898+09:00 (in 0.146756 seconds)
2025-07-27 12:36:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:36:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:37:52.819898+09:00 (in 59.998743 seconds)
2025-07-27 12:36:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:37:52 KST)" (scheduled at 2025-07-27 21:36:52.819898+09:00)
2025-07-27 12:36:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:36:52.821986
2025-07-27 12:36:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:36:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:36:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:36:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:36:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:36:52,825 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:36:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:36:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:36:52,826 - main - DEBUG - 종목 005930 현재가: 179382
2025-07-27 12:36:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:36:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 179382, 목표가: 75000.0
2025-07-27 12:36:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 179382원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:36:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 179382원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:36:52,829 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:36:53,067 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829e800>
2025-07-27 12:36:53,067 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:36:53,308 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88466920>
2025-07-27 12:36:53,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:36:53,309 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:36:53,309 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:36:53,310 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:36:53,310 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:36:53,889 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:36:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:36:53,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:36:53,890 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:36:53,890 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:36:53,890 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:36:53,890 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:36:53,891 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:36:53,892 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:36:53,892 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:36:53,892 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 179382, 목표가: 76000.0
2025-07-27 12:36:53,893 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 179382원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:36:53,894 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:36:53,894 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 179382원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:36:53,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:36:53,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:36:53,896 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:36:53,896 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:36:53,896 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:36:53,897 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:36:53,897 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:36:53,897 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:36:53,898 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:36:53,899 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:36:53,900 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:36:53,900 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:36:53,900 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:36:53,900 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:37:52 KST)" executed successfully
2025-07-27 12:37:32,476 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:37:32,481 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:37:32,484 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:37:32,484 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:37:32,485 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:37:32,485 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:37:32,804 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:32,809 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:37:32,813 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:32,817 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:37:32,820 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:32,823 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:37:32,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:32,830 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:37:32,830 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:37:32,833 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:37:32,850 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:32,855 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:37:32,855 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:37:32,856 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:37:32,856 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:37:32,856 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:32,857 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:32,857 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:32,857 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:38:32.485259+09:00 (in 59.627573 seconds)
2025-07-27 12:37:32,858 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:32,859 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:37:32,859 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:37:32,859 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:37:32,859 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:37:32,886 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:37:32,888 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:32,888 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:32,888 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:32,888 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:32,892 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:32,894 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:32,894 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:32,895 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:32,895 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:32,895 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:32,897 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:37:32,898 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:37:32,899 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:37:33,149 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:33,152 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:33,157 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:33,159 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:33,162 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:33,163 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,163 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,163 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:33,167 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:33,169 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:33,170 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,170 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:33,171 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,171 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:33,174 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:33,176 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:33,177 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,177 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,177 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:33,180 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:33,182 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:33,182 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,182 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:33,182 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,183 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:33,406 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:33,408 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:37:33,409 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:33,409 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,410 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,410 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:33,413 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:33,415 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:33,415 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,415 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:33,416 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,416 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:33,641 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:33,643 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:33,646 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:33,649 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:33,652 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:33,653 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:33,655 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:37:33,656 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:33,661 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:33,662 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:37:33,665 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:37:33,670 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:33,673 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:33,674 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,674 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,674 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:33,678 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:33,680 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:33,681 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,681 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:33,681 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,681 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:33,950 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:33,951 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:37:33,952 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:37:33,954 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:33,955 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:33,956 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,956 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,956 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:33,960 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:33,961 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:33,962 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,962 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:33,963 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,963 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:33,967 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:33,968 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:33,968 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,969 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,969 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:33,972 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:33,973 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:33,974 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:33,974 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:33,974 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:33,975 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:34,218 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:34,219 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:34,221 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:34,223 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:34,227 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:34,229 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:37:34,231 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:37:34,234 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:37:34,236 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:34,237 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:34,237 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:34,238 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:34,244 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:34,247 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:34,247 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:34,247 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:34,248 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:34,248 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:34,482 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:34,483 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:37:34,484 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:37:34,485 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:37:34,487 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:34,487 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:34,487 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:34,488 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:34,491 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:34,492 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:34,493 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:34,493 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:34,493 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:34,494 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:34,724 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:34,725 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:34,728 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:34,730 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:34,734 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:34,738 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:37:34,744 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:37:34,746 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:37:34,748 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:34,748 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:34,749 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:34,749 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:34,754 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:34,755 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:34,756 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:34,756 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:34,756 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:34,757 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:34,998 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:35,000 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:35,004 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:35,007 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:35,011 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:35,014 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:35,015 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:35,015 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:35,015 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:35,021 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:35,023 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:35,024 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:35,024 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:35,024 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:35,025 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:35,273 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:35,274 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:37:35,276 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:37:35,277 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:37:35,279 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:35,279 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:35,279 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:35,282 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:35,287 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:35,289 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:35,290 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:35,290 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:35,290 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:35,291 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:35,810 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:35,811 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:35,814 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:35,816 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:35,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:35,823 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:37:35,830 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:37:35,833 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:35,835 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:35,835 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:35,836 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:35,836 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:35,842 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:35,844 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:35,845 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:35,845 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:35,846 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:35,846 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:36,086 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:36,087 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:36,089 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:36,091 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:36,095 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:36,097 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:37:36,100 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:37:36,101 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:37:36,104 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:36,104 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:36,105 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:36,105 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:36,109 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:36,111 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:36,111 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:36,112 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:36,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:36,112 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:36,413 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:36,414 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:36,418 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:36,420 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:36,423 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:36,425 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:36,426 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:36,426 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:36,427 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:36,432 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:36,434 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:36,434 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:36,435 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:36,435 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:36,436 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:36,714 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:36,717 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:37:36,719 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:37:36,721 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:37:36,724 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:36,725 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:36,725 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:36,725 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:36,734 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:36,737 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:36,738 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:36,738 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:36,739 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:36,739 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,256 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:37,257 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:37,259 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:37,261 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:37,265 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:37,267 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:37,269 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,270 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,270 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,270 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,274 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,276 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,277 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,277 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,277 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,278 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,283 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:37:37,285 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,286 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,286 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,286 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,290 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,293 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,293 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,293 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,294 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,294 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,301 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:37:37,303 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,304 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,304 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,304 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,309 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,313 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:37:37,316 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,318 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,318 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,318 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,319 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,319 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,323 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:37:37,327 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:37:37,328 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:37:37,332 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:37:37,333 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:37:37,336 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:37:37,339 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,339 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,340 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,340 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,345 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,347 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,347 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,347 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,348 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,348 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,351 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:37:37,355 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:37:37,355 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:37:37,357 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:37:37,358 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:37:37,360 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:37:37,361 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,362 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,362 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,363 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,367 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,369 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,370 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,370 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,371 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,371 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,374 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:37:37,379 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:37:37,381 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,381 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,382 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,628 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,630 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,631 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,631 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,632 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,632 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,646 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:37:37,647 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:37:37,650 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:37:37,651 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 64900
2025-07-27 12:37:37,655 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:37:37,657 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:37:37,661 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:37:37,665 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:37:37,666 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:37:37,668 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:37:37,670 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,671 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,671 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,671 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,676 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,678 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,679 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,679 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,680 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,680 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,695 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:37:37,697 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,698 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,698 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,698 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,702 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,704 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,705 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,705 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,705 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,706 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,713 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:37:37,715 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,716 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,716 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,716 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,721 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,724 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,725 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,725 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,725 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,726 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,745 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:37:37,747 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,748 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,748 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,749 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,753 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,755 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,755 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,755 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,756 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,756 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,769 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:37:37,771 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,771 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,772 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,772 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,778 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,780 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,781 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,781 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,781 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,782 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,791 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:37:37,793 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,794 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,795 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,795 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,802 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,804 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,805 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,805 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,805 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,805 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,818 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:37:37,820 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,821 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,821 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,828 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,829 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,829 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,829 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,829 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,835 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:37:37,838 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,839 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,840 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,840 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,847 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,850 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,851 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,851 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,851 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,852 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,862 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:37:37,864 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,864 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,865 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,865 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,869 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,872 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,873 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,873 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,873 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,874 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:37,881 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:37:37,884 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:37,885 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,886 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,886 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:37,895 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:37,897 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:37,898 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:37,898 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:37,899 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:37,899 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:38,215 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:37:38,218 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:38,218 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,219 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,219 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:38,224 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:38,226 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:38,226 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,226 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:38,227 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,227 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:38,467 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:37:38,469 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:38,469 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,469 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,469 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:38,473 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:38,474 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:38,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,475 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,474 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:38,475 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:38,937 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:37:38,940 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:38,941 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,941 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,941 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:38,946 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:38,948 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:38,949 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,949 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:38,949 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,949 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:38,957 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:37:38,958 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:38,959 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,959 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,959 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:38,964 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:38,967 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:38,968 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:38,968 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:38,969 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:38,969 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:39,439 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:37:39,442 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:39,442 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:39,443 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:39,443 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:39,448 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:39,451 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:39,452 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:39,452 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:39,452 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:39,453 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:39,690 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:37:39,693 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:39,693 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:39,694 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:39,694 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:39,700 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:39,702 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:39,703 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:39,703 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:39,704 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:39,704 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:39,709 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:39,711 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:39,712 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:39,712 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:39,713 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:39,718 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:39,719 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:39,720 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:39,720 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:39,721 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:39,721 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:40,020 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:37:40,023 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:40,025 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,027 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,028 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:40,035 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:40,037 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:40,038 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,038 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:40,039 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,039 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:40,052 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:37:40,054 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:40,054 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,054 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,055 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:40,061 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:40,063 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:40,064 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,064 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:40,065 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,065 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:40,303 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:37:40,305 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:40,305 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,305 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,305 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:40,309 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:40,311 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:40,311 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,312 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:40,312 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,312 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:40,565 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:37:40,566 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:40,567 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,567 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,567 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:40,572 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:40,574 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:40,575 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,575 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:40,575 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,576 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:40,584 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:37:40,586 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:40,587 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,588 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,588 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:40,593 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:40,595 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:40,596 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:40,596 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:40,596 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:40,596 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:41,062 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:37:41,064 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:41,065 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,065 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,065 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:41,070 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:41,071 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:41,072 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,072 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:41,072 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,073 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:41,307 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:37:41,309 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:41,309 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,310 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,310 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:41,314 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:41,315 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:41,316 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,316 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:41,316 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,316 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:41,323 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:37:41,327 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:37:41,329 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:37:41,332 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:37:41,334 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:37:41,335 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:37:41,337 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:41,338 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,338 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,338 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:41,343 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:41,345 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:41,345 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,345 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:41,346 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,346 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:41,347 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:37:41,348 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:37:41,351 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:41,355 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:37:41,359 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:37:41,359 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:37:41,363 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:37:41,364 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:37:41,375 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:37:41,376 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:37:41,381 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:37:41,381 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:37:41,385 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:41,386 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:37:41,388 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:37:41,389 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:37:41,390 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:37:41,391 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:37:41,397 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:37:41,399 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:37:41,402 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:41,403 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:37:41,405 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:37:41,405 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:37:41,407 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:37:41,407 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:37:41,413 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:37:41,415 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:37:41,421 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:41,421 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,422 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,422 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:41,426 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:41,428 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:37:41,429 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:41,429 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:37:41,429 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:41,430 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:37:41,764 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:37:42,006 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:37:42,010 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:37:42,013 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:37:42,014 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:37:42,018 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:42,018 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:37:42,021 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:37:42,023 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:37:42,024 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:37:42,027 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:37:42,027 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:37:42,028 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:37:42,028 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:37:42,030 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:37:42.029053')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:37:42.029053')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:37:42,035 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:37:42,038 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:37:42,038 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:37:42,039 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:37:42,040 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 145113
2025-07-27 12:37:42,041 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:37:42,042 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:37:42,045 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:37:42,046 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:37:42,046 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:37:42,048 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:37:42,049 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:37:42,050 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:42,050 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:37:42,050 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:37:42,057 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:37:42.057440
2025-07-27 12:37:42,058 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:37:42,058 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:37:42,058 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:37:42,062 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139662578777728'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139662600850304'>
2025-07-27 12:37:42,062 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:37:42,167 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139662578822512'>)
2025-07-27 12:37:42,169 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:37:42,170 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:37:42,170 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:37:42,171 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:37:42,171 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:37:42,172 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139662578903280'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139662579132224'>
2025-07-27 12:37:42,173 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:37:42,173 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139662578822512'>)
2025-07-27 12:37:42,174 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:37:42,174 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:37:42,176 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:37:42,177 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:37:42,178 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:37:42,193 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:37:52,659 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:52,659 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:37:52.819898+09:00 (in 0.160331 seconds)
2025-07-27 12:37:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:37:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:38:52.819898+09:00 (in 59.999164 seconds)
2025-07-27 12:37:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:38:52 KST)" (scheduled at 2025-07-27 21:37:52.819898+09:00)
2025-07-27 12:37:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:37:52.821391
2025-07-27 12:37:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:37:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:37:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:37:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:37:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:37:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:37:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:37:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:37:52,825 - main - DEBUG - 종목 005930 현재가: 101589
2025-07-27 12:37:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:37:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 101589, 목표가: 75000.0
2025-07-27 12:37:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 101589원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:37:52,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 101589원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:37:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:37:53,065 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88464c70>
2025-07-27 12:37:53,066 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:37:53,302 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88467d30>
2025-07-27 12:37:53,303 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:37:53,304 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:37:53,304 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:37:53,304 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:37:53,305 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:37:53,875 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:37:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:37:53,876 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:37:53,876 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:37:53,877 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:37:53,877 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:37:53,877 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:37:53,879 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:37:53,879 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:37:53,879 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:37:53,879 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 101589, 목표가: 76000.0
2025-07-27 12:37:53,881 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 101589원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:37:53,881 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:37:53,882 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 101589원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:37:53,882 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:37:53,883 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:37:53,883 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:37:53,884 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:37:53,884 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:37:53,884 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:37:53,884 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:37:53,885 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:37:53,885 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:37:53,886 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:37:53,886 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:37:53,887 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:37:53,887 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:37:53,887 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:38:52 KST)" executed successfully
2025-07-27 12:38:14,243 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:38:14,253 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:38:14,256 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:38:14,257 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:38:14,258 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:38:14,258 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:38:14,581 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,586 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:38:14,589 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,592 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:38:14,595 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,598 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:38:14,601 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,604 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:38:14,605 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:38:14,607 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:38:14,618 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,622 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:38:14,622 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:38:14,623 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:38:14,623 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:38:14,623 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:14,624 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,624 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:14,624 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:39:14.258337+09:00 (in 59.633855 seconds)
2025-07-27 12:38:14,624 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:14,625 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:38:14,625 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:38:14,625 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:38:14,625 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:38:14,653 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:38:14,655 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:14,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,655 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:14,656 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:14,659 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,661 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:14,661 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,661 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:14,662 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:14,662 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:14,664 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:38:14,665 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:38:14,665 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:38:14,912 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:14,916 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:14,922 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:14,924 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:14,928 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:14,929 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,929 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:14,930 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:14,935 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,937 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:14,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,937 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:14,938 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:14,938 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:14,941 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:14,943 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:14,943 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,943 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:14,944 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:14,947 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:14,949 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:14,949 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:14,949 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:14,950 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:14,950 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:15,171 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,173 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:38:15,174 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:15,174 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,175 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,175 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:15,178 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:15,180 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:15,180 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,180 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:15,180 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,181 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:15,400 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,401 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:15,403 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:15,405 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:15,408 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,408 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:15,411 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:38:15,413 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:15,416 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,417 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:38:15,419 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:38:15,421 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:15,423 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:15,423 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,423 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,424 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:15,427 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:15,429 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:15,430 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,430 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:15,430 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,431 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:15,698 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,699 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:38:15,701 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:38:15,703 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:15,705 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:15,706 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,707 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,707 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:15,713 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:15,715 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:15,716 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,716 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:15,716 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,717 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:15,722 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:15,725 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:15,726 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,726 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,726 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:15,733 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:15,735 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:15,736 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,736 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:15,736 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,737 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:15,963 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,964 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:15,967 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:15,970 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:15,974 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:15,975 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:38:15,978 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:38:15,979 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:38:15,981 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:15,981 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,981 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,981 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:15,986 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:15,988 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:15,988 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:15,988 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:15,989 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:15,989 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:16,219 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:16,220 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:38:16,221 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:38:16,222 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:38:16,224 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:16,224 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,224 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,225 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:16,229 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:16,231 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:16,231 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,231 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:16,232 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,232 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:16,460 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:16,461 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:16,463 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:16,465 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:16,468 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:16,471 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:38:16,477 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:38:16,479 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:16,482 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:16,483 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,483 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,483 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:16,488 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:16,490 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:16,490 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,490 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:16,491 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,491 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:16,720 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:16,721 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:16,723 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:16,726 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:16,728 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:16,729 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:16,730 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,730 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,730 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:16,738 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:16,739 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:16,740 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,740 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:16,741 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,741 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:16,971 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:16,971 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:38:16,973 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:38:16,974 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:38:16,975 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:16,976 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,976 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,976 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:16,981 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:16,983 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:16,985 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:16,985 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:16,985 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:16,986 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:17,488 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:17,489 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:17,493 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:17,495 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:17,499 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:17,500 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:38:17,503 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:38:17,504 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:17,506 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:17,506 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:17,506 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:17,507 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:17,511 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:17,513 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:17,514 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:17,514 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:17,514 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:17,514 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:17,740 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:17,741 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:17,743 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:17,744 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:17,749 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:17,752 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:38:17,754 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:38:17,756 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:17,758 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:17,759 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:17,759 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:17,759 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:17,763 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:17,764 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:17,765 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:17,765 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:17,765 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:17,766 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,004 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:18,005 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:18,007 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:18,009 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:18,011 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:18,013 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,013 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,013 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,014 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,018 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,019 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,020 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,020 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,020 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,021 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,265 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:18,269 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:38:18,271 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:38:18,273 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:38:18,276 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,277 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,277 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,278 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,282 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,284 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,285 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,285 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,286 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,286 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,789 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:18,790 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:18,793 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:18,795 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:18,800 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:18,802 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:18,804 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,804 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,805 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,805 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,808 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,811 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,811 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,812 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,812 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,812 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,817 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:38:18,819 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,819 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,820 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,820 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,829 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,830 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,830 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,831 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,831 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,836 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:38:18,838 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,839 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,839 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,840 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,845 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,849 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:38:18,851 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,853 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,853 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,854 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,854 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,854 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,858 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:38:18,862 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:38:18,862 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:38:18,866 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:38:18,866 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:38:18,868 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:38:18,870 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,871 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,871 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,871 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,876 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,878 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,879 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,879 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,879 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,880 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,883 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:38:18,886 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:38:18,886 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:38:18,889 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:38:18,889 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:38:18,891 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:38:18,892 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,893 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,893 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,893 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,897 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,898 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,898 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,898 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,899 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,899 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:18,902 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:38:18,905 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:38:18,906 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:18,907 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,907 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,907 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:18,911 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:18,913 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:18,914 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:18,914 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:18,914 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:18,914 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:19,870 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:19,870 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:19,871 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:19,871 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:19,883 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:19,886 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:19,887 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:19,887 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:19,888 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:19,888 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:19,896 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:38:19,902 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:38:19,904 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:38:19,907 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:38:19,909 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:19,909 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:19,909 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:19,910 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:19,916 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:19,918 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:19,918 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:19,918 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:19,919 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:19,919 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:20,166 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:38:20,168 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:38:20,169 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:38:20,171 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:20,173 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:20,174 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:20,174 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:20,174 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:20,180 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:20,183 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:20,184 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:20,184 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:20,185 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:20,185 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:21,067 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:21,068 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:21,068 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:21,068 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:21,075 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:21,078 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:21,079 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:21,079 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:21,079 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:21,080 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:22,020 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:22,020 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:22,021 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:22,021 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:22,027 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:22,029 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:22,029 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:22,029 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:22,030 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:22,030 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:23,083 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:23,083 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:23,083 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:23,084 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:23,089 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:23,091 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:23,091 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:23,091 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:23,092 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:23,092 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:23,981 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:23,982 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:23,982 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:23,983 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:23,988 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:23,991 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:23,992 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:23,992 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:23,993 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:23,994 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,004 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:38:24,005 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:38:24,007 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:38:24,008 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 197760
2025-07-27 12:38:24,011 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:38:24,012 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:38:24,016 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:38:24,019 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:38:24,019 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:38:24,021 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:24,022 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,023 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,023 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,023 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,028 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,031 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,031 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,032 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,032 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,032 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,045 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:38:24,047 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,047 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,047 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,048 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,051 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,053 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,054 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,054 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,054 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,055 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,061 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:38:24,064 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,064 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,065 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,065 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,070 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,073 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,074 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,074 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,074 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,075 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,087 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:38:24,089 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,089 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,089 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,090 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,094 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,096 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,097 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,097 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,097 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,097 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,110 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:38:24,112 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,112 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,112 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,116 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,117 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,118 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,118 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,118 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,119 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,129 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:38:24,131 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,131 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,132 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,132 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,135 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,136 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,137 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,137 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,138 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,138 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,146 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:38:24,148 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,148 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,149 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,149 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,153 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,155 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,155 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,155 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,156 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,156 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,160 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:38:24,161 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,161 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,162 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,162 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,165 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,167 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,167 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,167 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,168 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,168 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,174 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:38:24,175 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,176 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,176 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,176 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,180 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,181 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,182 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,182 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,182 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,183 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,188 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:38:24,190 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,190 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,190 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,191 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,194 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,196 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,196 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,196 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,196 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,197 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,451 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:38:24,455 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,455 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,455 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,456 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,460 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,462 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,463 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,463 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,463 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,464 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:24,734 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:38:24,736 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:24,736 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,737 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,737 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:24,741 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:24,744 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:24,744 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:24,745 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:24,745 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:24,745 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:25,207 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:38:25,209 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:25,209 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,209 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,210 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:25,214 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:25,215 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:25,216 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,216 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:25,216 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,217 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:25,223 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:38:25,226 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:25,226 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,227 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,227 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:25,233 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:25,235 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:25,235 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,235 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:25,236 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,236 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:25,700 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:38:25,702 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:25,702 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,702 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,703 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:25,706 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:25,708 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:25,708 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,708 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:25,709 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,709 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:25,946 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:38:25,949 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:25,949 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,950 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,950 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:25,957 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:25,959 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:25,961 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,961 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:25,962 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,962 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:25,965 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:25,968 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:25,968 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,969 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,969 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:25,973 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:25,975 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:25,975 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:25,976 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:25,976 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:25,976 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:26,222 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:38:26,225 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:26,225 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,226 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,226 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:26,233 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:26,236 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:26,237 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,237 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:26,237 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,238 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:26,249 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:38:26,251 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:26,251 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,251 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,252 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:26,255 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:26,258 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:26,258 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,258 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:26,259 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,259 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:26,494 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:38:26,495 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:26,496 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,496 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,497 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:26,501 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:26,502 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:26,502 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,503 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:26,503 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,503 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:26,767 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:26,769 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:26,769 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,770 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,770 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:26,774 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:26,776 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:26,776 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,776 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:26,777 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,777 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:26,783 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:38:26,785 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:26,785 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,785 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,786 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:26,790 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:26,791 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:26,792 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:26,792 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:26,792 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:26,793 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:27,269 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:38:27,271 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:27,271 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,271 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,272 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:27,276 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:27,278 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:27,278 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,279 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:27,279 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,279 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:27,521 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:38:27,522 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:27,523 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,523 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,523 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:27,528 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:27,530 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:27,531 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,531 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:27,532 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,532 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:27,539 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:38:27,544 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:38:27,546 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:38:27,550 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:38:27,552 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:38:27,554 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:27,555 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:27,556 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,556 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,556 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:27,561 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:27,563 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:27,564 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,564 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:27,565 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,565 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:27,566 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:38:27,567 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:38:27,571 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:27,575 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:38:27,579 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:38:27,580 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:38:27,584 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:38:27,584 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:38:27,595 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:38:27,597 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:38:27,603 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:38:27,604 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:38:27,608 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:27,609 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:38:27,614 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:38:27,614 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:38:27,617 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:38:27,618 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:38:27,627 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:38:27,629 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:38:27,632 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:27,634 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:38:27,636 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:38:27,637 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:38:27,639 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:38:27,639 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:38:27,650 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:38:27,653 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:38:27,661 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:27,661 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,662 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,662 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:27,667 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:27,669 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:38:27,669 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:27,670 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:38:27,670 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:27,670 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:38:27,912 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:38:28,148 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:38:28,152 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:38:28,155 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:38:28,157 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:38:28,161 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:28,162 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:38:28,164 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:38:28,167 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:38:28,170 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:38:28,174 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:38:28,174 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:38:28,176 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:38:28,177 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:38:28,179 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:38:28.177581')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:38:28.177581')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:38:28,182 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:38:28,187 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:38:28,187 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:38:28,190 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:38:28,191 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 197241
2025-07-27 12:38:28,193 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:38:28,195 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:38:28,198 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:38:28,200 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:38:28,201 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:38:28,203 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:38:28,205 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:38:28,206 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:28,206 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:38:28,206 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:38:28,214 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:38:28.214771
2025-07-27 12:38:28,216 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:38:28,216 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:38:28,216 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:38:28,218 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139967492117728'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139967492137808'>
2025-07-27 12:38:28,219 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:38:28,223 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139967492054208'>)
2025-07-27 12:38:28,224 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:38:28,224 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:38:28,225 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:38:28,226 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:38:28,226 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:38:28,228 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139967492741616'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139967489158176'>
2025-07-27 12:38:28,228 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:38:28,229 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139967492054208'>)
2025-07-27 12:38:28,230 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:38:28,231 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:38:28,233 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:38:28,234 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:38:28,235 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:38:28,258 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:38:52,682 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:52,682 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:38:52.819898+09:00 (in 0.137150 seconds)
2025-07-27 12:38:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:38:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:39:52.819898+09:00 (in 59.999102 seconds)
2025-07-27 12:38:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:39:52 KST)" (scheduled at 2025-07-27 21:38:52.819898+09:00)
2025-07-27 12:38:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:38:52.821476
2025-07-27 12:38:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:38:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:38:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:38:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:38:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:38:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:38:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:38:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:38:52,825 - main - DEBUG - 종목 005930 현재가: 146651
2025-07-27 12:38:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:38:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 146651, 목표가: 75000.0
2025-07-27 12:38:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 146651원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:38:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 146651원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:38:52,829 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:38:53,067 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829d2a0>
2025-07-27 12:38:53,067 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:38:53,305 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829f6d0>
2025-07-27 12:38:53,305 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:38:53,306 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:38:53,306 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:38:53,306 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:38:53,307 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:38:53,884 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:38:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:38:53,885 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:38:53,885 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:38:53,885 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:38:53,885 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:38:53,886 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:38:53,887 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:38:53,887 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:38:53,887 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:38:53,887 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 146651, 목표가: 76000.0
2025-07-27 12:38:53,889 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 146651원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:38:53,889 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:38:53,889 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 146651원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:38:53,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:38:53,891 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:38:53,891 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:38:53,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:38:53,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:38:53,892 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:38:53,892 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:38:53,892 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:38:53,893 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:38:53,894 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:38:53,895 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:38:53,895 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:38:53,895 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:38:53,895 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:39:52 KST)" executed successfully
2025-07-27 12:39:18,704 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:39:18,711 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:39:18,714 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:39:18,714 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:39:18,715 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:39:18,716 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:39:18,991 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:18,996 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:39:18,999 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,001 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:39:19,004 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,007 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:39:19,010 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,012 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:39:19,012 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:39:19,014 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:39:19,023 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,027 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:39:19,028 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:39:19,028 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:39:19,028 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:39:19,028 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:19,029 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,029 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:19,029 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:40:18.715924+09:00 (in 59.686224 seconds)
2025-07-27 12:39:19,029 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:19,030 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:39:19,030 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:39:19,030 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:39:19,030 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:39:19,054 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:39:19,056 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:19,057 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,057 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,058 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:19,062 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,064 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:19,064 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,064 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:19,065 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,065 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:19,066 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:39:19,067 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:39:19,068 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:39:19,312 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:19,315 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:19,320 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:19,322 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:19,325 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:19,325 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,325 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,326 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:19,329 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,330 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:19,331 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,331 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:19,331 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,331 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:19,334 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:19,336 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:19,336 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,336 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,336 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:19,339 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,341 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:19,341 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,341 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:19,341 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,342 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:19,560 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:19,562 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:39:19,563 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:19,563 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,563 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,564 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:19,567 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,568 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:19,569 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,569 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:19,569 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,569 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:19,791 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:19,792 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:19,795 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:19,796 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:19,800 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:19,801 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:19,803 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:39:19,805 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:19,809 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:19,810 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:39:19,813 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:39:19,815 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:19,816 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:19,817 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,817 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,817 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:19,821 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:19,823 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:19,823 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:19,823 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:19,824 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:19,824 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:20,051 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:20,052 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:39:20,053 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:39:20,054 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:20,056 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:20,056 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,056 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,056 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:20,060 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:20,061 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:20,061 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,062 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:20,062 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,062 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:20,066 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:20,067 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:20,068 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,069 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,073 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:20,078 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:20,079 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:20,080 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,080 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:20,080 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,081 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:20,308 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:20,309 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:20,311 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:20,313 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:20,318 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:20,319 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:39:20,321 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:39:20,323 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:39:20,325 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:20,325 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,326 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,326 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:20,330 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:20,332 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:20,332 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,332 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:20,333 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,333 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:20,558 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:20,559 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:39:20,560 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:39:20,562 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:39:20,564 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:20,564 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,564 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,564 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:20,568 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:20,569 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:20,570 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,570 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:20,571 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,571 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:20,838 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:20,839 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:20,841 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:20,843 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:20,846 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:20,849 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:39:20,853 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:39:20,855 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:20,857 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:20,857 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,857 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,858 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:20,862 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:20,863 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:20,864 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:20,864 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:20,864 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:20,864 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:21,090 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:21,091 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:21,094 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:21,096 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:21,100 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:21,101 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:21,102 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:21,103 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:21,103 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:21,111 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:21,113 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:21,113 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:21,114 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:21,114 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:21,114 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:21,340 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:21,341 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:39:21,343 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:39:21,344 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:39:21,346 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:21,347 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:21,347 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:21,347 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:21,351 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:21,353 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:21,354 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:21,354 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:21,355 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:21,355 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:21,831 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:21,833 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:21,835 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:21,838 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:21,842 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:21,842 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:39:21,846 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:39:21,848 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:21,850 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:21,850 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:21,850 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:21,851 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:21,855 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:21,857 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:21,858 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:21,858 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:21,858 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:21,859 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:22,116 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:22,116 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:22,118 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:22,120 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:22,123 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:22,124 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:39:22,127 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:39:22,128 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:22,131 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:22,132 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:22,132 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:22,132 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:22,136 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:22,137 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:22,138 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:22,138 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:22,139 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:22,139 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:22,370 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:22,371 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:22,374 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:22,376 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:22,380 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:22,382 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:22,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:22,383 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:22,384 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:22,388 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:22,390 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:22,390 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:22,390 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:22,390 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:22,391 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:22,621 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:22,623 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:39:22,624 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:39:22,625 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:39:22,627 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:22,628 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:22,628 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:22,628 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:22,633 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:22,634 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:22,635 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:22,635 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:22,635 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:22,635 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:23,112 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:23,113 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:23,116 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:23,118 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:23,122 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:23,125 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:23,126 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:23,127 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,127 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,127 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:23,131 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,133 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:23,133 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,133 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:23,134 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,134 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:23,139 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:39:23,141 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:23,141 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,142 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,142 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:23,146 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,147 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:23,148 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,148 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:23,149 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,149 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:23,156 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:39:23,158 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:23,158 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,159 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,159 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:23,163 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,166 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:39:23,169 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,170 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:23,171 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,171 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:23,171 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,172 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:23,174 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:39:23,178 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:39:23,178 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:39:23,181 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:39:23,181 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:39:23,183 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:39:23,184 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:23,184 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,185 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,185 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:23,188 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,190 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:23,190 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,190 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:23,191 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,191 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:23,193 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:39:23,196 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:39:23,196 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:39:23,199 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:39:23,199 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:39:23,201 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:39:23,202 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:23,202 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,203 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,203 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:23,206 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,208 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:23,209 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,209 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:23,209 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,209 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:23,212 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:39:23,216 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:39:23,217 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:23,218 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,218 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,218 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:23,222 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:23,224 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:23,225 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:23,225 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:23,225 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:23,225 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:24,258 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:24,258 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:24,259 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:24,259 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:24,264 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:24,266 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:24,266 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:24,266 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:24,267 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:24,267 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:24,273 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:39:24,277 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:39:24,280 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:39:24,283 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:39:24,285 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:24,285 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:24,286 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:24,286 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:24,293 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:24,295 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:24,296 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:24,296 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:24,296 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:24,297 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:24,531 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:39:24,532 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:39:24,533 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:39:24,534 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:24,535 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:24,536 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:24,536 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:24,536 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:24,540 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:24,542 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:24,542 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:24,542 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:24,543 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:24,543 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:25,468 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:25,468 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:25,469 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:25,469 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:25,473 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:25,475 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:25,476 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:25,476 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:25,476 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:25,476 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:26,431 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:26,431 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:26,432 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:26,432 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:26,438 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:26,440 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:26,441 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:26,441 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:26,441 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:26,442 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:27,447 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:27,448 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:27,448 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:27,449 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:27,455 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:27,457 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:27,458 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:27,458 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:27,459 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:27,459 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,421 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,422 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,422 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,423 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,427 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,429 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,430 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,430 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,431 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,431 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,440 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:39:28,440 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:39:28,442 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:39:28,442 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 174077
2025-07-27 12:39:28,445 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:39:28,447 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:39:28,450 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:39:28,453 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:39:28,454 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:39:28,456 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:28,459 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,459 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,459 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,460 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,463 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,465 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,466 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,466 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,466 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,467 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,478 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:39:28,479 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,480 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,480 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,480 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,484 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,486 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,487 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,487 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,487 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,487 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,493 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:39:28,494 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,494 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,495 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,495 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,498 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,500 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,501 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,501 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,502 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,502 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,512 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:39:28,514 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,514 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,514 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,515 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,519 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,520 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,521 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,521 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,521 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,522 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,530 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:39:28,532 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,532 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,533 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,533 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,536 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,538 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,538 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,538 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,539 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,539 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,547 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:39:28,549 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,549 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,549 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,550 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,553 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,555 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,555 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,555 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,556 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,556 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,566 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:39:28,567 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,567 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,568 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,568 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,571 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,572 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,573 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,573 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,573 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,574 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,577 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:39:28,579 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,579 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,579 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,579 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,583 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,584 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,585 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,585 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,585 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,586 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,591 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:39:28,593 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,593 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,593 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,593 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,597 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,598 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,599 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,599 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,599 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,600 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,605 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:39:28,606 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,607 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,607 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,607 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,611 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,612 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,613 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,613 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,614 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,614 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:28,860 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:39:28,863 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:28,863 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,863 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,864 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:28,869 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:28,870 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:28,871 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:28,871 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:28,871 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:28,872 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:29,103 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:39:29,105 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:29,105 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:29,105 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:29,105 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:29,109 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:29,111 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:29,111 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:29,111 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:29,111 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:29,112 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:29,623 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:39:29,625 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:29,626 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:29,626 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:29,626 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:29,630 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:29,631 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:29,632 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:29,632 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:29,632 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:29,632 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:29,638 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:39:29,640 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:29,641 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:29,641 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:29,641 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:29,645 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:29,646 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:29,646 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:29,646 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:29,647 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:29,647 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:30,098 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:39:30,099 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:30,100 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,100 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,100 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:30,104 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:30,105 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:30,105 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,106 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:30,106 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,106 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:30,337 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:39:30,338 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:30,339 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,339 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,339 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:30,343 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:30,345 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:30,345 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,346 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:30,346 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,346 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:30,349 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:30,350 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:30,350 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,351 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,351 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:30,354 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:30,355 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:30,356 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,356 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:30,356 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,356 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:30,594 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:39:30,596 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:30,597 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,597 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,597 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:30,601 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:30,603 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:30,604 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,604 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:30,605 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,605 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:30,619 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:39:30,621 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:30,621 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,622 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,622 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:30,627 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:30,629 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:30,629 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,630 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:30,630 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,631 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:30,869 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:39:30,871 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:30,871 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,872 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,872 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:30,876 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:30,878 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:30,879 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:30,879 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:30,879 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:30,879 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:31,138 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:31,140 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:31,140 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:31,140 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:31,141 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:31,146 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:31,147 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:31,148 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:31,148 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:31,148 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:31,149 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:31,157 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:39:31,159 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:31,159 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:31,159 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:31,160 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:31,164 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:31,166 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:31,167 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:31,167 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:31,168 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:31,168 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:31,788 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:39:31,791 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:31,792 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:31,792 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:31,793 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:31,801 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:31,804 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:31,810 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:31,810 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:31,811 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:31,817 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:32,068 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:39:32,070 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:32,071 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,071 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,071 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:32,076 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:32,078 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:32,078 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,078 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:32,079 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,079 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:32,087 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:39:32,091 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:39:32,093 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:39:32,097 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:39:32,099 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:39:32,101 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:32,102 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:32,103 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,103 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,104 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:32,108 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:32,110 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:32,111 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,111 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:32,111 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,112 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:32,113 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:39:32,114 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:39:32,118 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:32,122 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:39:32,127 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:39:32,127 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:39:32,131 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:39:32,132 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:39:32,143 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:39:32,145 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:39:32,151 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:39:32,151 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:39:32,156 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:32,157 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:39:32,160 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:39:32,160 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:39:32,162 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:39:32,163 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:39:32,172 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:39:32,174 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:39:32,177 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:32,178 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:39:32,180 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:39:32,181 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:39:32,183 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:39:32,184 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:39:32,192 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:39:32,194 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:39:32,200 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:32,201 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,201 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,201 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:32,209 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:32,211 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:39:32,212 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,212 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:39:32,213 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,213 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:39:32,468 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:39:32,709 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:39:32,714 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:39:32,718 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:39:32,720 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:39:32,723 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:32,724 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:39:32,727 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:39:32,729 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:39:32,731 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:39:32,734 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:39:32,734 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:39:32,736 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:39:32,736 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:39:32,737 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:39:32.736668')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:39:32.736668')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:39:32,740 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:39:32,743 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:39:32,743 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:39:32,745 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:39:32,745 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 89513
2025-07-27 12:39:32,747 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:39:32,749 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:39:32,752 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:39:32,754 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:39:32,754 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:39:32,756 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:39:32,760 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:39:32,760 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:32,761 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:39:32,761 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:39:32,770 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:39:32.769987
2025-07-27 12:39:32,770 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:39:32,771 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:39:32,771 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:39:32,773 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140072687036272'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140072686139760'>
2025-07-27 12:39:32,774 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:39:32,777 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140072790476016'>)
2025-07-27 12:39:32,779 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:39:32,779 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:39:32,780 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:39:32,781 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:39:32,781 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:39:32,783 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140072777646384'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140072775463984'>
2025-07-27 12:39:32,784 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:39:32,784 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140072790476016'>)
2025-07-27 12:39:32,785 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:39:32,785 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:39:32,789 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:39:32,790 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:39:32,791 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:39:32,813 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:39:52,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:52,667 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:39:52.819898+09:00 (in 0.152195 seconds)
2025-07-27 12:39:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:39:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:40:52.819898+09:00 (in 59.999114 seconds)
2025-07-27 12:39:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:40:52 KST)" (scheduled at 2025-07-27 21:39:52.819898+09:00)
2025-07-27 12:39:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:39:52.821379
2025-07-27 12:39:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:39:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:39:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:39:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:39:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:39:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:39:52,823 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:39:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:39:52,825 - main - DEBUG - 종목 005930 현재가: 159221
2025-07-27 12:39:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:39:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 159221, 목표가: 75000.0
2025-07-27 12:39:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 159221원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:39:52,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 159221원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:39:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:39:53,069 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89619000>
2025-07-27 12:39:53,069 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:39:53,307 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea89619c30>
2025-07-27 12:39:53,308 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:39:53,308 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:39:53,309 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:39:53,309 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:39:53,309 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:39:53,878 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:39:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:39:53,879 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:39:53,879 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:39:53,879 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:39:53,879 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:39:53,880 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:39:53,881 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:39:53,881 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:39:53,881 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:39:53,882 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 159221, 목표가: 76000.0
2025-07-27 12:39:53,883 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 159221원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:39:53,883 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:39:53,884 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 159221원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:39:53,885 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:39:53,885 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:39:53,885 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:39:53,886 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:39:53,886 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:39:53,887 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:39:53,887 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:39:53,887 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:39:53,888 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:39:53,889 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:39:53,889 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:39:53,890 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:39:53,890 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:39:53,890 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:40:52 KST)" executed successfully
2025-07-27 12:40:52,677 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:40:52,678 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:40:52.819898+09:00 (in 0.141774 seconds)
2025-07-27 12:40:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:40:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:41:52.819898+09:00 (in 59.998905 seconds)
2025-07-27 12:40:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:41:52 KST)" (scheduled at 2025-07-27 21:40:52.819898+09:00)
2025-07-27 12:40:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:40:52.821720
2025-07-27 12:40:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:40:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:40:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:40:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:40:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:40:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:40:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:40:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:40:52,825 - main - DEBUG - 종목 005930 현재가: 150800
2025-07-27 12:40:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:40:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 150800, 목표가: 75000.0
2025-07-27 12:40:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 150800원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:40:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:40:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 150800원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:40:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:40:53,068 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829e140>
2025-07-27 12:40:53,068 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:40:53,308 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829c370>
2025-07-27 12:40:53,309 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:40:53,309 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:40:53,310 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:40:53,310 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:40:53,310 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:40:53,888 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:40:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:40:53,889 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:40:53,889 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:40:53,889 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:40:53,889 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:40:53,890 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:40:53,891 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:40:53,891 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:40:53,891 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:40:53,891 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 150800, 목표가: 76000.0
2025-07-27 12:40:53,893 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 150800원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:40:53,893 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:40:53,894 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 150800원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:40:53,895 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:40:53,895 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:40:53,895 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:40:53,896 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:40:53,896 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:40:53,896 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:40:53,897 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:40:53,897 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:40:53,897 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:40:53,898 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:40:53,899 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:40:53,900 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:40:53,900 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:40:53,900 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:41:52 KST)" executed successfully
2025-07-27 12:41:52,669 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:41:52,670 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:41:52.819898+09:00 (in 0.149502 seconds)
2025-07-27 12:41:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:41:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:42:52.819898+09:00 (in 59.998913 seconds)
2025-07-27 12:41:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:42:52 KST)" (scheduled at 2025-07-27 21:41:52.819898+09:00)
2025-07-27 12:41:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:41:52.821684
2025-07-27 12:41:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:41:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:41:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:41:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:41:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:41:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:41:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:41:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:41:52,827 - main - DEBUG - 종목 005930 현재가: 66949
2025-07-27 12:41:52,827 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:41:52,827 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:41:52,828 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:41:52,828 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:41:52,829 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:41:52,829 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:42:52 KST)" executed successfully
2025-07-27 12:42:38,540 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:42:38,551 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:42:38,556 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:42:38,557 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:42:38,558 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:42:38,558 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:42:38,876 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:38,881 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:42:38,883 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:38,886 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:42:38,888 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:38,892 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:42:38,894 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:38,897 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:42:38,897 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:42:38,899 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:42:38,910 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:38,914 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:42:38,914 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:42:38,915 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:42:38,915 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:42:38,915 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:38,915 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:38,915 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:38,916 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:43:38.558595+09:00 (in 59.642080 seconds)
2025-07-27 12:42:38,916 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:38,917 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:42:38,917 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:42:38,917 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:42:38,917 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:42:38,949 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:42:38,951 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:38,951 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:38,951 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:38,952 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:38,958 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:38,960 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:38,961 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:38,961 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:38,961 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:38,962 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:38,963 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:42:38,964 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:42:38,965 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:42:39,212 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:39,216 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:39,224 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:39,226 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:39,230 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:39,230 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,231 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,231 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:39,235 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:39,237 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:39,238 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,238 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:39,238 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,239 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:39,243 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:39,245 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:39,245 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,245 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,246 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:39,250 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:39,251 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:39,252 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,252 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:39,252 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,253 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:39,483 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:39,484 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:42:39,485 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:39,486 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,486 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,486 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:39,491 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:39,493 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:39,493 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,493 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:39,494 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,494 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:39,726 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:39,726 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:39,729 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:39,731 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:39,735 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:39,736 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:39,738 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:42:39,741 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:39,744 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:39,745 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:42:39,748 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:42:39,750 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:39,752 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:39,752 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,753 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,753 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:39,757 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:39,759 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:39,759 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:39,760 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:39,760 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:39,761 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:40,003 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:40,004 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:42:40,005 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:42:40,007 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:40,009 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:40,010 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,010 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,010 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:40,014 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:40,016 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:40,017 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,017 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:40,017 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,018 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:40,022 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:40,025 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:40,026 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,026 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,027 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:40,033 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:40,037 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:40,038 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,038 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:40,038 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,039 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:40,293 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:40,294 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:40,297 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:40,300 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:40,305 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:40,306 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:42:40,314 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:42:40,316 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:42:40,320 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:40,320 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,321 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,321 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:40,326 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:40,328 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:40,328 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,329 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:40,329 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,330 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:40,608 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:40,609 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:42:40,610 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:42:40,612 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:42:40,614 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:40,614 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,615 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,615 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:40,620 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:40,622 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:40,623 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,623 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:40,623 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,624 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:40,862 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:40,863 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:40,866 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:40,868 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:40,872 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:40,876 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:42:40,882 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:42:40,884 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:40,886 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:40,887 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,887 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,888 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:40,893 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:40,895 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:40,895 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:40,895 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:40,896 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:40,896 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:41,131 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:41,132 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:41,135 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:41,137 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:41,140 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:41,142 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:41,143 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:41,143 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:41,143 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:41,149 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:41,150 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:41,151 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:41,151 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:41,152 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:41,152 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:41,391 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:41,392 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:42:41,393 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:42:41,395 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:42:41,397 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:41,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:41,398 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:41,398 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:41,402 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:41,403 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:41,404 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:41,404 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:41,404 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:41,405 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:41,888 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:41,890 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:41,893 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:41,895 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:41,899 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:41,900 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:42:41,909 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:42:41,911 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:41,913 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:41,914 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:41,914 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:41,915 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:41,923 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:41,926 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:41,926 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:41,927 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:41,927 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:41,928 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:42,181 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:42,182 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:42,185 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:42,187 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:42,191 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:42,194 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:42:42,198 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:42:42,200 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:42,203 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:42,203 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:42,204 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:42,204 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:42,210 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:42,212 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:42,213 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:42,213 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:42,213 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:42,214 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:42,452 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:42,454 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:42,457 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:42,461 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:42,464 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:42,465 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:42,466 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:42,466 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:42,466 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:42,471 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:42,473 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:42,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:42,474 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:42,474 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:42,475 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:42,712 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:42,713 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:42:42,714 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:42:42,716 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:42:42,717 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:42,717 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:42,718 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:42,718 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:42,721 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:42,722 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:42,723 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:42,723 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:42,724 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:42,724 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:43,215 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:43,216 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:43,218 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:43,221 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:43,224 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:43,226 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:43,228 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:43,228 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,228 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,229 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:43,233 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,234 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:43,235 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,235 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:43,236 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,236 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:43,241 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:42:43,243 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:43,243 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,243 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,244 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:43,248 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,250 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:43,251 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,251 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:43,251 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,252 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:43,256 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:42:43,258 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:43,258 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,258 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,259 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:43,262 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,266 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:42:43,268 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,269 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:43,270 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,270 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:43,270 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,271 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:43,273 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:42:43,277 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:42:43,277 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:42:43,280 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:42:43,281 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:42:43,282 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:42:43,284 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:43,284 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,284 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,284 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:43,288 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,290 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:43,290 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,290 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:43,291 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,291 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:43,294 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:42:43,297 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:42:43,297 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:42:43,299 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:42:43,300 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:42:43,301 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:42:43,303 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:43,303 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,304 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,304 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:43,308 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,309 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:43,310 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,310 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:43,311 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,311 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:43,314 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:42:43,317 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:42:43,319 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:43,319 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,319 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,320 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:43,326 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:43,329 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:43,329 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:43,329 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:43,330 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:43,330 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:44,180 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:44,181 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:44,181 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:44,181 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:44,186 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:44,187 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:44,188 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:44,188 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:44,188 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:44,188 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:44,192 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:42:44,195 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:42:44,198 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:42:44,200 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:42:44,201 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:44,201 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:44,202 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:44,202 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:44,206 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:44,208 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:44,208 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:44,208 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:44,209 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:44,209 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:44,435 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:42:44,437 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:42:44,439 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:42:44,441 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:44,443 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:44,443 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:44,444 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:44,444 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:44,454 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:44,456 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:44,457 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:44,457 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:44,458 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:44,458 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:45,319 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:45,320 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:45,320 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:45,320 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:45,327 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:45,329 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:45,330 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:45,330 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:45,330 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:45,330 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:46,149 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:46,150 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:46,150 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:46,150 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:46,155 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:46,156 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:46,157 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:46,157 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:46,157 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:46,158 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:47,106 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:47,107 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,107 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,107 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:47,114 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:47,116 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:47,116 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,116 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:47,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,117 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:47,923 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:47,923 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,923 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,924 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:47,928 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:47,930 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:47,931 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,931 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:47,931 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,931 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:47,941 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:42:47,942 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:42:47,944 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:42:47,944 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 157456
2025-07-27 12:42:47,948 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:42:47,949 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:42:47,952 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:42:47,955 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:42:47,955 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:42:47,956 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:47,958 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:47,958 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,958 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,958 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:47,963 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:47,964 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:47,965 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,965 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:47,966 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,966 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:47,979 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:42:47,981 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:47,982 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,982 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,982 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:47,985 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:47,987 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:47,987 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,987 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:47,988 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,988 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:47,993 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:42:47,995 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:47,995 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:47,996 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:47,996 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:47,999 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,001 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,001 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,002 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,002 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,002 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,013 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:42:48,014 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,015 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,015 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,015 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,019 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,020 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,021 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,021 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,021 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,021 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,030 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:42:48,031 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,032 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,032 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,032 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,035 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,037 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,038 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,038 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,038 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,039 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,049 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:42:48,050 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,051 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,051 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,051 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,055 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,056 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,057 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,057 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,057 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,058 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,066 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:42:48,068 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,068 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,068 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,069 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,072 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,074 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,074 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,074 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,075 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,075 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,079 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:42:48,080 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,080 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,080 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,081 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,084 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,085 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,086 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,086 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,086 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,086 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,093 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:42:48,094 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,095 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,095 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,095 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,099 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,100 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,101 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,101 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,101 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,102 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,108 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:42:48,110 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,110 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,110 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,110 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,114 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,116 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,116 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,116 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,117 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,381 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:42:48,383 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,384 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,384 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,384 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,389 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,391 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,392 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,392 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,392 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,393 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:48,628 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:42:48,630 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:48,630 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,630 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,631 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:48,634 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:48,635 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:48,635 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:48,635 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:48,636 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:48,636 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:49,102 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:42:49,104 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:49,105 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,105 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,105 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:49,110 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:49,111 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:49,112 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,112 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:49,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,112 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:49,119 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:42:49,121 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:49,121 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,122 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,122 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:49,126 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:49,127 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:49,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,128 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:49,128 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,129 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:49,575 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:42:49,576 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:49,577 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,577 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,577 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:49,581 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:49,582 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:49,583 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,583 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:49,583 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,584 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:49,823 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:42:49,825 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:49,825 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,825 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,825 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:49,830 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:49,831 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:49,832 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,832 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:49,833 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,833 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:49,837 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:49,844 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:49,845 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,845 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,846 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:49,850 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:49,853 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:49,853 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:49,854 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:49,853 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:49,859 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:50,108 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:42:50,110 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:50,110 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,111 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,111 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:50,114 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:50,116 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:50,116 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,116 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:50,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,117 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:50,126 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:42:50,128 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:50,128 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,128 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,128 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:50,132 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:50,134 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:50,134 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,134 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:50,135 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,135 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:50,371 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:42:50,373 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:50,373 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,374 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,374 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:50,377 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:50,379 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:50,379 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,379 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:50,380 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,380 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:50,616 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:50,617 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:50,618 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,618 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,618 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:50,622 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:50,624 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:50,624 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,624 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:50,625 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,625 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:50,631 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:42:50,633 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:50,633 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,634 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,634 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:50,638 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:50,639 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:50,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:50,639 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:50,640 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:50,640 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:51,100 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:42:51,102 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:51,103 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,103 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,103 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:51,108 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:51,110 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:51,111 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,111 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:51,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,112 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:51,345 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:42:51,346 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:51,346 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,347 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,347 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:51,351 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:51,352 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:51,352 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,352 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:51,353 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,353 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:51,360 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:42:51,364 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:42:51,365 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:42:51,369 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:42:51,371 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:42:51,372 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:51,374 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:51,374 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,375 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,375 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:51,379 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:51,380 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:51,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,381 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:51,381 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,382 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:51,383 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:42:51,383 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:42:51,387 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:51,391 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:42:51,395 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:42:51,396 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:42:51,400 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:42:51,400 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:42:51,409 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:42:51,412 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:42:51,419 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:42:51,419 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:42:51,422 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:51,423 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:42:51,426 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:42:51,426 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:42:51,428 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:42:51,428 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:42:51,435 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:42:51,436 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:42:51,440 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:51,440 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:42:51,442 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:42:51,443 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:42:51,445 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:42:51,445 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:42:51,462 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:42:51,464 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:42:51,470 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:51,471 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,471 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,471 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:51,476 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:51,478 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:42:51,478 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:51,478 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:42:51,479 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:51,479 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:42:51,726 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:42:51,975 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:42:51,978 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:42:51,980 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:42:51,981 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:42:51,985 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:51,985 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:42:51,987 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:42:51,989 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:42:51,991 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:42:51,993 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:42:51,993 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:42:51,995 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:42:51,995 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:42:51,996 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:42:51.995500')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:42:51.995500')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:42:51,998 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:42:52,002 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:42:52,002 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:42:52,004 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:42:52,004 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 156202
2025-07-27 12:42:52,005 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:42:52,007 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:42:52,011 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:42:52,012 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:42:52,013 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:42:52,015 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:42:52,017 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:42:52,017 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:52,017 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:42:52,018 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:42:52,024 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:42:52.024561
2025-07-27 12:42:52,025 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:42:52,025 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:42:52,025 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:42:52,026 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139754095669120'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139753987797344'>
2025-07-27 12:42:52,026 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:42:52,031 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139754078528768'>)
2025-07-27 12:42:52,033 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:42:52,033 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:42:52,033 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:42:52,034 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:42:52,035 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:42:52,037 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139754081141424'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139754080560336'>
2025-07-27 12:42:52,038 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:42:52,039 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139754078528768'>)
2025-07-27 12:42:52,039 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:42:52,040 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:42:52,045 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:42:52,046 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:42:52,049 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:42:52,065 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:42:52,667 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:52,667 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:42:52.819898+09:00 (in 0.152389 seconds)
2025-07-27 12:42:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:42:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:43:52.819898+09:00 (in 59.999032 seconds)
2025-07-27 12:42:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:43:52 KST)" (scheduled at 2025-07-27 21:42:52.819898+09:00)
2025-07-27 12:42:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:42:52.821527
2025-07-27 12:42:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:42:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:42:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:42:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:42:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:42:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:42:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:42:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:42:52,825 - main - DEBUG - 종목 005930 현재가: 77437
2025-07-27 12:42:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:42:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 77437, 목표가: 75000.0
2025-07-27 12:42:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 77437원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 12:42:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 77437원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:42:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:42:53,074 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88467fd0>
2025-07-27 12:42:53,074 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:42:53,313 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea88467e80>
2025-07-27 12:42:53,314 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:42:53,314 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:42:53,315 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:42:53,315 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:42:53,316 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:42:53,883 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:42:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:42:53,884 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:42:53,884 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:42:53,884 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:42:53,884 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:42:53,885 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:42:53,886 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:42:53,886 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:42:53,886 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:42:53,886 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 77437, 목표가: 76000.0
2025-07-27 12:42:53,888 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 77437원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 12:42:53,888 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:42:53,889 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 77437원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:42:53,890 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:42:53,890 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:42:53,890 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:42:53,891 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:42:53,891 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:42:53,892 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:42:53,892 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:42:53,892 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:42:53,893 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:42:53,894 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:42:53,895 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:42:53,896 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:42:53,897 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:42:53,897 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:43:52 KST)" executed successfully
2025-07-27 12:43:40,314 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:43:40,318 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:43:40,321 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:43:40,322 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:43:40,323 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:43:40,323 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:43:40,641 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:40,645 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:43:40,648 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:40,653 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:43:40,656 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:40,659 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:43:40,662 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:40,665 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:43:40,665 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:43:40,668 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:43:40,679 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:40,683 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:43:40,684 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:43:40,684 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:43:40,685 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:43:40,685 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:40,685 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:40,685 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:40,686 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:44:40.323534+09:00 (in 59.637169 seconds)
2025-07-27 12:43:40,686 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:40,687 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:43:40,687 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:43:40,687 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:43:40,687 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:43:40,713 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:43:40,715 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:40,715 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:40,716 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:40,716 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:40,720 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:40,722 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:40,723 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:40,723 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:40,723 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:40,724 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:40,725 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:43:40,727 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:43:40,727 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:43:40,991 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:40,995 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:41,000 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:41,002 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:41,005 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:41,006 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,006 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,006 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:41,010 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:41,012 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:41,012 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,012 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:41,013 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,013 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:41,016 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:41,018 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:41,018 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,019 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,019 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:41,023 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:41,024 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:41,025 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,025 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:41,025 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,026 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:41,254 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:41,256 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:43:41,257 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:41,257 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,258 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,258 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:41,261 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:41,263 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:41,264 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,264 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:41,264 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,265 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:41,487 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:41,487 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:41,490 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:41,492 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:41,495 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:41,496 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:41,498 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:43:41,499 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:41,503 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:41,503 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:43:41,507 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:43:41,509 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:41,511 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:41,511 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,511 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,512 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:41,516 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:41,518 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:41,518 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,518 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:41,519 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,519 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:41,761 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:41,762 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:43:41,763 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:43:41,764 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:41,766 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:41,767 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,767 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,767 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:41,773 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:41,777 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:41,777 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,777 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:41,778 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,778 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:41,782 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:41,784 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:41,784 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,784 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,785 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:41,788 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:41,789 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:41,790 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:41,790 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:41,791 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:41,791 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:42,034 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:42,035 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:42,038 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:42,040 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:42,044 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:42,045 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:43:42,048 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:43:42,051 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:43:42,053 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:42,054 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,054 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,055 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:42,060 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:42,063 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:42,063 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,063 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:42,064 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,064 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:42,301 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:42,302 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:43:42,304 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:43:42,306 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:43:42,308 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:42,309 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,309 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,310 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:42,316 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:42,318 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:42,319 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,319 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:42,319 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,320 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:42,560 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:42,561 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:42,565 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:42,567 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:42,573 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:42,583 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:43:42,591 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:43:42,593 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:42,596 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:42,597 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,597 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,597 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:42,603 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:42,605 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:42,606 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,606 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:42,607 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,608 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:42,905 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:42,906 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:42,908 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:42,911 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:42,914 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:42,916 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:42,917 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,917 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,917 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:42,922 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:42,925 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:42,926 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:42,926 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:42,926 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:42,927 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:43,171 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:43,172 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:43:43,174 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:43:43,175 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:43:43,177 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:43,178 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:43,178 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:43,178 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:43,183 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:43,186 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:43,187 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:43,187 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:43,187 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:43,188 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:43,601 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:43,602 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:43,605 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:43,607 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:43,611 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:43,612 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:43:43,615 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:43:43,617 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:43,619 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:43,619 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:43,620 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:43,620 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:43,625 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:43,626 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:43,627 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:43,627 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:43,627 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:43,628 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:43,875 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:43,876 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:43,880 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:43,885 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:43,892 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:43,894 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:43:43,898 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:43:43,900 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:43,903 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:43,903 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:43,904 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:43,904 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:43,908 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:43,910 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:43,911 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:43,911 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:43,911 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:43,912 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:44,181 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:44,182 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:44,184 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:44,187 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:44,191 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:44,193 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:44,194 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:44,194 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:44,195 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:44,199 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:44,201 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:44,202 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:44,203 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:44,203 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:44,204 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:44,434 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:44,437 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:43:44,438 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:43:44,440 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:43:44,442 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:44,442 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:44,443 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:44,443 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:44,450 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:44,453 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:44,454 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:44,454 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:44,455 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:44,456 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:44,988 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:44,989 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:44,992 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:44,994 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:44,998 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:45,002 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:45,004 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:45,005 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,005 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,006 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:45,010 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,012 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:45,013 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,013 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:45,014 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,014 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:45,021 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:43:45,024 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:45,024 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,024 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,025 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:45,030 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,032 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:45,033 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,033 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:45,034 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,034 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:45,040 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:43:45,042 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:45,043 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,043 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,043 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:45,050 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,054 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:43:45,058 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,060 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:45,061 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,061 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:45,061 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,062 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:45,066 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:43:45,072 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:43:45,072 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:43:45,076 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:43:45,078 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:43:45,081 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:43:45,083 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:45,083 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,084 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,084 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:45,089 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,091 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:45,092 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,092 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:45,092 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,093 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:45,097 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:43:45,101 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:43:45,101 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:43:45,103 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:43:45,104 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:43:45,105 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:43:45,107 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:45,107 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,107 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,108 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:45,112 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,115 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:45,116 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,116 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:45,117 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,117 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:45,121 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:43:45,125 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:43:45,126 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:45,127 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,127 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,127 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:45,132 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:45,134 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:45,135 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:45,135 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:45,135 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:45,136 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:46,156 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:46,157 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:46,157 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:46,157 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:46,163 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:46,164 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:46,165 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:46,165 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:46,166 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:46,166 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:46,171 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:43:46,175 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:43:46,178 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:43:46,179 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:43:46,181 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:46,182 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:46,182 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:46,182 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:46,188 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:46,190 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:46,191 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:46,191 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:46,192 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:46,192 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:46,422 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:43:46,423 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:43:46,424 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:43:46,426 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:46,428 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:46,428 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:46,428 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:46,429 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:46,434 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:46,436 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:46,437 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:46,437 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:46,438 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:46,438 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:47,219 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:47,220 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:47,220 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:47,221 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:47,225 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:47,227 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:47,228 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:47,228 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:47,228 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:47,228 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:48,037 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:48,038 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:48,038 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:48,039 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:48,046 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:48,049 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:48,051 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:48,051 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:48,051 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:48,052 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:49,161 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:49,162 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:49,162 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:49,163 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:49,168 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:49,171 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:49,171 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:49,171 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:49,172 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:49,172 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,196 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,196 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,197 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,197 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,201 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,202 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,203 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,203 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,204 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,204 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,212 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:43:50,213 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:43:50,215 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:43:50,215 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 143486
2025-07-27 12:43:50,218 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:43:50,219 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:43:50,223 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:43:50,225 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:43:50,225 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:43:50,226 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:50,228 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,228 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,228 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,228 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,232 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,233 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,234 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,234 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,234 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,235 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,246 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:43:50,247 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,248 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,248 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,248 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,252 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,254 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,254 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,254 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,255 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,255 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,261 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:43:50,263 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,263 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,263 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,263 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,267 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,269 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,269 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,269 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,270 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,270 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,281 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:43:50,283 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,283 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,283 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,284 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,287 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,289 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,289 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,289 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,290 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,290 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,299 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:43:50,301 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,301 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,302 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,302 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,306 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,308 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,309 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,309 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,310 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,310 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,320 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:43:50,321 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,322 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,322 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,322 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,327 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,329 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,329 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,329 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,330 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,330 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,341 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:43:50,343 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,343 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,343 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,343 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,347 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,349 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,350 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,350 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,350 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,351 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,356 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:43:50,358 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,359 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,359 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,359 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,363 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,364 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,364 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,365 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,365 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,365 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,372 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:43:50,374 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,374 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,375 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,375 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,378 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,380 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,380 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,380 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,380 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,381 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,387 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:43:50,389 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,389 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,389 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,390 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,396 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,398 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,398 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,398 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,399 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,399 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,645 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:43:50,649 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,649 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,650 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,650 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,656 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,658 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,659 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,660 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,660 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,661 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:50,944 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:43:50,947 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:50,947 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,947 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,948 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:50,952 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:50,954 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:50,954 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:50,955 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:50,955 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:50,955 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:51,427 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:43:51,430 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:51,430 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:51,431 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:51,431 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:51,436 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:51,437 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:51,438 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:51,438 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:51,438 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:51,438 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:51,445 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:43:51,446 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:51,447 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:51,447 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:51,447 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:51,452 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:51,454 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:51,455 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:51,455 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:51,456 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:51,456 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:51,924 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:43:51,926 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:51,927 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:51,927 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:51,927 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:51,932 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:51,934 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:51,934 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:51,935 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:51,935 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:51,936 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,175 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:43:52,177 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,177 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,177 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,178 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:52,181 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,182 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:52,183 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,183 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:52,183 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,184 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,187 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:52,188 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,188 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,188 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,189 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:52,193 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,195 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:52,195 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,195 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:52,196 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,196 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,442 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:43:52,444 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,445 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,445 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,445 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:52,451 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,453 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:52,454 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,454 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:52,455 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,456 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,470 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:43:52,472 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,472 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,472 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,473 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:52,477 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,479 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:52,480 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,480 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:52,480 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,481 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,670 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,670 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:43:52.819898+09:00 (in 0.149166 seconds)
2025-07-27 12:43:52,717 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:43:52,719 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,719 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,719 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,719 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:52,723 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,724 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:52,725 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,725 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:52,726 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,726 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:44:52.819898+09:00 (in 59.999006 seconds)
2025-07-27 12:43:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:44:52 KST)" (scheduled at 2025-07-27 21:43:52.819898+09:00)
2025-07-27 12:43:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:43:52.821586
2025-07-27 12:43:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:43:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:43:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:43:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:43:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:43:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:43:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:43:52,826 - main - DEBUG - 종목 005930 현재가: 110327
2025-07-27 12:43:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:43:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 110327, 목표가: 75000.0
2025-07-27 12:43:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 110327원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:43:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 110327원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:43:52,830 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:43:52,974 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:52,976 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,977 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,977 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,977 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:52,982 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:52,984 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:52,984 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,984 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:52,985 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,985 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:52,994 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:43:52,995 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:52,996 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:52,996 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:52,997 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:53,001 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:53,003 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:53,003 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,003 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:53,003 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,004 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:53,105 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829f070>
2025-07-27 12:43:53,106 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:43:53,348 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829d270>
2025-07-27 12:43:53,349 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:43:53,350 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:43:53,350 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:43:53,351 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:43:53,351 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:43:53,476 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:43:53,478 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:53,478 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,479 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,479 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:53,484 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:53,486 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:53,487 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,487 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:53,488 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,488 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:53,718 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:43:53,719 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:53,720 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,720 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,720 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:53,724 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:53,725 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:53,726 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,726 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:53,726 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,727 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:53,733 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:43:53,737 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:43:53,738 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:43:53,742 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:43:53,743 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:43:53,745 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:53,746 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:53,746 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,747 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,747 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:53,751 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:53,753 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:53,754 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,754 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:53,754 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,754 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:53,756 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:43:53,756 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:43:53,760 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:53,763 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:43:53,768 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:43:53,768 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:43:53,774 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:43:53,774 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:43:53,783 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:43:53,785 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:43:53,790 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:43:53,791 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:43:53,794 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:53,796 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:43:53,798 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:43:53,799 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:43:53,802 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:43:53,803 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:43:53,817 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:43:53,820 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:43:53,824 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:53,825 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:43:53,827 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:43:53,827 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:43:53,828 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:43:53,829 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:43:53,835 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:43:53,837 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:43:53,842 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:53,843 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,843 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,843 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:53,848 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:53,849 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:43:53,850 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:53,850 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:43:53,850 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:53,851 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:43:53,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:43:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:43:53,956 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:43:53,956 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:43:53,957 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:43:53,957 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:43:53,957 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:43:53,959 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:43:53,959 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:43:53,960 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:43:53,960 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 110327, 목표가: 76000.0
2025-07-27 12:43:53,962 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 110327원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:43:53,962 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:43:53,962 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 110327원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:43:53,963 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:43:53,964 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:43:53,964 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:43:53,965 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:43:53,965 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:43:53,965 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:43:53,966 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:43:53,966 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:43:53,967 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:43:53,968 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:43:53,969 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:43:53,969 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:43:53,969 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:43:53,969 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:44:52 KST)" executed successfully
2025-07-27 12:43:54,089 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:43:54,316 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:43:54,320 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:43:54,322 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:43:54,324 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:43:54,327 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:43:54,328 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:43:54,330 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:43:54,332 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:43:54,333 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:43:54,336 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:43:54,336 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:43:54,337 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:43:54,338 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:43:54,339 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:43:54.338257')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:43:54.338257')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:43:54,341 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:43:54,344 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:43:54,344 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:43:54,346 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:43:54,346 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 166042
2025-07-27 12:43:54,348 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:43:54,350 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:43:54,352 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:43:54,354 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:43:54,355 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:43:54,356 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:43:54,358 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:43:54,358 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:43:54,359 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:43:54,359 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:43:54,365 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:43:54.365959
2025-07-27 12:43:54,366 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:43:54,366 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:43:54,366 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:43:54,368 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140024744893776'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140024739753712'>
2025-07-27 12:43:54,368 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:43:54,373 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140024749880512'>)
2025-07-27 12:43:54,375 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:43:54,375 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:43:54,376 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:43:54,377 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:43:54,377 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:43:54,379 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140024744348592'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140024745644032'>
2025-07-27 12:43:54,379 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:43:54,380 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140024749880512'>)
2025-07-27 12:43:54,381 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:43:54,381 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:43:54,385 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:43:54,385 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:43:54,390 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:43:54,409 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:44:52,673 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:52,673 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:44:52.819898+09:00 (in 0.146500 seconds)
2025-07-27 12:44:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:45:52.819898+09:00 (in 59.998993 seconds)
2025-07-27 12:44:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:45:52 KST)" (scheduled at 2025-07-27 21:44:52.819898+09:00)
2025-07-27 12:44:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:44:52.821606
2025-07-27 12:44:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:44:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:44:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:44:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:44:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:44:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:44:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:44:52,825 - main - DEBUG - 종목 005930 현재가: 177960
2025-07-27 12:44:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:44:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 177960, 목표가: 75000.0
2025-07-27 12:44:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 177960원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:44:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 177960원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:44:52,828 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:44:53,075 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829e530>
2025-07-27 12:44:53,075 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:44:53,317 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829c940>
2025-07-27 12:44:53,318 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:44:53,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:44:53,319 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:44:53,319 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:44:53,320 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:44:53,904 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:44:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:44:53,904 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:44:53,905 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:44:53,905 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:44:53,905 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:44:53,906 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:44:53,907 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:44:53,907 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:44:53,908 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:44:53,908 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 177960, 목표가: 76000.0
2025-07-27 12:44:53,909 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 177960원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:44:53,910 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:53,910 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 177960원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:44:53,911 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:44:53,911 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:44:53,912 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:44:53,912 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:44:53,912 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:44:53,913 - httpcore.http11 - DEBUG - receive_response_headers.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:44:53,913 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:44:53,913 - httpcore.http11 - DEBUG - response_closed.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:44:53,914 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request
    return await self._connection.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 135, in handle_async_request
    await self._response_closed()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 250, in _response_closed
    await self.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:44:53,915 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:44:53,915 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:44:53,916 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:44:53,916 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:44:53,916 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:45:52 KST)" executed successfully
2025-07-27 12:44:57,221 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:44:57,226 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:44:57,229 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:44:57,230 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:44:57,230 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:44:57,230 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:44:57,489 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,495 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:44:57,499 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,503 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:44:57,505 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,508 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:44:57,511 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,513 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:44:57,514 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:44:57,515 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:44:57,525 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,529 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:44:57,529 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:44:57,530 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:44:57,530 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:44:57,530 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:57,530 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,530 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:57,531 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:45:57.230906+09:00 (in 59.699642 seconds)
2025-07-27 12:44:57,531 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:57,532 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:44:57,532 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:44:57,532 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:44:57,532 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:44:57,559 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:44:57,560 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:57,560 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,561 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:57,561 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:57,565 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,566 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:57,566 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,567 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:57,567 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:57,567 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:57,569 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:44:57,570 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:44:57,570 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:44:57,823 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:57,826 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:44:57,831 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:44:57,834 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:57,838 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:57,838 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,839 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:57,839 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:57,843 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,845 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:57,845 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,846 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:57,846 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:57,846 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:57,849 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:44:57,850 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:57,851 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,851 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:57,851 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:57,855 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:57,856 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:57,857 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:57,857 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:57,857 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:57,858 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:58,081 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,083 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:44:58,084 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:58,084 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,084 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,085 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:58,088 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:58,089 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:58,089 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,089 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:58,090 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,090 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:58,311 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,312 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:44:58,314 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:44:58,315 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:58,318 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,319 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:44:58,321 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:44:58,323 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:58,326 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,327 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:44:58,329 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:44:58,331 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:58,332 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:58,333 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,333 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,333 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:58,337 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:58,339 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:58,339 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,339 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:58,340 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,340 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:58,572 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,573 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:44:58,574 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:44:58,575 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:58,577 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:58,578 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,578 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,578 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:58,583 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:58,586 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:58,586 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,587 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:58,587 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,587 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:58,591 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:44:58,593 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:58,593 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,594 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,594 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:58,598 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:58,599 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:58,600 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,600 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:58,600 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,601 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:58,839 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,840 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:44:58,843 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:44:58,845 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:58,849 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:58,850 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:44:58,853 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:44:58,855 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:44:58,857 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:58,857 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,857 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,858 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:58,863 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:58,864 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:58,865 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:58,865 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:58,865 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:58,865 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:59,092 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:59,093 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:44:59,094 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:44:59,095 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:44:59,096 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:59,096 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,097 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,097 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:59,100 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:59,101 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:59,102 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,102 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:59,102 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,103 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:59,329 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:59,329 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:44:59,331 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:44:59,333 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:59,336 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:59,339 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:44:59,343 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:44:59,345 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:44:59,346 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:59,346 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,347 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,347 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:59,351 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:59,352 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:59,353 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,353 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:59,353 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,354 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:59,588 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:59,589 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:44:59,593 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:44:59,595 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:44:59,597 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:44:59,598 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:59,598 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,598 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,599 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:59,602 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:59,604 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:59,604 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,604 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:59,605 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,605 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:44:59,881 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:44:59,882 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:44:59,884 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:44:59,886 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:44:59,889 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:44:59,890 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,890 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,891 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:44:59,895 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:44:59,897 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:44:59,898 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:44:59,898 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:44:59,898 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:44:59,899 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:00,359 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:00,360 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:00,362 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:00,364 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:00,369 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:00,371 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:45:00,376 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:45:00,377 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:00,380 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:00,381 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:00,381 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:00,382 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:00,386 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:00,388 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:00,389 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:00,389 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:00,389 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:00,390 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:00,622 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:00,623 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:00,625 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:00,627 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:00,631 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:00,633 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:45:00,635 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:45:00,636 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:00,638 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:00,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:00,639 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:00,640 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:00,645 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:00,647 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:00,647 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:00,647 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:00,648 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:00,648 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:00,884 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:00,885 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:00,888 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:00,890 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:00,893 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:00,894 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:00,895 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:00,895 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:00,895 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:00,900 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:00,901 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:00,902 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:00,902 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:00,902 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:00,903 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,176 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:01,178 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:45:01,180 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:45:01,183 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:45:01,185 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,186 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,186 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,187 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,191 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,193 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,193 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,193 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,194 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,194 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,652 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:01,653 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:01,655 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:01,657 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:01,662 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:01,665 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:01,669 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,669 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,670 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,670 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,675 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,677 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,677 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,677 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,678 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,678 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,683 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:45:01,684 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,684 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,685 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,685 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,688 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,689 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,690 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,690 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,690 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,691 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,695 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:45:01,696 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,697 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,697 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,697 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,700 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,704 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:45:01,706 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,708 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,709 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,709 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,709 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,709 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,712 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:01,716 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:45:01,716 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:45:01,719 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:45:01,720 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:45:01,721 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:45:01,723 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,723 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,723 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,723 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,727 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,729 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,730 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,730 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,730 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,730 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,733 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:01,736 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:45:01,736 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:45:01,738 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:45:01,738 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:45:01,740 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:45:01,741 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,741 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,741 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,742 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,745 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,746 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,747 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,747 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,747 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,748 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:01,750 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:01,754 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:45:01,755 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:01,755 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,756 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,756 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:01,761 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:01,762 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:01,763 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:01,763 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:01,763 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:01,764 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:02,768 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:02,769 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:02,769 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:02,769 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:02,773 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:02,774 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:02,775 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:02,775 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:02,775 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:02,776 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:02,780 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:45:02,784 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:45:02,786 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:45:02,788 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:45:02,789 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:02,789 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:02,790 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:02,790 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:02,794 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:02,796 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:02,796 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:02,796 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:02,797 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:02,797 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:03,033 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:45:03,035 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:45:03,036 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:45:03,038 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:03,039 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:03,040 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:03,040 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:03,040 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:03,046 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:03,048 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:03,048 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:03,048 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:03,049 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:03,049 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:03,969 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:03,970 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:03,970 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:03,971 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:03,976 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:03,977 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:03,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:03,978 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:03,978 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:03,979 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:04,808 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:04,808 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:04,808 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:04,809 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:04,813 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:04,815 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:04,815 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:04,815 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:04,816 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:04,816 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:05,774 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:05,775 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:05,775 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:05,776 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:05,782 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:05,784 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:05,784 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:05,785 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:05,785 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:05,785 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,620 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,621 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,621 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,621 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,625 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,627 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,627 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,627 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,627 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,628 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,635 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:45:06,636 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:45:06,639 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:45:06,639 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 65252
2025-07-27 12:45:06,643 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:45:06,645 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:45:06,649 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:45:06,653 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:45:06,653 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:45:06,655 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:06,657 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,657 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,657 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,657 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,661 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,663 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,663 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,663 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,664 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,664 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,682 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:45:06,684 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,684 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,685 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,685 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,689 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,691 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,691 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,691 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,692 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,692 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,697 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:45:06,699 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,699 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,700 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,700 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,705 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,706 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,707 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,707 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,707 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,708 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,720 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:45:06,724 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,725 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,725 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,726 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,731 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,733 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,734 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,734 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,735 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,735 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,746 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:45:06,747 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,748 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,748 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,749 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,753 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,754 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,755 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,755 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,755 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,756 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,778 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:45:06,780 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,781 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,781 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,781 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,786 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,794 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,794 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,794 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,795 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,795 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,822 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:45:06,823 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,824 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,824 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,824 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,829 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,834 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,835 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,835 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,836 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,836 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,843 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:45:06,845 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,845 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,845 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,846 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,850 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,852 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,852 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,852 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,853 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,853 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,862 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:45:06,865 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,865 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,866 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,866 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,869 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,871 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,871 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,871 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,872 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,872 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:06,878 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:45:06,880 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:06,880 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,881 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,881 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:06,885 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:06,887 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:06,887 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:06,887 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:06,888 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:06,888 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:07,153 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:45:07,155 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:07,155 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,155 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,156 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:07,160 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:07,162 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:07,162 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,162 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:07,162 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,163 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:07,395 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:45:07,397 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:07,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,398 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,398 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:07,403 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:07,405 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:07,406 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,406 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:07,406 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,407 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:07,873 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:45:07,877 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:07,877 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,878 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,878 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:07,882 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:07,885 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:07,885 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,886 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:07,886 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,886 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:07,893 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:45:07,895 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:07,895 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,895 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,895 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:07,899 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:07,900 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:07,901 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:07,901 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:07,901 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:07,902 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:08,354 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:45:08,356 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:08,357 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,357 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,357 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:08,361 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:08,363 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:08,363 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,363 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:08,364 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,364 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:08,641 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:45:08,644 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:08,644 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,645 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,645 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:08,651 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:08,653 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:08,653 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,653 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:08,654 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,654 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:08,658 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:08,660 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:08,661 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,661 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,661 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:08,666 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:08,668 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:08,668 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,669 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:08,669 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,669 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:08,915 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:45:08,917 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:08,917 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,917 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,918 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:08,922 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:08,923 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:08,924 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,924 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:08,925 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,925 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:08,934 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:45:08,936 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:08,936 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,937 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,937 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:08,941 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:08,942 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:08,943 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:08,943 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:08,943 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:08,944 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:09,175 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:45:09,177 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:09,177 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,177 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,177 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:09,182 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:09,183 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:09,184 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,184 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:09,184 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,184 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:09,422 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:09,423 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:09,424 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,424 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,424 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:09,428 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:09,430 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:09,431 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,431 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:09,431 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,432 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:09,439 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:45:09,440 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:09,441 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,441 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,441 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:09,445 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:09,447 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:09,447 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,447 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:09,448 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,448 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:09,904 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:45:09,906 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:09,906 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,906 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,906 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:09,910 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:09,911 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:09,912 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:09,912 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:09,912 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:09,913 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:10,142 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:10,145 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:10,145 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,145 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,145 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:10,149 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:10,150 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:10,151 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,151 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:10,152 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,152 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:10,159 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:45:10,163 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:45:10,164 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:45:10,168 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:45:10,170 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:45:10,172 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:10,173 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:10,174 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,174 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,174 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:10,177 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:10,179 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:10,179 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,179 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:10,180 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,180 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:10,181 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:45:10,182 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:45:10,186 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:10,189 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:45:10,193 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:45:10,194 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:45:10,197 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:45:10,197 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:45:10,205 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:45:10,207 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:45:10,211 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:45:10,212 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:45:10,214 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:10,215 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:45:10,217 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:45:10,217 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:45:10,219 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:45:10,219 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:45:10,225 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:45:10,227 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:45:10,229 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:10,229 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:45:10,231 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:45:10,231 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:45:10,232 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:45:10,233 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:45:10,238 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:45:10,240 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:45:10,244 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:10,244 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,245 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,245 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:10,248 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:10,250 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:10,251 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,251 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:10,251 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,251 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:10,482 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:45:10,728 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:45:10,733 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:45:10,735 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:45:10,737 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:45:10,741 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:10,742 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:10,745 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:10,747 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:10,750 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:10,755 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:45:10,756 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:45:10,758 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:45:10,758 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:45:10,760 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:45:10.759231')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:45:10.759231')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:45:10,763 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:45:10,767 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:45:10,767 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:45:10,768 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:45:10,769 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 55792
2025-07-27 12:45:10,770 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:45:10,771 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:45:10,773 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:45:10,774 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:45:10,775 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:45:10,776 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:10,778 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:10,778 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:10,779 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:10,779 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:10,787 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:45:10.787117
2025-07-27 12:45:10,787 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:45:10,788 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:45:10,788 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:45:10,790 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140633722436576'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140633697212384'>
2025-07-27 12:45:10,791 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:45:10,795 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140633732626848'>)
2025-07-27 12:45:10,797 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:45:10,797 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:45:10,797 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:45:10,798 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:45:10,799 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:45:10,800 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140633702728512'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140633702704096'>
2025-07-27 12:45:10,800 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:45:10,801 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140633732626848'>)
2025-07-27 12:45:10,801 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:45:10,801 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:45:10,804 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:45:10,804 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:45:10,805 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:45:10,821 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:45:52,662 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:52,663 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:45:52.819898+09:00 (in 0.156079 seconds)
2025-07-27 12:45:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:46:52.819898+09:00 (in 59.998901 seconds)
2025-07-27 12:45:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:46:52 KST)" (scheduled at 2025-07-27 21:45:52.819898+09:00)
2025-07-27 12:45:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:45:52.822021
2025-07-27 12:45:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:45:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:45:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:45:52,825 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:45:52,825 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:45:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:45:52,827 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:45:52,827 - main - DEBUG - 종목 005930 현재가: 75013
2025-07-27 12:45:52,828 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:45:52,828 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 75013, 목표가: 75000.0
2025-07-27 12:45:52,830 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 75013원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 12:45:52,830 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:52,831 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 75013원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:45:52,832 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-07-27 12:45:53,075 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829c400>
2025-07-27 12:45:53,075 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7feaa1b61b40> server_hostname='api.telegram.org' timeout=5.0
2025-07-27 12:45:53,312 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7fea8829f520>
2025-07-27 12:45:53,313 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-07-27 12:45:53,314 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-07-27 12:45:53,314 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-07-27 12:45:53,314 - httpcore.http11 - DEBUG - send_request_body.complete
2025-07-27 12:45:53,315 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-07-27 12:45:53,882 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 400, b'Bad Request', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Sun, 27 Jul 2025 12:45:53 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'73'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-07-27 12:45:53,883 - httpx - INFO - HTTP Request: POST https://api.telegram.org/bot8067228135:AAFVhUKTZXosDAm4SvoKAKtuzBrm2kcPdlI/sendMessage "HTTP/1.1 400 Bad Request"
2025-07-27 12:45:53,883 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-07-27 12:45:53,884 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-07-27 12:45:53,884 - httpcore.http11 - DEBUG - response_closed.started
2025-07-27 12:45:53,884 - httpcore.http11 - DEBUG - response_closed.complete
2025-07-27 12:45:53,885 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Chat not found
Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 374, in _request_wrapper
    raise exception
telegram.error.BadRequest: Chat not found
2025-07-27 12:45:53,886 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:45:53,886 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:45:53,887 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:45:53,888 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:45:53,888 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:45:53,888 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:46:52 KST)" executed successfully
2025-07-27 12:45:54,881 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:45:54,886 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:45:54,890 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:45:54,891 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:45:54,892 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:45:54,893 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:45:55,163 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,167 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:45:55,169 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,172 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:45:55,175 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,179 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:45:55,182 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,185 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:45:55,186 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:45:55,188 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:45:55,204 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,208 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:45:55,208 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:45:55,209 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:45:55,209 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:45:55,209 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:55,210 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,210 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:55,210 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:46:54.893230+09:00 (in 59.682732 seconds)
2025-07-27 12:45:55,210 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:55,211 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:45:55,211 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:45:55,211 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:45:55,211 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:45:55,237 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:45:55,238 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:55,239 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,239 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,239 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:55,250 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,252 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:55,252 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,252 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:55,253 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,253 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:55,255 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:45:55,256 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:45:55,256 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:45:55,503 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:55,507 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:55,513 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:55,515 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:55,518 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:55,518 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,519 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,519 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:55,530 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,532 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:55,533 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,533 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:55,533 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,533 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:55,536 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:55,538 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:55,538 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,538 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,538 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:55,549 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,550 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:55,551 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,551 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:55,552 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,552 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:55,775 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:55,776 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:45:55,778 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:55,778 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,779 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,779 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:55,792 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:55,793 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:55,794 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:55,794 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:55,795 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:55,795 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:56,029 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,030 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:56,032 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:56,034 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:56,037 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,037 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:56,039 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:45:56,041 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:56,043 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,044 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:45:56,046 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:45:56,048 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:56,049 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:56,050 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,050 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,050 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:56,061 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:56,063 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:56,063 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,063 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:56,064 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,064 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:56,293 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,295 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:45:56,296 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:45:56,298 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:56,300 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:56,300 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,301 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,301 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:56,312 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:56,314 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:56,314 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,314 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:56,315 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,315 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:56,319 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:56,322 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:56,323 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,323 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,323 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:56,335 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:56,336 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:56,337 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,337 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:56,337 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,337 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:56,564 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,565 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:56,567 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:56,569 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:56,571 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,572 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:45:56,575 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:45:56,576 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:45:56,578 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:56,579 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,579 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,579 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:56,590 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:56,591 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:56,592 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,592 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:56,592 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,593 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:56,819 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:56,820 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:45:56,821 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:45:56,822 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:45:56,823 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:56,824 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,824 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,824 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:56,837 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:56,838 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:56,839 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:56,839 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:56,839 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:56,839 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:57,067 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:57,067 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:57,069 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:57,071 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:57,074 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:57,077 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:45:57,082 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:45:57,084 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:57,085 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:57,086 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:57,086 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:57,086 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:57,099 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:57,100 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:57,101 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:57,101 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:57,101 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:57,101 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:57,367 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:57,369 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:57,371 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:57,373 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:57,376 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:57,378 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:57,378 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:57,378 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:57,379 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:57,394 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:57,398 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:57,399 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:57,399 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:57,399 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:57,400 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:57,628 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:57,629 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:45:57,631 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:45:57,633 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:45:57,635 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:57,635 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:57,636 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:57,636 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:57,650 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:57,651 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:57,652 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:57,652 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:57,653 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:57,652 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,131 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:58,132 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:58,134 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:58,136 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:58,139 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:58,140 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:45:58,143 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:45:58,145 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:58,147 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:58,147 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,147 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,148 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:58,163 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:58,165 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:58,166 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,166 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:58,166 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,166 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:58,397 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:58,397 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:58,399 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:58,401 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:58,404 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:58,406 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:45:58,408 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:45:58,410 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:45:58,412 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:58,412 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,413 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,413 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:58,425 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:58,427 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:58,427 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,427 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:58,428 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,428 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:58,682 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:58,683 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:58,686 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:58,689 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:58,692 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:58,693 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:58,694 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,694 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,694 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:58,707 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:58,709 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:58,709 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,709 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:58,710 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,710 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:58,947 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:58,949 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:45:58,950 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:45:58,951 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:45:58,953 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:58,953 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,953 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,953 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:58,965 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:58,966 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:58,967 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:58,967 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:58,967 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:58,968 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:59,426 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:59,426 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:45:59,429 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:45:59,431 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:45:59,434 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:45:59,437 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:45:59,439 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:59,439 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,439 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,440 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:59,452 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,453 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:59,454 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,454 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:59,455 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:59,455 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,463 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:45:59,465 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:59,465 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,465 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,465 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:59,479 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,481 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:59,481 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,481 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:59,482 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,482 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:59,486 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:45:59,488 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:59,488 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,488 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,488 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:59,492 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,496 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:45:59,507 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,508 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:59,509 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,509 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:59,509 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,510 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:59,512 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:59,516 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:45:59,516 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:45:59,519 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:45:59,519 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:45:59,521 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:45:59,522 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:59,522 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,523 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,523 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:59,534 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,535 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:59,536 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,536 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:59,537 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,537 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:59,540 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:59,542 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:45:59,543 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:45:59,544 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:45:59,545 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:45:59,546 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:45:59,547 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:59,547 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,548 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,548 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:59,561 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,563 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:59,563 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,563 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:59,563 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,564 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:45:59,567 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:45:59,570 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:45:59,572 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:45:59,573 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,573 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,573 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:45:59,588 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:45:59,589 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:45:59,590 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:45:59,590 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:45:59,590 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:45:59,591 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:00,545 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:00,545 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:00,545 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:00,546 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:00,560 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:00,562 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:00,562 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:00,562 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:00,563 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:00,563 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:00,568 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:46:00,572 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:46:00,574 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:46:00,575 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:46:00,577 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:00,578 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:00,578 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:00,578 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:00,592 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:00,593 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:00,594 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:00,594 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:00,594 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:00,595 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:00,827 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:46:00,829 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:46:00,831 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:46:00,835 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:46:00,837 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:00,837 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:00,838 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:00,838 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:00,855 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:00,856 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:00,857 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:00,857 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:00,857 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:00,858 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:01,686 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:01,686 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:01,686 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:01,687 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:01,699 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:01,701 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:01,701 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:01,701 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:01,702 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:01,702 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:02,542 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:02,542 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:02,543 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:02,543 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:02,557 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:02,559 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:02,560 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:02,560 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:02,560 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:02,560 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:03,534 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:03,535 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:03,535 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:03,535 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:03,548 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:03,550 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:03,551 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:03,551 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:03,551 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:03,551 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,532 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,532 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,533 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,533 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,547 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,549 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,550 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,550 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,550 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,551 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,560 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:46:04,560 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:46:04,563 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:46:04,564 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 72211
2025-07-27 12:46:04,567 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:46:04,568 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:46:04,572 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:46:04,575 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:46:04,575 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:46:04,577 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:46:04,579 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,579 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,579 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,580 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,595 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,597 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,597 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,598 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,598 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,598 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,612 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:46:04,615 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,615 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,616 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,616 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,633 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,635 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,636 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,636 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,637 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,637 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,646 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:46:04,647 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,648 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,648 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,649 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,665 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,668 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,669 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,669 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,670 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,670 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,685 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:46:04,687 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,687 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,688 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,688 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,701 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,703 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,704 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,705 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,705 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,706 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,719 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:46:04,722 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,722 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,723 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,723 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,738 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,739 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,740 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,740 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,740 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,741 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,750 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:46:04,752 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,753 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,754 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,754 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,767 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,769 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,769 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,769 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,770 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,770 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,779 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:46:04,781 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,781 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,781 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,781 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,793 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,795 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,795 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,795 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,796 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,796 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,800 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:46:04,802 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,802 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,802 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,803 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,814 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,816 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,817 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,817 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,817 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,817 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,824 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:46:04,826 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,826 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,827 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,827 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,839 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,841 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,841 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,841 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,841 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,842 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:04,848 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:46:04,849 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:04,850 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,850 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,850 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:04,861 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:04,863 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:04,864 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:04,864 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:04,864 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:04,865 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:05,109 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:46:05,111 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:05,111 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,112 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,112 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:05,128 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:05,130 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:05,131 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,131 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:05,131 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,132 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:05,372 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:46:05,373 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:05,374 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,374 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,374 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:05,386 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:05,388 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:05,389 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,389 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:05,390 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,390 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:05,848 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:46:05,850 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:05,851 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,851 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,852 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:05,863 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:05,865 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:05,865 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,865 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:05,866 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,866 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:05,873 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:46:05,874 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:05,874 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,874 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,875 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:05,887 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:05,889 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:05,889 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:05,889 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:05,890 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:05,890 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:06,348 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:46:06,351 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:06,352 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,352 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,352 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:06,374 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:06,387 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:06,388 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,388 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:06,388 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,389 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:06,643 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:46:06,645 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:06,646 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,646 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,646 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:06,660 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:06,662 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:06,663 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,663 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:06,664 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,664 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:06,667 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:46:06,669 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:06,669 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,670 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,670 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:06,685 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:06,687 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:06,687 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,688 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:06,688 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,688 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:06,935 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:46:06,937 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:06,937 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,938 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,938 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:06,949 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:06,951 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:06,952 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,952 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:06,952 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,952 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:06,961 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:46:06,963 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:06,963 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,963 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,964 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:06,976 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:06,978 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:06,978 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:06,978 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:06,979 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:06,979 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:07,216 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:46:07,217 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:07,218 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,218 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,218 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:07,231 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:07,234 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:07,235 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,235 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:07,236 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,236 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:07,474 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:46:07,476 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:07,476 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,477 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,477 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:07,498 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:07,500 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:07,501 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,501 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:07,502 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,502 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:07,509 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:46:07,511 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:07,511 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,512 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,512 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:07,526 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:07,528 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:07,529 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,530 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,530 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:07,530 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:07,995 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:46:07,997 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:07,997 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:07,997 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:07,997 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:08,011 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:08,013 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:08,014 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,014 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:08,015 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,015 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:08,250 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:46:08,251 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:08,252 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,252 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,252 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:08,264 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:08,265 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:08,266 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,266 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:08,266 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,267 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:08,273 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:46:08,277 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:46:08,279 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:46:08,283 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:46:08,285 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:46:08,287 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:46:08,289 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:08,289 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,289 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,289 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:08,293 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:08,295 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:08,295 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,295 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:08,296 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,296 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:08,297 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:46:08,298 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:46:08,303 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:46:08,307 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:46:08,312 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:46:08,312 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:46:08,316 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:46:08,316 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:46:08,327 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:46:08,329 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:46:08,336 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:46:08,337 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:46:08,343 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:46:08,344 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:46:08,348 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:46:08,348 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:46:08,351 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:46:08,351 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:46:08,359 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:46:08,360 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:46:08,363 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:46:08,364 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:46:08,366 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:46:08,367 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:46:08,368 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:46:08,368 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:46:08,375 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:46:08,377 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:46:08,383 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:08,383 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,384 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,384 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:08,395 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:08,397 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:46:08,397 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,397 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:46:08,398 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,398 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:46:08,663 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:46:08,899 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:46:08,905 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:46:08,908 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:46:08,910 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:46:08,914 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:46:08,915 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:46:08,917 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:46:08,919 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:46:08,921 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:46:08,925 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:46:08,926 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:46:08,927 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:46:08,928 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:46:08,930 - src.api.routers.predict - ERROR - 예측 이력 저장 실패: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:46:08.928618')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlite3.IntegrityError: NOT NULL constraint failed: prediction_history.id

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/api/routers/predict.py", line 37, in predict_stock
    db.commit()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: prediction_history.id
[SQL: INSERT INTO prediction_history (user_id, symbol, prediction, created_at, updated_at) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP) RETURNING id, updated_at]
[parameters: (1, '005930', '예측 불가', '2025-07-27 12:46:08.928618')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-27 12:46:08,934 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:46:08,939 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:46:08,940 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:46:08,942 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:46:08,942 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 156564
2025-07-27 12:46:08,944 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:46:08,946 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:46:08,949 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:46:08,951 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:46:08,952 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:46:08,953 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:46:08,955 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:46:08,956 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:08,956 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:46:08,956 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:46:08,965 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:46:08.965611
2025-07-27 12:46:08,966 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:46:08,967 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:46:08,967 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:46:08,969 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139768976326512'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139769000755056'>
2025-07-27 12:46:08,969 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:46:08,975 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139768988807424'>)
2025-07-27 12:46:08,976 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:46:08,977 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:46:08,977 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:46:08,978 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:46:08,978 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:46:08,979 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139768979303456'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139768979262672'>
2025-07-27 12:46:08,980 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:46:08,980 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139768988807424'>)
2025-07-27 12:46:08,980 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:46:08,981 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:46:08,983 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:46:08,983 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:46:08,985 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:46:08,999 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:46:52,663 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:52,664 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:46:52.819898+09:00 (in 0.155819 seconds)
2025-07-27 12:46:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:46:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:47:52.819898+09:00 (in 59.999064 seconds)
2025-07-27 12:46:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:47:52 KST)" (scheduled at 2025-07-27 21:46:52.819898+09:00)
2025-07-27 12:46:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:46:52.821497
2025-07-27 12:46:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:46:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:46:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:46:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:46:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:46:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:46:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:46:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:46:52,826 - main - DEBUG - 종목 005930 현재가: 194373
2025-07-27 12:46:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:46:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 194373, 목표가: 75000.0
2025-07-27 12:46:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 194373원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:46:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 194373원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:46:52,830 - httpcore.connection - DEBUG - close.started
2025-07-27 12:46:52,830 - httpcore.connection - DEBUG - close.failed exception=RuntimeError('Event loop is closed')
2025-07-27 12:46:52,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 229, in handle_async_request
    await self._close_connections(closing)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 345, in _close_connections
    await connection.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection.py", line 173, in aclose
    await self._connection.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/http11.py", line 258, in aclose
    await self._network_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/httpcore/_backends/anyio.py", line 53, in aclose
    await self._stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/streams/tls.py", line 216, in aclose
    await self.transport_stream.aclose()
  File "/usr/local/lib/python3.10/site-packages/anyio/_backends/_asyncio.py", line 1314, in aclose
    self._transport.close()
  File "/usr/local/lib/python3.10/asyncio/selector_events.py", line 706, in close
    self._loop.call_soon(self._call_connection_lost, None)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 753, in call_soon
    self._check_closed()
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 515, in _check_closed
    raise RuntimeError('Event loop is closed')
RuntimeError: Event loop is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 316, in _request_wrapper
    raise NetworkError(f"Unknown error in HTTP implementation: {exc!r}") from exc
telegram.error.NetworkError: Unknown error in HTTP implementation: RuntimeError('Event loop is closed')
2025-07-27 12:46:52,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:46:52,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:46:52,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 194373, 목표가: 76000.0
2025-07-27 12:46:52,833 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 194373원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:46:52,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:46:52,834 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 194373원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:46:53,836 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:46:53,837 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:46:53,838 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:46:53,839 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:46:53,839 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:46:53,839 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:47:52 KST)" executed successfully
2025-07-27 12:47:25,082 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:47:25,088 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:47:25,092 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:47:25,092 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:47:25,093 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:47:25,093 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:47:25,363 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:25,368 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:47:25,370 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:25,373 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:47:25,375 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:25,378 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:47:25,380 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:25,382 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:47:25,383 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:47:25,385 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:47:25,551 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:25,555 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:47:25,708 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:25,712 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:47:25,713 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:47:25,713 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:47:25,713 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:47:25,713 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:47:25,714 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:47:25,714 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:47:25,714 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:48:25.093596+09:00 (in 59.378890 seconds)
2025-07-27 12:47:25,714 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:47:25,715 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:47:25,715 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:47:25,715 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:47:25,716 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:47:25,717 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:47:25,718 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:47:25,723 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:47:25,726 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:47:25,737 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:47:25,738 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:47:25,743 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:47:25,743 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:47:25,754 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:47:25,755 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:47:25,759 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:47:25,760 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:47:25,763 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:47:25,764 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:47:25,767 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:47:25,767 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:47:25,770 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:47:25,770 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:47:25,777 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:47:25,779 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:47:25,782 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:47:25,782 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:47:25,784 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:47:25,784 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:47:25,785 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:47:25,786 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:47:25,791 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:47:25,793 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:47:25,797 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:47:25,797 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:47:25,797 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:47:25,798 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:47:25,809 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:47:25.809353
2025-07-27 12:47:25,809 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:47:25,810 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:47:25,810 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:47:25,811 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139784662009072'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139784661402144'>
2025-07-27 12:47:25,812 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:47:25,815 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139784661214800'>)
2025-07-27 12:47:25,816 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:47:25,816 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:47:25,817 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:47:25,817 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:47:25,818 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:47:25,819 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='139784661429616'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='139784661733664'>
2025-07-27 12:47:25,819 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:47:25,820 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='139784661214800'>)
2025-07-27 12:47:25,820 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:47:25,820 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:47:25,822 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:47:25,823 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:47:25,824 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:47:25,837 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:47:52,670 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:47:52,671 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:47:52.819898+09:00 (in 0.148826 seconds)
2025-07-27 12:47:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:47:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:48:52.819898+09:00 (in 59.998977 seconds)
2025-07-27 12:47:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:48:52 KST)" (scheduled at 2025-07-27 21:47:52.819898+09:00)
2025-07-27 12:47:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:47:52.821536
2025-07-27 12:47:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:47:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:47:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:47:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:47:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:47:52,825 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:47:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:47:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:47:52,826 - main - DEBUG - 종목 005930 현재가: 139678
2025-07-27 12:47:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:47:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 139678, 목표가: 75000.0
2025-07-27 12:47:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 139678원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:47:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 139678원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:47:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:47:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:47:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:47:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 139678, 목표가: 76000.0
2025-07-27 12:47:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 139678원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:47:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:47:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 139678원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:47:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:47:54,838 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:47:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:47:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:47:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:47:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:48:52 KST)" executed successfully
2025-07-27 12:48:43,523 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:48:43,528 - src.api.main - INFO - DB 테이블이 성공적으로 생성되었거나 이미 존재합니다.
2025-07-27 12:48:43,531 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:48:43,532 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:48:43,533 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:48:43,533 - apscheduler.scheduler - INFO - Adding job tentatively -- it will be properly scheduled when the scheduler starts
2025-07-27 12:48:43,801 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:43,806 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:48:43,809 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:43,812 - httpx - INFO - HTTP Request: GET http://testserver/admin/schedule/status "HTTP/1.1 200 OK"
2025-07-27 12:48:43,814 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:43,817 - httpx - INFO - HTTP Request: GET http://testserver/health "HTTP/1.1 200 OK"
2025-07-27 12:48:43,821 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:43,824 - src.api.routers.admin - ERROR - [trigger_job] 잡을 찾을 수 없습니다: nonexistent_job
2025-07-27 12:48:43,824 - src.api.routers.admin - ERROR - [trigger_job] 잡 실행 실패: nonexistent_job - 404: 잡을 찾을 수 없습니다: nonexistent_job
Traceback (most recent call last):
  File "/app/src/api/routers/admin.py", line 163, in trigger_job
    raise HTTPException(status_code=404, detail=f"잡을 찾을 수 없습니다: {job_id}")
fastapi.exceptions.HTTPException: 404: 잡을 찾을 수 없습니다: nonexistent_job

2025-07-27 12:48:43,826 - httpx - INFO - HTTP Request: POST http://testserver/admin/schedule/trigger/nonexistent_job "HTTP/1.1 500 Internal Server Error"
2025-07-27 12:48:43,846 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:43,850 - apscheduler.scheduler - INFO - Added job "update_stock_master_job" to job store "default"
2025-07-27 12:48:43,851 - apscheduler.scheduler - INFO - Added job "update_daily_price_job" to job store "default"
2025-07-27 12:48:43,851 - apscheduler.scheduler - INFO - Added job "check_disclosures_job" to job store "default"
2025-07-27 12:48:43,852 - apscheduler.scheduler - INFO - Added job "check_price_alerts_job" to job store "default"
2025-07-27 12:48:43,852 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:43,852 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:43,852 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:43,853 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:49:43.533421+09:00 (in 59.680211 seconds)
2025-07-27 12:48:43,853 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:43,854 - src.api.main - INFO - - Job ID: check_price_alerts_job, Trigger: interval[0:01:00]
2025-07-27 12:48:43,854 - src.api.main - INFO - - Job ID: check_disclosures_job, Trigger: interval[4:00:00]
2025-07-27 12:48:43,854 - src.api.main - INFO - - Job ID: update_stock_master_job, Trigger: cron[hour='7', minute='0']
2025-07-27 12:48:43,855 - src.api.main - INFO - - Job ID: update_daily_price_job, Trigger: cron[hour='18', minute='0']
2025-07-27 12:48:43,890 - httpx - INFO - HTTP Request: GET http://testserver/admin/admin_stats "HTTP/1.1 200 OK"
2025-07-27 12:48:43,891 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:43,892 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:43,892 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:43,892 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:43,906 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:43,908 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:43,908 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:43,908 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:43,909 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:43,909 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:43,911 - passlib.handlers.bcrypt - WARNING - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/passlib/handlers/bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-07-27 12:48:43,912 - passlib.handlers.bcrypt - DEBUG - detected 'bcrypt' backend, version '<unknown>'
2025-07-27 12:48:43,913 - passlib.handlers.bcrypt - DEBUG - 'bcrypt' backend lacks $2$ support, enabling workaround
2025-07-27 12:48:44,160 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:44,162 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:44,167 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:44,169 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:44,172 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:44,173 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,173 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,173 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:44,190 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:44,191 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:44,192 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,192 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:44,192 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,192 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:44,195 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:44,197 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:44,197 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,197 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,198 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:44,209 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:44,211 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:44,211 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,211 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:44,212 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,212 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:44,432 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:44,433 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:48:44,435 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:44,435 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,435 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,436 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:44,450 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:44,451 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:44,452 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,452 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:44,452 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,453 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:44,671 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:44,672 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:44,674 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:44,675 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:44,679 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:44,680 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=035720, target_price=50000.0, condition=lte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:44,683 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=2, user_id=1, symbol=035720
2025-07-27 12:48:44,686 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:44,693 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:44,694 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:48:44,698 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 2개 조회됨.
2025-07-27 12:48:44,700 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:44,701 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:44,702 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,702 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,702 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:44,714 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:44,716 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:44,717 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,717 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:44,718 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,719 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:44,957 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:44,957 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 조회 시도.
2025-07-27 12:48:44,958 - src.api.services.price_alert_service - DEBUG - 사용자(1)의 가격 알림 0개 조회됨.
2025-07-27 12:48:44,960 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:44,961 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:44,961 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,962 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,962 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:44,973 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:44,974 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:44,975 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,975 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:44,975 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,975 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:44,978 - httpx - INFO - HTTP Request: GET http://testserver/alerts/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:44,979 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:44,979 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,979 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,980 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:44,994 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:44,996 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:44,997 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:44,997 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:44,997 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:44,998 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:45,233 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:45,236 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:45,241 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:45,244 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:45,248 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:45,249 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:48:45,251 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:48:45,253 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/005930 "HTTP/1.1 200 OK"
2025-07-27 12:48:45,255 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:45,255 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:45,255 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:45,256 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:45,271 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:45,273 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:45,273 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:45,273 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:45,274 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:45,274 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:45,497 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:45,499 - src.api.services.price_alert_service - DEBUG - 사용자(1)와 종목(NONEXISTENT)으로 가격 알림 조회 시도.
2025-07-27 12:48:45,501 - src.api.services.price_alert_service - DEBUG - 가격 알림 없음: user_id=1, symbol=NONEXISTENT
2025-07-27 12:48:45,504 - httpx - INFO - HTTP Request: GET http://testserver/alerts/user/1/symbol/NONEXISTENT "HTTP/1.1 404 Not Found"
2025-07-27 12:48:45,506 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:45,506 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:45,507 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:45,507 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:45,552 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:45,554 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:45,555 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:45,555 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:45,555 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:45,555 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:45,790 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:45,791 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:45,793 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:45,795 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:45,798 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:45,801 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0, 'condition': 'lte', 'is_active': False}
2025-07-27 12:48:45,805 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:48:45,807 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:45,809 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:45,809 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:45,809 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:45,809 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:45,821 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:45,822 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:45,823 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:45,823 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:45,823 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:45,823 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:46,055 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:46,057 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:46,060 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:46,062 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:46,065 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:46,068 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:46,068 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:46,069 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:46,069 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:46,082 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:46,083 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:46,084 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:46,084 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:46,084 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:46,085 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:46,315 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:46,316 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:48:46,317 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:48:46,319 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:48:46,320 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:46,320 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:46,320 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:46,321 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:46,331 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:46,332 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:46,333 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:46,333 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:46,333 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:46,334 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:46,820 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:46,821 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:46,826 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:46,831 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:46,838 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:46,841 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 95000.0}
2025-07-27 12:48:46,846 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:48:46,849 - httpx - INFO - HTTP Request: PUT http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:46,851 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:46,852 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:46,852 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:46,853 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:46,869 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:46,872 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:46,873 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:46,873 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:46,874 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:46,874 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:47,119 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:47,120 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:47,122 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:47,124 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:47,127 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:47,129 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 삭제 시도.
2025-07-27 12:48:47,132 - src.api.services.price_alert_service - INFO - 가격 알림(1) 삭제 성공.
2025-07-27 12:48:47,134 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:47,136 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:47,137 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:47,137 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:47,138 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:47,155 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:47,158 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:47,158 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:47,158 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:47,159 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:47,159 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:47,437 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:47,438 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:47,443 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:47,445 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:47,448 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:47,450 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:47,451 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:47,451 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:47,451 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:47,463 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:47,465 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:47,466 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:47,466 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:47,466 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:47,467 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:47,703 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:47,705 - src.api.services.price_alert_service - DEBUG - 가격 알림(99999) 삭제 시도.
2025-07-27 12:48:47,706 - src.api.services.price_alert_service - ERROR - Alert not found: 99999
2025-07-27 12:48:47,708 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:48:47,710 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:47,710 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:47,710 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:47,711 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:47,727 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:47,729 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:47,730 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:47,731 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:47,731 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:47,732 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,205 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:48,205 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:48,207 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:48,209 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:48,212 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:48,215 - httpx - INFO - HTTP Request: DELETE http://testserver/alerts/1 "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:48,217 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,217 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,218 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,218 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,232 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,234 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,234 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,234 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,235 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,235 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,241 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:48:48,243 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,243 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,244 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,244 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,256 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,258 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,258 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,258 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,259 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,259 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,263 - httpx - INFO - HTTP Request: POST http://testserver/alerts/test_notify "HTTP/1.1 200 OK"
2025-07-27 12:48:48,265 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,265 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,266 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,266 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,270 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,273 - httpx - INFO - HTTP Request: GET http://testserver/ "HTTP/1.1 200 OK"
2025-07-27 12:48:48,283 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,285 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,285 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,285 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,286 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,286 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,289 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:48:48,294 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:48:48,294 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:48:48,297 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:48:48,298 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:48:48,299 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:48:48,301 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,301 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,301 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,301 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,314 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,315 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,316 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,316 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,316 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,317 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,320 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:48:48,322 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=INVALID
2025-07-27 12:48:48,323 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=INVALID, days=40
2025-07-27 12:48:48,325 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:48:48,325 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:48:48,326 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:48:48,328 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,328 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,328 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,329 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,341 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,343 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,343 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,343 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,344 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,344 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,347 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:48:48,350 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:48:48,352 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,352 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,352 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,353 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,368 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,369 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,370 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,370 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,370 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,371 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,606 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:48:48,610 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 2
2025-07-27 12:48:48,612 - src.api.routers.prediction_history - DEBUG - 예측 이력 2개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:48:48,614 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:48,615 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,616 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,616 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,616 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,628 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,630 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,630 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,630 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,631 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,631 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,635 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=99999, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:48:48,636 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:48:48,637 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:48:48,639 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/99999 "HTTP/1.1 200 OK"
2025-07-27 12:48:48,641 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,641 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,642 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,642 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,658 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,661 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,662 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,662 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,662 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,663 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:48,924 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=None
2025-07-27 12:48:48,926 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 0
2025-07-27 12:48:48,927 - src.api.routers.prediction_history - DEBUG - 예측 이력 0개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:48:48,928 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:48,930 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:48,931 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,931 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,931 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:48,945 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:48,947 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:48,948 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:48,948 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:48,949 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:48,949 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:49,191 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=5, symbol=None, prediction=None
2025-07-27 12:48:49,193 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 14
2025-07-27 12:48:49,194 - src.api.routers.prediction_history - DEBUG - 예측 이력 5개 조회됨 (페이지 1, 페이지 크기 5).
2025-07-27 12:48:49,196 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1?page=1&page_size=5 "HTTP/1.1 200 OK"
2025-07-27 12:48:49,199 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=2, page_size=5, symbol=None, prediction=None
2025-07-27 12:48:49,200 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 14
2025-07-27 12:48:49,202 - src.api.routers.prediction_history - DEBUG - 예측 이력 5개 조회됨 (페이지 2, 페이지 크기 5).
2025-07-27 12:48:49,204 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1?page=2&page_size=5 "HTTP/1.1 200 OK"
2025-07-27 12:48:49,206 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:49,207 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,207 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,207 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:49,223 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:49,225 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:49,225 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,226 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:49,226 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,226 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:49,455 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=005930, prediction=None
2025-07-27 12:48:49,456 - src.api.routers.prediction_history - DEBUG - 예측 이력 필터 적용: symbol=005930
2025-07-27 12:48:49,461 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 2
2025-07-27 12:48:49,465 - src.api.routers.prediction_history - DEBUG - 예측 이력 2개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:48:49,468 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1?symbol=005930 "HTTP/1.1 200 OK"
2025-07-27 12:48:49,470 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:49,471 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,471 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,471 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:49,485 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:49,486 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:49,487 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,487 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:49,487 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,488 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:49,718 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=None, prediction=상승
2025-07-27 12:48:49,718 - src.api.routers.prediction_history - DEBUG - 예측 이력 필터 적용: prediction=상승
2025-07-27 12:48:49,721 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 1
2025-07-27 12:48:49,723 - src.api.routers.prediction_history - DEBUG - 예측 이력 1개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:48:49,725 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1?prediction=%EC%83%81%EC%8A%B9 "HTTP/1.1 200 OK"
2025-07-27 12:48:49,726 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:49,727 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,727 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,727 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:49,739 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:49,740 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:49,741 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,741 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:49,741 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,742 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:49,985 - src.api.routers.prediction_history - DEBUG - get_prediction_history 호출: user_id=1, page=1, page_size=10, symbol=005930, prediction=유지
2025-07-27 12:48:49,986 - src.api.routers.prediction_history - DEBUG - 예측 이력 필터 적용: symbol=005930
2025-07-27 12:48:49,986 - src.api.routers.prediction_history - DEBUG - 예측 이력 필터 적용: prediction=유지
2025-07-27 12:48:49,989 - src.api.routers.prediction_history - DEBUG - 예측 이력 총 개수: 1
2025-07-27 12:48:49,993 - src.api.routers.prediction_history - DEBUG - 예측 이력 1개 조회됨 (페이지 1, 페이지 크기 10).
2025-07-27 12:48:49,995 - httpx - INFO - HTTP Request: GET http://testserver/prediction/history/1?symbol=005930&prediction=%EC%9C%A0%EC%A7%80 "HTTP/1.1 200 OK"
2025-07-27 12:48:49,997 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:49,998 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:49,998 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:49,999 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,013 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,015 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,016 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,016 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,017 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,017 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,030 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:48:50,030 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:48:50,033 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:48:50,033 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 178274
2025-07-27 12:48:50,037 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:48:50,038 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:48:50,042 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:48:50,045 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:48:50,045 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:48:50,047 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:50,049 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,049 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,050 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,050 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,067 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,069 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,070 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,070 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,070 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,070 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,083 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:48:50,085 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,086 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,086 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,086 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,105 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,107 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,108 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,108 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,109 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,109 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,116 - httpx - INFO - HTTP Request: GET http://testserver/symbols/ "HTTP/1.1 200 OK"
2025-07-27 12:48:50,118 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,118 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,119 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,119 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,131 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,132 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,133 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,133 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,133 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,133 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,145 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%82%BC%EC%84%B1%EC%A0%84%EC%9E%90 "HTTP/1.1 200 OK"
2025-07-27 12:48:50,147 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,147 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,147 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,148 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,162 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,164 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,165 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,165 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,165 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,166 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,178 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=035720 "HTTP/1.1 200 OK"
2025-07-27 12:48:50,180 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,181 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,181 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,181 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,199 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,201 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,202 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,202 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,203 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,203 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,214 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=sk%ED%95%98%EC%9D%B4%EB%8B%89%EC%8A%A4 "HTTP/1.1 200 OK"
2025-07-27 12:48:50,215 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,216 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,216 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,216 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,233 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,236 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,237 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,237 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,238 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,238 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,263 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query=%EC%97%86%EB%8A%94%EC%A2%85%EB%AA%A9 "HTTP/1.1 200 OK"
2025-07-27 12:48:50,265 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,265 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,266 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,266 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,293 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,295 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,296 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,296 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,296 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,297 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,302 - httpx - INFO - HTTP Request: GET http://testserver/symbols/search?query= "HTTP/1.1 422 Unprocessable Entity"
2025-07-27 12:48:50,303 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,303 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,304 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,304 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,316 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,318 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,318 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,318 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,319 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,319 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,325 - httpx - INFO - HTTP Request: GET http://testserver/symbols/005930/current_price_and_change "HTTP/1.1 200 OK"
2025-07-27 12:48:50,326 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,327 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,327 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,327 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,338 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,340 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,340 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,341 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,341 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,341 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,347 - httpx - INFO - HTTP Request: GET http://testserver/symbols/NONEXISTENT/current_price_and_change "HTTP/1.1 404 Not Found"
2025-07-27 12:48:50,348 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,349 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,349 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,349 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,361 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,362 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,363 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,363 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,363 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,364 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,605 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:48:50,607 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,607 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,607 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,608 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,619 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,620 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,621 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,621 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,621 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,622 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:50,854 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 400 Bad Request"
2025-07-27 12:48:50,855 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:50,856 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,856 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,856 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:50,867 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:50,869 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:50,869 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:50,869 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:50,870 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:50,870 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:51,323 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:48:51,326 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:51,326 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:51,327 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:51,327 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:51,343 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:51,345 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:51,345 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:51,346 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:51,346 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:51,346 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:51,353 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:48:51,354 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:51,355 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:51,355 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:51,355 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:51,368 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:51,370 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:51,371 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:51,371 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:51,371 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:51,372 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:51,819 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 401 Unauthorized"
2025-07-27 12:48:51,820 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:51,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:51,821 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:51,821 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:51,833 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:51,835 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:51,835 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:51,835 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:51,836 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:51,836 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:52,081 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:48:52,084 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:52,085 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,085 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,086 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:52,108 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:52,111 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:52,112 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,112 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:52,113 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,113 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:52,118 - httpx - INFO - HTTP Request: GET http://testserver/users/me "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:52,119 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:52,120 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,120 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,121 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:52,149 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:52,151 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:52,152 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,152 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:52,153 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,153 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:52,446 - httpx - INFO - HTTP Request: PUT http://testserver/users/me "HTTP/1.1 200 OK"
2025-07-27 12:48:52,448 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:52,448 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,448 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,449 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:52,461 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:52,462 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:52,463 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,463 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:52,463 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,464 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:52,472 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:48:52,474 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:52,474 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,474 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,474 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:52,486 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:52,488 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:52,488 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,488 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:52,489 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,489 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:52,658 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,659 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:48:52.819898+09:00 (in 0.160816 seconds)
2025-07-27 12:48:52,718 - httpx - INFO - HTTP Request: PUT http://testserver/users/telegram_register "HTTP/1.1 200 OK"
2025-07-27 12:48:52,719 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:52,720 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,720 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,721 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:52,733 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:52,735 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:52,735 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,735 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:52,736 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,736 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:49:52.819898+09:00 (in 59.999150 seconds)
2025-07-27 12:48:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:49:52 KST)" (scheduled at 2025-07-27 21:48:52.819898+09:00)
2025-07-27 12:48:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:48:52.821387
2025-07-27 12:48:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:48:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:48:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:48:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:48:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:48:52,823 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:48:52,824 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:48:52,825 - main - DEBUG - 종목 005930 현재가: 63708
2025-07-27 12:48:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:48:52,825 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:48:52,825 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:48:52,826 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:48:52,826 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:48:52,826 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:49:52 KST)" executed successfully
2025-07-27 12:48:52,977 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:52,979 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:52,979 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,979 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,979 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:52,991 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:52,993 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:52,994 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:52,994 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:52,994 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:52,994 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:53,001 - httpx - INFO - HTTP Request: GET http://testserver/users/stats/99999 "HTTP/1.1 404 Not Found"
2025-07-27 12:48:53,002 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:53,002 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,003 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,003 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:53,016 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:53,017 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:53,018 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,018 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:53,019 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,019 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:53,478 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 200 OK"
2025-07-27 12:48:53,480 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:53,480 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,481 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,481 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:53,494 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:53,496 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:53,497 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,497 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:53,497 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,498 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:53,730 - httpx - INFO - HTTP Request: GET http://testserver/users/ "HTTP/1.1 403 Forbidden"
2025-07-27 12:48:53,734 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:53,735 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,735 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,735 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:53,747 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:53,749 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:53,749 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,749 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:53,750 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,750 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:53,758 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:48:53,762 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:48:53,764 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:48:53,768 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 시도: user_id=1
2025-07-27 12:48:53,769 - src.api.routers.watchlist - DEBUG - 관심 종목 조회 성공: user_id=1, 1개 종목.
2025-07-27 12:48:53,771 - httpx - INFO - HTTP Request: GET http://testserver/watchlist/get/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:53,773 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:53,773 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,774 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,774 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:53,778 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:53,780 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:53,781 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,781 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:53,781 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,782 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:53,783 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:48:53,784 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:48:53,789 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:53,792 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12345
2025-07-27 12:48:53,797 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=6, telegram_id=12345
2025-07-27 12:48:53,797 - src.api.services.price_alert_service - DEBUG - 사용자(6)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:48:53,802 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=1
2025-07-27 12:48:53,803 - src.api.services.price_alert_service - DEBUG - 가격 알림(1) 수정 시도: update_data={'target_price': 75000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'daily'}
2025-07-27 12:48:53,817 - src.api.services.price_alert_service - INFO - 가격 알림(1) 수정 성공.
2025-07-27 12:48:53,818 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:48:53,823 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:48:53,823 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:48:53,826 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:53,827 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:48:53,828 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:48:53,829 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:48:53,831 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:48:53,831 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 70000.0, 'condition': 'lte', 'is_active': True, 'repeat_interval': None}
2025-07-27 12:48:53,838 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:48:53,839 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:48:53,842 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:53,843 - src.api.services.user_service - DEBUG - Attempting to retrieve user by telegram_id: 12346
2025-07-27 12:48:53,844 - src.api.services.user_service - DEBUG - User found by telegram_id: user_id=7, telegram_id=12346
2025-07-27 12:48:53,844 - src.api.services.price_alert_service - DEBUG - 사용자(7)와 종목(005930)으로 가격 알림 조회 시도.
2025-07-27 12:48:53,846 - src.api.services.price_alert_service - DEBUG - 가격 알림 발견: alert_id=2
2025-07-27 12:48:53,847 - src.api.services.price_alert_service - DEBUG - 가격 알림(2) 수정 시도: update_data={'target_price': 76000.0, 'condition': 'gte', 'is_active': True, 'repeat_interval': 'weekly'}
2025-07-27 12:48:53,852 - src.api.services.price_alert_service - INFO - 가격 알림(2) 수정 성공.
2025-07-27 12:48:53,854 - httpx - INFO - HTTP Request: POST http://testserver/bot/alert/price "HTTP/1.1 200 OK"
2025-07-27 12:48:53,858 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:53,858 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,858 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,859 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:53,872 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:48:53,873 - apscheduler.scheduler - INFO - Scheduler started
2025-07-27 12:48:53,874 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:53,874 - src.api.main - INFO - APScheduler (startup 이벤트) 시작됨
2025-07-27 12:48:53,875 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:53,875 - src.api.main - INFO - 등록된 잡 목록:
2025-07-27 12:48:54,107 - httpx - INFO - HTTP Request: POST http://testserver/users/register "HTTP/1.1 200 OK"
2025-07-27 12:48:54,390 - httpx - INFO - HTTP Request: POST http://testserver/users/login "HTTP/1.1 200 OK"
2025-07-27 12:48:54,397 - src.api.routers.watchlist - DEBUG - 관심 종목 추가 시도: user_id=1, symbol=005930
2025-07-27 12:48:54,402 - src.api.routers.watchlist - INFO - 관심 종목 추가 성공: user_id=1, symbol=005930
2025-07-27 12:48:54,404 - httpx - INFO - HTTP Request: POST http://testserver/watchlist/add "HTTP/1.1 200 OK"
2025-07-27 12:48:54,408 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:48:54,410 - src.api.services.price_alert_service - DEBUG - 가격 알림 생성 시도: user_id=1, symbol=005930, target_price=90000.0, condition=gte, change_percent=None, change_type=None, notify_on_disclosure=False, repeat_interval=None
2025-07-27 12:48:54,413 - src.api.services.price_alert_service - INFO - 가격 알림 생성 성공: alert_id=1, user_id=1, symbol=005930
2025-07-27 12:48:54,415 - httpx - INFO - HTTP Request: POST http://testserver/alerts/ "HTTP/1.1 200 OK"
2025-07-27 12:48:54,418 - httpx - INFO - HTTP Request: POST http://testserver/predict "HTTP/1.1 307 Temporary Redirect"
2025-07-27 12:48:54,422 - src.api.services.predict_service - DEBUG - predict_stock_movement 호출: symbol=005930
2025-07-27 12:48:54,422 - src.api.services.predict_service - DEBUG - get_recent_prices 호출: symbol=005930, days=40
2025-07-27 12:48:54,424 - src.api.services.predict_service - DEBUG - get_recent_prices 결과: 0개 데이터.
2025-07-27 12:48:54,424 - src.api.services.predict_service - WARNING - 예측 불가: 데이터 부족(0일)
2025-07-27 12:48:54,430 - httpx - INFO - HTTP Request: POST http://testserver/predict/ "HTTP/1.1 200 OK"
2025-07-27 12:48:54,435 - src.api.routers.simulated_trade - DEBUG - simulate_trade 호출: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:48:54,435 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:48:54,438 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:48:54,438 - src.api.routers.simulated_trade - DEBUG - 종목 005930의 현재가: 129425
2025-07-27 12:48:54,441 - src.api.routers.simulated_trade - INFO - 모의매매 기록 완료: user_id=1, symbol=005930, trade_type=buy
2025-07-27 12:48:54,443 - httpx - INFO - HTTP Request: POST http://testserver/trade/simulate "HTTP/1.1 200 OK"
2025-07-27 12:48:54,447 - src.api.routers.simulated_trade - DEBUG - get_trade_history 호출: user_id=1
2025-07-27 12:48:54,449 - src.api.routers.simulated_trade - DEBUG - 사용자(1)의 모의매매 이력 1건 조회됨.
2025-07-27 12:48:54,449 - src.api.routers.simulated_trade - DEBUG - 모의매매 통계: {'total_trades': 1, 'total_profit_loss': 0, 'profitable_trades': 0, 'win_rate': 0.0}
2025-07-27 12:48:54,451 - httpx - INFO - HTTP Request: GET http://testserver/trade/history/1 "HTTP/1.1 200 OK"
2025-07-27 12:48:54,453 - apscheduler.scheduler - INFO - Scheduler has been shut down
2025-07-27 12:48:54,454 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:48:54,454 - apscheduler.scheduler - DEBUG - No jobs; waiting until a job is added
2025-07-27 12:48:54,454 - src.api.main - INFO - APScheduler가 정상적으로 종료되었습니다.
2025-07-27 12:48:54,461 - src.api.main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:48:54.461261
2025-07-27 12:48:54,461 - src.api.main - DEBUG - 활성 알림 수: 3
2025-07-27 12:48:54,462 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:48:54,462 - src.api.main - DEBUG - 종목 정상종목 현재가: 110
2025-07-27 12:48:54,463 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140174149506272'>, 목표 가격: 100, 조건: gte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140174149538320'>
2025-07-27 12:48:54,464 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목, 현재가: 110, 목표가: 100
2025-07-27 12:48:54,469 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140174149630224'>)
2025-07-27 12:48:54,470 - src.api.main - DEBUG - 종목 정상종목에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:48:54,471 - src.api.main - DEBUG - 종목 오류종목에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:48:54,471 - src.api.main - ERROR - 가격 알림 확인 중 '오류종목' 처리 오류: 현재가 조회 실패
Traceback (most recent call last):
  File "/app/src/api/main.py", line 135, in check_price_alerts_job
    price_data = stock_service.get_current_price_and_change(symbol, db)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1179, in _execute_mock_call
    result = effect(*args, **kwargs)
  File "/app/src/api/tests/test_main_jobs.py", line 34, in get_current_price_side_effect
    raise ValueError("현재가 조회 실패")
ValueError: 현재가 조회 실패
2025-07-27 12:48:54,473 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 확인 시작. 알림 수: 1
2025-07-27 12:48:54,473 - src.api.main - DEBUG - 종목 정상종목2 현재가: 290
2025-07-27 12:48:54,476 - src.api.main - DEBUG - 알림 ID: <MagicMock name='mock.id' id='140174149726896'>, 목표 가격: 300, 조건: lte, 반복 주기: <MagicMock name='mock.repeat_interval' id='140174149988560'>
2025-07-27 12:48:54,476 - src.api.main - INFO - 가격 알림 트리거됨: 정상종목2, 현재가: 290, 목표가: 300
2025-07-27 12:48:54,477 - src.api.main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: <MagicMock name='mock.query().filter().first().telegram_id' id='140174149630224'>)
2025-07-27 12:48:54,479 - src.api.main - DEBUG - 종목 정상종목2에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:48:54,481 - src.api.main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:48:54,486 - src.api.services.stock_service - DEBUG - update_stock_master 호출: use_dart=True
2025-07-27 12:48:54,486 - src.api.services.stock_service - ERROR - DART API 연동 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:48:54,487 - src.api.services.stock_service - ERROR - 종목마스터 갱신 실패: [020] DART API 사용량 초과
Traceback (most recent call last):
  File "/app/src/api/services/stock_service.py", line 241, in update_stock_master
    all_stocks = dart_get_all_stocks()
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1114, in __call__
    return self._mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1118, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
  File "/usr/local/lib/python3.10/unittest/mock.py", line 1173, in _execute_mock_call
    raise effect
src.common.exceptions.DartApiError: [020] DART API 사용량 초과
2025-07-27 12:48:54,502 - src.api.services.stock_service - ERROR - 일별시세 갱신 중 '오류종목' 처리에서 오류 발생: DB 저장 실패
2025-07-27 12:49:52,664 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:49:52,664 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:49:52.819898+09:00 (in 0.155101 seconds)
2025-07-27 12:49:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:49:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:50:52.819898+09:00 (in 59.998838 seconds)
2025-07-27 12:49:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:50:52 KST)" (scheduled at 2025-07-27 21:49:52.819898+09:00)
2025-07-27 12:49:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:49:52.821853
2025-07-27 12:49:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:49:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:49:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:49:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:49:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:49:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:49:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:49:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:49:52,825 - main - DEBUG - 종목 005930 현재가: 156927
2025-07-27 12:49:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:49:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 156927, 목표가: 75000.0
2025-07-27 12:49:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 156927원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:49:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:49:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 156927원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:49:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:49:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:49:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:49:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 156927, 목표가: 76000.0
2025-07-27 12:49:53,833 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 156927원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:49:53,833 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:49:53,834 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 156927원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:49:54,836 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:49:54,837 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:49:54,838 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:49:54,838 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:49:54,838 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:49:54,839 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:50:52 KST)" executed successfully
2025-07-27 12:50:52,657 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:50:52,657 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:50:52.819898+09:00 (in 0.162265 seconds)
2025-07-27 12:50:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:50:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:51:52.819898+09:00 (in 59.999011 seconds)
2025-07-27 12:50:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:51:52 KST)" (scheduled at 2025-07-27 21:50:52.819898+09:00)
2025-07-27 12:50:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:50:52.821542
2025-07-27 12:50:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:50:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:50:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:50:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:50:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:50:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:50:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:50:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:50:52,825 - main - DEBUG - 종목 005930 현재가: 165733
2025-07-27 12:50:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:50:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 165733, 목표가: 75000.0
2025-07-27 12:50:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 165733원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:50:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:50:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 165733원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:50:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:50:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:50:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:50:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 165733, 목표가: 76000.0
2025-07-27 12:50:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 165733원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:50:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:50:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 165733원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:50:54,837 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:50:54,838 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:50:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:50:54,839 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:50:54,839 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:50:54,839 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:51:52 KST)" executed successfully
2025-07-27 12:51:52,662 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:51:52,662 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:51:52.819898+09:00 (in 0.157461 seconds)
2025-07-27 12:51:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:51:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:52:52.819898+09:00 (in 59.998972 seconds)
2025-07-27 12:51:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:52:52 KST)" (scheduled at 2025-07-27 21:51:52.819898+09:00)
2025-07-27 12:51:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:51:52.821596
2025-07-27 12:51:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:51:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:51:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:51:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:51:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:51:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:51:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:51:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:51:52,825 - main - DEBUG - 종목 005930 현재가: 179439
2025-07-27 12:51:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:51:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 179439, 목표가: 75000.0
2025-07-27 12:51:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 179439원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:51:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:51:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 179439원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:51:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:51:53,830 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:51:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:51:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 179439, 목표가: 76000.0
2025-07-27 12:51:53,832 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 179439원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:51:53,832 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:51:53,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 179439원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:51:54,835 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:51:54,836 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:51:54,837 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:51:54,837 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:51:54,837 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:51:54,837 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:52:52 KST)" executed successfully
2025-07-27 12:52:52,663 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:52:52,664 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:52:52.819898+09:00 (in 0.155792 seconds)
2025-07-27 12:52:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:52:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:53:52.819898+09:00 (in 59.999223 seconds)
2025-07-27 12:52:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:53:52 KST)" (scheduled at 2025-07-27 21:52:52.819898+09:00)
2025-07-27 12:52:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:52:52.821150
2025-07-27 12:52:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:52:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:52:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:52:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:52:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:52:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:52:52,823 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:52:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:52:52,825 - main - DEBUG - 종목 005930 현재가: 199999
2025-07-27 12:52:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:52:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 199999, 목표가: 75000.0
2025-07-27 12:52:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 199999원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:52:52,830 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:52:52,838 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 199999원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:52:53,842 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:52:53,843 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:52:53,843 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:52:53,843 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 199999, 목표가: 76000.0
2025-07-27 12:52:53,845 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 199999원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:52:53,845 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:52:53,845 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 199999원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:52:54,848 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:52:54,849 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:52:54,849 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:52:54,850 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:52:54,850 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:52:54,850 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:53:52 KST)" executed successfully
2025-07-27 12:53:52,668 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:53:52,669 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:53:52.819898+09:00 (in 0.150911 seconds)
2025-07-27 12:53:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:53:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:54:52.819898+09:00 (in 59.998907 seconds)
2025-07-27 12:53:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:54:52 KST)" (scheduled at 2025-07-27 21:53:52.819898+09:00)
2025-07-27 12:53:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:53:52.821706
2025-07-27 12:53:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:53:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:53:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:53:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:53:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:53:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:53:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:53:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:53:52,825 - main - DEBUG - 종목 005930 현재가: 109003
2025-07-27 12:53:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:53:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 109003, 목표가: 75000.0
2025-07-27 12:53:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 109003원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:53:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:53:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 109003원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:53:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:53:53,830 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:53:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:53:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 109003, 목표가: 76000.0
2025-07-27 12:53:53,832 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 109003원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:53:53,833 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:53:53,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 109003원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:53:54,836 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:53:54,837 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:53:54,837 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:53:54,838 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:53:54,838 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:53:54,838 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:54:52 KST)" executed successfully
2025-07-27 12:54:52,665 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:54:52,665 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:54:52.819898+09:00 (in 0.154369 seconds)
2025-07-27 12:54:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:54:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:55:52.819898+09:00 (in 59.998744 seconds)
2025-07-27 12:54:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:55:52 KST)" (scheduled at 2025-07-27 21:54:52.819898+09:00)
2025-07-27 12:54:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:54:52.822028
2025-07-27 12:54:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:54:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:54:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:54:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:54:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:54:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:54:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:54:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:54:52,825 - main - DEBUG - 종목 005930 현재가: 99699
2025-07-27 12:54:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:54:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 99699, 목표가: 75000.0
2025-07-27 12:54:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 99699원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 12:54:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:54:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 99699원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:54:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:54:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:54:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:54:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 99699, 목표가: 76000.0
2025-07-27 12:54:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 99699원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 12:54:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:54:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 99699원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:54:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:54:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:54:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:54:54,839 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:54:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:54:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:55:52 KST)" executed successfully
2025-07-27 12:55:52,676 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:55:52,676 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:55:52.819898+09:00 (in 0.143069 seconds)
2025-07-27 12:55:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:55:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:56:52.819898+09:00 (in 59.998803 seconds)
2025-07-27 12:55:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:56:52 KST)" (scheduled at 2025-07-27 21:55:52.819898+09:00)
2025-07-27 12:55:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:55:52.821721
2025-07-27 12:55:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:55:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:55:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:55:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:55:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:55:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:55:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:55:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:55:52,825 - main - DEBUG - 종목 005930 현재가: 140806
2025-07-27 12:55:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:55:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 140806, 목표가: 75000.0
2025-07-27 12:55:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 140806원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:55:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:55:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 140806원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:55:53,829 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:55:53,830 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:55:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:55:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 140806, 목표가: 76000.0
2025-07-27 12:55:53,832 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 140806원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:55:53,832 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:55:53,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 140806원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:55:54,835 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:55:54,836 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:55:54,837 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:55:54,837 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:55:54,837 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:55:54,838 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:56:52 KST)" executed successfully
2025-07-27 12:56:52,641 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:56:52,641 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:56:52.819898+09:00 (in 0.178440 seconds)
2025-07-27 12:56:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:56:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:57:52.819898+09:00 (in 59.999074 seconds)
2025-07-27 12:56:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:57:52 KST)" (scheduled at 2025-07-27 21:56:52.819898+09:00)
2025-07-27 12:56:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:56:52.821430
2025-07-27 12:56:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:56:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:56:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:56:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:56:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:56:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:56:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:56:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:56:52,825 - main - DEBUG - 종목 005930 현재가: 119856
2025-07-27 12:56:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:56:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 119856, 목표가: 75000.0
2025-07-27 12:56:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 119856원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:56:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:56:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 119856원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:56:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:56:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:56:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:56:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 119856, 목표가: 76000.0
2025-07-27 12:56:53,833 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 119856원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:56:53,833 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:56:53,834 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 119856원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:56:54,837 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:56:54,838 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:56:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:56:54,839 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:56:54,839 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:56:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:57:52 KST)" executed successfully
2025-07-27 12:57:52,668 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:57:52,668 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:57:52.819898+09:00 (in 0.151030 seconds)
2025-07-27 12:57:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:57:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:58:52.819898+09:00 (in 59.998929 seconds)
2025-07-27 12:57:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:58:52 KST)" (scheduled at 2025-07-27 21:57:52.819898+09:00)
2025-07-27 12:57:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:57:52.821633
2025-07-27 12:57:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:57:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:57:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:57:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:57:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:57:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:57:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:57:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:57:52,826 - main - DEBUG - 종목 005930 현재가: 111181
2025-07-27 12:57:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:57:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 111181, 목표가: 75000.0
2025-07-27 12:57:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 111181원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:57:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:57:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 111181원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:57:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:57:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:57:53,833 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:57:53,833 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 111181, 목표가: 76000.0
2025-07-27 12:57:53,835 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 111181원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:57:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:57:53,836 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 111181원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:57:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:57:54,840 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:57:54,840 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:57:54,841 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:57:54,841 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:57:54,841 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:58:52 KST)" executed successfully
2025-07-27 12:58:52,657 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:58:52,657 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:58:52.819898+09:00 (in 0.162117 seconds)
2025-07-27 12:58:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:58:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:59:52.819898+09:00 (in 59.998871 seconds)
2025-07-27 12:58:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:59:52 KST)" (scheduled at 2025-07-27 21:58:52.819898+09:00)
2025-07-27 12:58:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:58:52.821735
2025-07-27 12:58:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:58:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:58:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:58:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:58:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:58:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:58:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:58:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:58:52,825 - main - DEBUG - 종목 005930 현재가: 54086
2025-07-27 12:58:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:58:52,825 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:58:52,826 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:58:52,826 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:58:52,826 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:58:52,826 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 21:59:52 KST)" executed successfully
2025-07-27 12:59:52,658 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:59:52,658 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 21:59:52.819898+09:00 (in 0.161290 seconds)
2025-07-27 12:59:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 12:59:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:00:52.819898+09:00 (in 59.999060 seconds)
2025-07-27 12:59:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:00:52 KST)" (scheduled at 2025-07-27 21:59:52.819898+09:00)
2025-07-27 12:59:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 12:59:52.821494
2025-07-27 12:59:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 12:59:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 12:59:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 12:59:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 12:59:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 12:59:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 12:59:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 12:59:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 12:59:52,826 - main - DEBUG - 종목 005930 현재가: 191507
2025-07-27 12:59:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 12:59:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 191507, 목표가: 75000.0
2025-07-27 12:59:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 191507원이 목표가 75000.0원(gte)에 도달...
2025-07-27 12:59:52,829 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:59:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 191507원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:59:53,832 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:59:53,833 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 12:59:53,833 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 12:59:53,833 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 191507, 목표가: 76000.0
2025-07-27 12:59:53,835 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 191507원이 목표가 76000.0원(gte)에 도달...
2025-07-27 12:59:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 12:59:53,836 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 191507원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 12:59:54,839 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 12:59:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 12:59:54,840 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 12:59:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 12:59:54,841 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 12:59:54,841 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:00:52 KST)" executed successfully
2025-07-27 13:00:52,658 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:00:52,659 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:00:52.819898+09:00 (in 0.160657 seconds)
2025-07-27 13:00:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:00:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:01:52.819898+09:00 (in 59.998833 seconds)
2025-07-27 13:00:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:01:52 KST)" (scheduled at 2025-07-27 22:00:52.819898+09:00)
2025-07-27 13:00:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:00:52.821731
2025-07-27 13:00:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:00:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:00:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:00:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:00:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:00:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:00:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:00:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:00:52,825 - main - DEBUG - 종목 005930 현재가: 171615
2025-07-27 13:00:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:00:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 171615, 목표가: 75000.0
2025-07-27 13:00:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 171615원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:00:52,826 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:00:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 171615원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:00:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:00:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:00:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:00:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 171615, 목표가: 76000.0
2025-07-27 13:00:53,833 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 171615원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:00:53,833 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:00:53,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 171615원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:00:54,836 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:00:54,837 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:00:54,838 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:00:54,838 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:00:54,838 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:00:54,838 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:01:52 KST)" executed successfully
2025-07-27 13:01:52,659 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:01:52,660 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:01:52.819898+09:00 (in 0.159781 seconds)
2025-07-27 13:01:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:01:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:02:52.819898+09:00 (in 59.998610 seconds)
2025-07-27 13:01:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:02:52 KST)" (scheduled at 2025-07-27 22:01:52.819898+09:00)
2025-07-27 13:01:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:01:52.822064
2025-07-27 13:01:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:01:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:01:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:01:52,825 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:01:52,825 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:01:52,826 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:01:52,826 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:01:52,828 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:01:52,828 - main - DEBUG - 종목 005930 현재가: 114366
2025-07-27 13:01:52,828 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:01:52,828 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 114366, 목표가: 75000.0
2025-07-27 13:01:52,829 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 114366원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:01:52,830 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:01:52,830 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 114366원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:01:53,833 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:01:53,834 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:01:53,835 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:01:53,835 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 114366, 목표가: 76000.0
2025-07-27 13:01:53,836 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 114366원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:01:53,837 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:01:53,837 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 114366원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:01:54,840 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:01:54,841 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:01:54,842 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:01:54,842 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:01:54,842 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:01:54,842 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:02:52 KST)" executed successfully
2025-07-27 13:02:52,660 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:02:52,661 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:02:52.819898+09:00 (in 0.158649 seconds)
2025-07-27 13:02:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:02:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:03:52.819898+09:00 (in 59.999017 seconds)
2025-07-27 13:02:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:03:52 KST)" (scheduled at 2025-07-27 22:02:52.819898+09:00)
2025-07-27 13:02:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:02:52.821511
2025-07-27 13:02:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:02:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:02:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:02:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:02:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:02:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:02:52,823 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:02:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:02:52,825 - main - DEBUG - 종목 005930 현재가: 119036
2025-07-27 13:02:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:02:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 119036, 목표가: 75000.0
2025-07-27 13:02:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 119036원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:02:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:02:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 119036원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:02:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:02:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:02:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:02:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 119036, 목표가: 76000.0
2025-07-27 13:02:53,833 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 119036원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:02:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:02:53,834 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 119036원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:02:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:02:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:02:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:02:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:02:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:02:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:03:52 KST)" executed successfully
2025-07-27 13:03:52,648 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:03:52,649 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:03:52.819898+09:00 (in 0.170479 seconds)
2025-07-27 13:03:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:03:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:04:52.819898+09:00 (in 59.998870 seconds)
2025-07-27 13:03:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:04:52 KST)" (scheduled at 2025-07-27 22:03:52.819898+09:00)
2025-07-27 13:03:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:03:52.821926
2025-07-27 13:03:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:03:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:03:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:03:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:03:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:03:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:03:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:03:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:03:52,825 - main - DEBUG - 종목 005930 현재가: 169605
2025-07-27 13:03:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:03:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 169605, 목표가: 75000.0
2025-07-27 13:03:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 169605원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:03:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:03:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 169605원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:03:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:03:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:03:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:03:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 169605, 목표가: 76000.0
2025-07-27 13:03:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 169605원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:03:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:03:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 169605원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:03:54,837 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:03:54,838 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:03:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:03:54,839 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:03:54,839 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:03:54,839 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:04:52 KST)" executed successfully
2025-07-27 13:04:52,658 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:04:52,659 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:04:52.819898+09:00 (in 0.160703 seconds)
2025-07-27 13:04:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:04:52,824 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:05:52.819898+09:00 (in 59.995242 seconds)
2025-07-27 13:04:52,824 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:05:52 KST)" (scheduled at 2025-07-27 22:04:52.819898+09:00)
2025-07-27 13:04:52,825 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:04:52.825906
2025-07-27 13:04:52,837 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:04:52,837 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:04:52,838 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:04:52,858 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:04:52,859 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:04:52,860 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:04:52,861 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:04:52,878 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:04:52,879 - main - DEBUG - 종목 005930 현재가: 72799
2025-07-27 13:04:52,880 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:04:52,880 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:04:52,884 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:04:52,885 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:04:52,886 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:04:52,886 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:05:52 KST)" executed successfully
2025-07-27 13:05:52,668 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:05:52,668 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:05:52.819898+09:00 (in 0.151352 seconds)
2025-07-27 13:05:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:05:52,869 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:06:52.819898+09:00 (in 59.950294 seconds)
2025-07-27 13:05:52,869 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:06:52 KST)" (scheduled at 2025-07-27 22:05:52.819898+09:00)
2025-07-27 13:05:52,870 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:05:52.870448
2025-07-27 13:05:52,871 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:05:52,872 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:05:52,872 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:05:52,879 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:05:52,879 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:05:52,880 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:05:52,880 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:05:52,898 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:05:52,898 - main - DEBUG - 종목 005930 현재가: 180181
2025-07-27 13:05:52,899 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:05:52,899 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 180181, 목표가: 75000.0
2025-07-27 13:05:52,901 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 180181원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:05:52,901 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:05:52,902 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 180181원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:05:53,917 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:05:53,922 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:05:53,922 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:05:53,923 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 180181, 목표가: 76000.0
2025-07-27 13:05:53,925 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 180181원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:05:53,925 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:05:53,926 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 180181원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:05:54,929 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:05:54,930 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:05:54,931 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:05:54,932 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:05:54,932 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:05:54,932 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:06:52 KST)" executed successfully
2025-07-27 13:06:52,647 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:06:52,649 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:06:52.819898+09:00 (in 0.170901 seconds)
2025-07-27 13:06:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:06:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:07:52.819898+09:00 (in 59.998422 seconds)
2025-07-27 13:06:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:07:52 KST)" (scheduled at 2025-07-27 22:06:52.819898+09:00)
2025-07-27 13:06:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:06:52.822563
2025-07-27 13:06:52,823 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:06:52,823 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:06:52,823 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:06:52,828 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:06:52,828 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:06:52,829 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:06:52,829 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:06:52,832 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:06:52,832 - main - DEBUG - 종목 005930 현재가: 79518
2025-07-27 13:06:52,833 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:06:52,833 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 79518, 목표가: 75000.0
2025-07-27 13:06:52,835 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 79518원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 13:06:52,836 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:06:52,837 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 79518원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:06:53,841 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:06:53,843 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:06:53,843 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:06:53,844 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 79518, 목표가: 76000.0
2025-07-27 13:06:53,846 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 79518원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 13:06:53,847 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:06:53,847 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 79518원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:06:54,850 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:06:54,851 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:06:54,852 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:06:54,853 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:06:54,853 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:06:54,853 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:07:52 KST)" executed successfully
2025-07-27 13:07:52,631 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:07:52,632 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:07:52.819898+09:00 (in 0.187453 seconds)
2025-07-27 13:07:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:07:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:08:52.819898+09:00 (in 59.999072 seconds)
2025-07-27 13:07:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:08:52 KST)" (scheduled at 2025-07-27 22:07:52.819898+09:00)
2025-07-27 13:07:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:07:52.821482
2025-07-27 13:07:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:07:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:07:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:07:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:07:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:07:52,823 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:07:52,823 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:07:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:07:52,825 - main - DEBUG - 종목 005930 현재가: 167967
2025-07-27 13:07:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:07:52,825 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 167967, 목표가: 75000.0
2025-07-27 13:07:52,826 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 167967원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:07:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:07:52,827 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 167967원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:07:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:07:53,830 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:07:53,831 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:07:53,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 167967, 목표가: 76000.0
2025-07-27 13:07:53,832 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 167967원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:07:53,832 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:07:53,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 167967원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:07:54,835 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:07:54,836 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:07:54,837 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:07:54,837 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:07:54,837 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:07:54,838 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:08:52 KST)" executed successfully
2025-07-27 13:08:52,661 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:08:52,661 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:08:52.819898+09:00 (in 0.158252 seconds)
2025-07-27 13:08:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:08:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:09:52.819898+09:00 (in 59.999086 seconds)
2025-07-27 13:08:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:09:52 KST)" (scheduled at 2025-07-27 22:08:52.819898+09:00)
2025-07-27 13:08:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:08:52.821397
2025-07-27 13:08:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:08:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:08:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:08:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:08:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:08:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:08:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:08:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:08:52,826 - main - DEBUG - 종목 005930 현재가: 83867
2025-07-27 13:08:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:08:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 83867, 목표가: 75000.0
2025-07-27 13:08:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 83867원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 13:08:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:08:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 83867원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:08:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:08:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:08:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:08:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 83867, 목표가: 76000.0
2025-07-27 13:08:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 83867원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 13:08:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:08:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 83867원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:08:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:08:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:08:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:08:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:08:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:08:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:09:52 KST)" executed successfully
2025-07-27 13:09:52,649 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:09:52,649 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:09:52.819898+09:00 (in 0.170394 seconds)
2025-07-27 13:09:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:09:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:10:52.819898+09:00 (in 59.998870 seconds)
2025-07-27 13:09:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:10:52 KST)" (scheduled at 2025-07-27 22:09:52.819898+09:00)
2025-07-27 13:09:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:09:52.821682
2025-07-27 13:09:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:09:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:09:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:09:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:09:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:09:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:09:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:09:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:09:52,825 - main - DEBUG - 종목 005930 현재가: 60742
2025-07-27 13:09:52,825 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:09:52,826 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:09:52,826 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:09:52,826 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:09:52,827 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:09:52,827 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:10:52 KST)" executed successfully
2025-07-27 13:10:52,638 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:10:52,639 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:10:52.819898+09:00 (in 0.180890 seconds)
2025-07-27 13:10:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:10:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:11:52.819898+09:00 (in 59.998951 seconds)
2025-07-27 13:10:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:11:52 KST)" (scheduled at 2025-07-27 22:10:52.819898+09:00)
2025-07-27 13:10:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:10:52.821673
2025-07-27 13:10:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:10:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:10:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:10:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:10:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:10:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:10:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:10:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:10:52,826 - main - DEBUG - 종목 005930 현재가: 93899
2025-07-27 13:10:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:10:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 93899, 목표가: 75000.0
2025-07-27 13:10:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 93899원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 13:10:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:10:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 93899원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:10:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:10:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:10:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:10:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 93899, 목표가: 76000.0
2025-07-27 13:10:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 93899원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 13:10:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:10:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 93899원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:10:54,839 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:10:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:10:54,840 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:10:54,841 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:10:54,841 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:10:54,841 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:11:52 KST)" executed successfully
2025-07-27 13:11:52,643 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:11:52,644 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:11:52.819898+09:00 (in 0.175659 seconds)
2025-07-27 13:11:52,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:11:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:12:52.819898+09:00 (in 59.997958 seconds)
2025-07-27 13:11:52,822 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:12:52 KST)" (scheduled at 2025-07-27 22:11:52.819898+09:00)
2025-07-27 13:11:52,823 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:11:52.823000
2025-07-27 13:11:52,823 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:11:52,823 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:11:52,823 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:11:52,827 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:11:52,827 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:11:52,828 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:11:52,828 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:11:52,830 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:11:52,830 - main - DEBUG - 종목 005930 현재가: 126891
2025-07-27 13:11:52,830 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:11:52,831 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 126891, 목표가: 75000.0
2025-07-27 13:11:52,832 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 126891원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:11:52,832 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:11:52,833 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 126891원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:11:53,837 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:11:53,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:11:53,840 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:11:53,841 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 126891, 목표가: 76000.0
2025-07-27 13:11:53,843 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 126891원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:11:53,844 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:11:53,844 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 126891원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:11:54,849 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:11:54,850 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:11:54,851 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:11:54,851 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:11:54,851 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:11:54,852 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:12:52 KST)" executed successfully
2025-07-27 13:12:52,658 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:12:52,658 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:12:52.819898+09:00 (in 0.160999 seconds)
2025-07-27 13:12:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:12:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:13:52.819898+09:00 (in 59.998731 seconds)
2025-07-27 13:12:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:13:52 KST)" (scheduled at 2025-07-27 22:12:52.819898+09:00)
2025-07-27 13:12:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:12:52.822133
2025-07-27 13:12:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:12:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:12:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:12:52,825 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:12:52,825 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:12:52,825 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:12:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:12:52,827 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:12:52,828 - main - DEBUG - 종목 005930 현재가: 170149
2025-07-27 13:12:52,828 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:12:52,828 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 170149, 목표가: 75000.0
2025-07-27 13:12:52,830 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 170149원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:12:52,831 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:12:52,832 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 170149원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:12:53,836 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:12:53,837 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:12:53,837 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:12:53,838 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 170149, 목표가: 76000.0
2025-07-27 13:12:53,839 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 170149원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:12:53,840 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:12:53,840 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 170149원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:12:54,843 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:12:54,844 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:12:54,845 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:12:54,845 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:12:54,845 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:12:54,845 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:13:52 KST)" executed successfully
2025-07-27 13:13:52,650 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:13:52,650 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:13:52.819898+09:00 (in 0.169295 seconds)
2025-07-27 13:13:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:13:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:14:52.819898+09:00 (in 59.998846 seconds)
2025-07-27 13:13:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:14:52 KST)" (scheduled at 2025-07-27 22:13:52.819898+09:00)
2025-07-27 13:13:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:13:52.821968
2025-07-27 13:13:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:13:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:13:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:13:52,825 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:13:52,826 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:13:52,826 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:13:52,826 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:13:52,828 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:13:52,829 - main - DEBUG - 종목 005930 현재가: 88375
2025-07-27 13:13:52,829 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:13:52,829 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 88375, 목표가: 75000.0
2025-07-27 13:13:52,831 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 88375원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 13:13:52,832 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:13:52,832 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 88375원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:13:53,835 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:13:53,836 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:13:53,836 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:13:53,837 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 88375, 목표가: 76000.0
2025-07-27 13:13:53,838 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 88375원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 13:13:53,838 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:13:53,839 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 88375원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:13:54,841 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:13:54,842 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:13:54,843 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:13:54,843 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:13:54,843 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:13:54,844 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:14:52 KST)" executed successfully
2025-07-27 13:14:52,638 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:14:52,639 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:14:52.819898+09:00 (in 0.180831 seconds)
2025-07-27 13:14:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:14:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:15:52.819898+09:00 (in 59.998902 seconds)
2025-07-27 13:14:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:15:52 KST)" (scheduled at 2025-07-27 22:14:52.819898+09:00)
2025-07-27 13:14:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:14:52.821624
2025-07-27 13:14:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:14:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:14:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:14:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:14:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:14:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:14:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:14:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:14:52,826 - main - DEBUG - 종목 005930 현재가: 107615
2025-07-27 13:14:52,827 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:14:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 107615, 목표가: 75000.0
2025-07-27 13:14:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 107615원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:14:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:14:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 107615원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:14:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:14:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:14:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:14:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 107615, 목표가: 76000.0
2025-07-27 13:14:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 107615원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:14:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:14:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 107615원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:14:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:14:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:14:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:14:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:14:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:14:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:15:52 KST)" executed successfully
2025-07-27 13:15:52,655 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:15:52,655 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:15:52.819898+09:00 (in 0.164219 seconds)
2025-07-27 13:15:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:15:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:16:52.819898+09:00 (in 59.999014 seconds)
2025-07-27 13:15:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:16:52 KST)" (scheduled at 2025-07-27 22:15:52.819898+09:00)
2025-07-27 13:15:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:15:52.821566
2025-07-27 13:15:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:15:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:15:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:15:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:15:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:15:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:15:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:15:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:15:52,826 - main - DEBUG - 종목 005930 현재가: 53243
2025-07-27 13:15:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:15:52,826 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:15:52,827 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:15:52,827 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:15:52,827 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:15:52,827 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:16:52 KST)" executed successfully
2025-07-27 13:16:52,636 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:16:52,636 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:16:52.819898+09:00 (in 0.182924 seconds)
2025-07-27 13:16:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:16:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:17:52.819898+09:00 (in 59.998897 seconds)
2025-07-27 13:16:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:17:52 KST)" (scheduled at 2025-07-27 22:16:52.819898+09:00)
2025-07-27 13:16:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:16:52.821686
2025-07-27 13:16:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:16:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:16:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:16:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:16:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:16:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:16:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:16:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:16:52,825 - main - DEBUG - 종목 005930 현재가: 76949
2025-07-27 13:16:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:16:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 76949, 목표가: 75000.0
2025-07-27 13:16:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 76949원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 13:16:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:16:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 76949원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:16:53,830 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:16:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:16:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:16:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 76949, 목표가: 76000.0
2025-07-27 13:16:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 76949원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 13:16:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:16:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 76949원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:16:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:16:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:16:54,840 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:16:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:16:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:16:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:17:52 KST)" executed successfully
2025-07-27 13:17:52,641 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:17:52,641 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:17:52.819898+09:00 (in 0.178164 seconds)
2025-07-27 13:17:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:17:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:18:52.819898+09:00 (in 59.998915 seconds)
2025-07-27 13:17:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:18:52 KST)" (scheduled at 2025-07-27 22:17:52.819898+09:00)
2025-07-27 13:17:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:17:52.821843
2025-07-27 13:17:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:17:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:17:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:17:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:17:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:17:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:17:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:17:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:17:52,826 - main - DEBUG - 종목 005930 현재가: 112396
2025-07-27 13:17:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:17:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 112396, 목표가: 75000.0
2025-07-27 13:17:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 112396원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:17:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:17:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 112396원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:17:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:17:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:17:53,833 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:17:53,833 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 112396, 목표가: 76000.0
2025-07-27 13:17:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 112396원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:17:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:17:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 112396원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:17:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:17:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:17:54,840 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:17:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:17:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:17:54,841 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:18:52 KST)" executed successfully
2025-07-27 13:18:52,631 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:18:52,632 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:18:52.819898+09:00 (in 0.187880 seconds)
2025-07-27 13:18:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:18:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:19:52.819898+09:00 (in 59.998877 seconds)
2025-07-27 13:18:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:19:52 KST)" (scheduled at 2025-07-27 22:18:52.819898+09:00)
2025-07-27 13:18:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:18:52.821728
2025-07-27 13:18:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:18:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:18:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:18:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:18:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:18:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:18:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:18:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:18:52,825 - main - DEBUG - 종목 005930 현재가: 178111
2025-07-27 13:18:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:18:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 178111, 목표가: 75000.0
2025-07-27 13:18:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 178111원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:18:52,827 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:18:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 178111원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:18:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:18:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:18:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:18:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 178111, 목표가: 76000.0
2025-07-27 13:18:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 178111원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:18:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:18:53,834 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 178111원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:18:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:18:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:18:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:18:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:18:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:18:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:19:52 KST)" executed successfully
2025-07-27 13:19:52,633 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:19:52,634 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:19:52.819898+09:00 (in 0.185761 seconds)
2025-07-27 13:19:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:19:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:20:52.819898+09:00 (in 59.998857 seconds)
2025-07-27 13:19:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:20:52 KST)" (scheduled at 2025-07-27 22:19:52.819898+09:00)
2025-07-27 13:19:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:19:52.821985
2025-07-27 13:19:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:19:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:19:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:19:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:19:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:19:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:19:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:19:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:19:52,827 - main - DEBUG - 종목 005930 현재가: 71638
2025-07-27 13:19:52,827 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:19:52,827 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:19:52,828 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:19:52,828 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:19:52,828 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:19:52,828 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:20:52 KST)" executed successfully
2025-07-27 13:20:52,637 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:20:52,638 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:20:52.819898+09:00 (in 0.181924 seconds)
2025-07-27 13:20:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:20:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:21:52.819898+09:00 (in 59.998909 seconds)
2025-07-27 13:20:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:21:52 KST)" (scheduled at 2025-07-27 22:20:52.819898+09:00)
2025-07-27 13:20:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:20:52.821949
2025-07-27 13:20:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:20:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:20:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:20:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:20:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:20:52,825 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:20:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:20:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:20:52,826 - main - DEBUG - 종목 005930 현재가: 100157
2025-07-27 13:20:52,827 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:20:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 100157, 목표가: 75000.0
2025-07-27 13:20:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 100157원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:20:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:20:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 100157원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:20:53,832 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:20:53,833 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:20:53,834 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:20:53,834 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 100157, 목표가: 76000.0
2025-07-27 13:20:53,835 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 100157원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:20:53,836 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:20:53,836 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 100157원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:20:54,840 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:20:54,841 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:20:54,841 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:20:54,842 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:20:54,842 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:20:54,842 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:21:52 KST)" executed successfully
2025-07-27 13:21:52,643 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:21:52,643 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:21:52.819898+09:00 (in 0.175972 seconds)
2025-07-27 13:21:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:21:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:22:52.819898+09:00 (in 59.998393 seconds)
2025-07-27 13:21:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:22:52 KST)" (scheduled at 2025-07-27 22:21:52.819898+09:00)
2025-07-27 13:21:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:21:52.822235
2025-07-27 13:21:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:21:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:21:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:21:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:21:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:21:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:21:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:21:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:21:52,826 - main - DEBUG - 종목 005930 현재가: 175007
2025-07-27 13:21:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:21:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 175007, 목표가: 75000.0
2025-07-27 13:21:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 175007원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:21:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:21:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 175007원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:21:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:21:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:21:53,833 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:21:53,833 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 175007, 목표가: 76000.0
2025-07-27 13:21:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 175007원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:21:53,835 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:21:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 175007원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:21:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:21:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:21:54,840 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:21:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:21:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:21:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:22:52 KST)" executed successfully
2025-07-27 13:22:52,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:22:52,640 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:22:52.819898+09:00 (in 0.179767 seconds)
2025-07-27 13:22:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:22:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:23:52.819898+09:00 (in 59.998769 seconds)
2025-07-27 13:22:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:23:52 KST)" (scheduled at 2025-07-27 22:22:52.819898+09:00)
2025-07-27 13:22:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:22:52.822052
2025-07-27 13:22:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:22:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:22:52,822 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:22:52,824 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:22:52,824 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:22:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:22:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:22:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:22:52,825 - main - DEBUG - 종목 005930 현재가: 125589
2025-07-27 13:22:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:22:52,826 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 125589, 목표가: 75000.0
2025-07-27 13:22:52,827 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 125589원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:22:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:22:52,828 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 125589원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:22:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:22:53,831 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:22:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:22:53,832 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 125589, 목표가: 76000.0
2025-07-27 13:22:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 125589원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:22:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:22:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 125589원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:22:54,837 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:22:54,839 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:22:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:22:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:22:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:22:54,841 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:23:52 KST)" executed successfully
2025-07-27 13:23:52,639 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:23:52,639 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:23:52.819898+09:00 (in 0.179930 seconds)
2025-07-27 13:23:52,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:23:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:24:52.819898+09:00 (in 59.998068 seconds)
2025-07-27 13:23:52,821 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:24:52 KST)" (scheduled at 2025-07-27 22:23:52.819898+09:00)
2025-07-27 13:23:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:23:52.822530
2025-07-27 13:23:52,822 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:23:52,822 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:23:52,823 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:23:52,825 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:23:52,825 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:23:52,825 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:23:52,825 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:23:52,826 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:23:52,827 - main - DEBUG - 종목 005930 현재가: 165267
2025-07-27 13:23:52,827 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:23:52,827 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 165267, 목표가: 75000.0
2025-07-27 13:23:52,828 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 165267원이 목표가 75000.0원(gte)에 도달...
2025-07-27 13:23:52,828 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:23:52,829 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 165267원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:23:53,831 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:23:53,832 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:23:53,832 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:23:53,833 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 165267, 목표가: 76000.0
2025-07-27 13:23:53,834 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 165267원이 목표가 76000.0원(gte)에 도달...
2025-07-27 13:23:53,834 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:23:53,835 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 165267원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:23:54,838 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:23:54,838 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:23:54,839 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:23:54,840 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:23:54,840 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:23:54,840 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:24:52 KST)" executed successfully
2025-07-27 13:24:52,628 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:24:52,628 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:24:52.819898+09:00 (in 0.190977 seconds)
2025-07-27 13:24:52,820 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:24:52,820 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:25:52.819898+09:00 (in 59.999128 seconds)
2025-07-27 13:24:52,820 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:25:52 KST)" (scheduled at 2025-07-27 22:24:52.819898+09:00)
2025-07-27 13:24:52,821 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:24:52.821442
2025-07-27 13:24:52,821 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:24:52,821 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:24:52,821 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:24:52,823 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:24:52,823 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:24:52,824 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:24:52,824 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:24:52,825 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:24:52,826 - main - DEBUG - 종목 005930 현재가: 74027
2025-07-27 13:24:52,826 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:24:52,826 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:24:52,827 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:24:52,827 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:24:52,827 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:24:52,827 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:25:52 KST)" executed successfully
2025-07-27 13:25:52,605 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:25:52,606 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:25:52.819898+09:00 (in 0.213111 seconds)
2025-07-27 13:25:52,821 - apscheduler.scheduler - DEBUG - Looking for jobs to run
2025-07-27 13:25:52,821 - apscheduler.scheduler - DEBUG - Next wakeup is due at 2025-07-27 22:26:52.819898+09:00 (in 59.998076 seconds)
2025-07-27 13:25:52,822 - apscheduler.executors.default - INFO - Running job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:26:52 KST)" (scheduled at 2025-07-27 22:25:52.819898+09:00)
2025-07-27 13:25:52,822 - main - INFO - [APScheduler] 가격 알림 체크 잡 실행: 2025-07-27 13:25:52.822698
2025-07-27 13:25:52,823 - src.common.db_connector - DEBUG - DB 세션 시작.
2025-07-27 13:25:52,823 - src.api.services.price_alert_service - DEBUG - PriceAlertService 초기화.
2025-07-27 13:25:52,823 - src.api.services.price_alert_service - DEBUG - 모든 활성화된 가격 알림 조회 시도.
2025-07-27 13:25:52,827 - src.api.services.price_alert_service - DEBUG - 활성화된 가격 알림 2개 조회됨.
2025-07-27 13:25:52,832 - main - DEBUG - 활성 알림 수: 2
2025-07-27 13:25:52,832 - main - DEBUG - 종목 005930에 대한 알림 확인 시작. 알림 수: 2
2025-07-27 13:25:52,832 - src.api.services.stock_service - DEBUG - get_current_price_and_change 호출: symbol=005930
2025-07-27 13:25:52,835 - src.api.services.stock_service - WARNING - 현재가 없음: 005930. 임시 가격 생성.
2025-07-27 13:25:52,836 - main - DEBUG - 종목 005930 현재가: 78306
2025-07-27 13:25:52,836 - main - DEBUG - 알림 ID: 1, 목표 가격: 75000.0, 조건: gte, 반복 주기: daily
2025-07-27 13:25:52,836 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 78306, 목표가: 75000.0
2025-07-27 13:25:52,839 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12345, text: 🔔 가격 알림: 005930
현재가 78306원이 목표가 75000.0원(gte)에 도달했...
2025-07-27 13:25:52,839 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:25:52,840 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12345, 'text': '🔔 가격 알림: 005930\n현재가 78306원이 목표가 75000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:25:53,844 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12345, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:25:53,845 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12345)
2025-07-27 13:25:53,846 - main - DEBUG - 알림 ID: 2, 목표 가격: 76000.0, 조건: gte, 반복 주기: weekly
2025-07-27 13:25:53,846 - main - INFO - 가격 알림 트리거됨: 005930, 현재가: 78306, 목표가: 76000.0
2025-07-27 13:25:53,848 - src.common.notify_service - DEBUG - Attempting to send message to chat_id: 12346, text: 🔔 가격 알림: 005930
현재가 78306원이 목표가 76000.0원(gte)에 도달했...
2025-07-27 13:25:53,849 - asyncio - DEBUG - Using selector: EpollSelector
2025-07-27 13:25:53,849 - telegram.Bot - DEBUG - Calling Bot API endpoint `sendMessage` with parameters `{'chat_id': 12346, 'text': '🔔 가격 알림: 005930\n현재가 78306원이 목표가 76000.0원(gte)에 도달했습니다.'}`
2025-07-27 13:25:54,853 - src.common.notify_service - ERROR - [텔레그램 알림 전송 실패] chat_id: 12346, error: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 394, in handle_async_request
    resp = await self._pool.handle_async_request(req)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 232, in handle_async_request
    connection = await pool_request.wait_for_connection(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_async/connection_pool.py", line 35, in wait_for_connection
    await self._connection_acquired.wait(timeout=timeout)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_synchronization.py", line 149, in wait
    with map_exceptions(anyio_exc_map):
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 273, in do_request
    res = await self._client.request(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1540, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1629, in send
    response = await self._send_handling_auth(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1657, in _send_handling_auth
    response = await self._send_handling_redirects(
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects
    response = await self._send_single_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_client.py", line 1730, in _send_single_request
    response = await transport.handle_async_request(request)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 393, in handle_async_request
    with map_httpcore_exceptions():
  File "/usr/local/lib/python3.10/contextlib.py", line 153, in __exit__
    self.gen.throw(typ, value, traceback)
  File "/usr/local/lib/python3.10/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.PoolTimeout

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/app/src/common/notify_service.py", line 15, in send_telegram_message
    message = asyncio.run(bot.send_message(chat_id=chat_id, text=text))
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
  File "/usr/local/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 1100, in send_message
    return await self._send_message(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 810, in _send_message
    result = await self._post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 698, in _post
    return await self._do_post(
  File "/usr/local/lib/python3.10/site-packages/telegram/_bot.py", line 727, in _do_post
    result = await request.post(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 197, in post
    result = await self._request_wrapper(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_baserequest.py", line 304, in _request_wrapper
    code, payload = await self.do_request(
  File "/usr/local/lib/python3.10/site-packages/telegram/request/_httpxrequest.py", line 283, in do_request
    raise TimedOut(
telegram.error.TimedOut: Pool timeout: All connections in the connection pool are occupied. Request was *not* sent to Telegram. Consider adjusting the connection pool size or the pool timeout.
2025-07-27 13:25:54,854 - main - DEBUG - 텔레그램 메시지 전송 완료 (chat_id: 12346)
2025-07-27 13:25:54,855 - main - DEBUG - 종목 005930에 대한 알림 처리 완료 및 DB 커밋.
2025-07-27 13:25:54,855 - main - DEBUG - 모든 가격 알림 체크 및 DB 커밋 완료.
2025-07-27 13:25:54,856 - src.common.db_connector - DEBUG - DB 세션 종료.
2025-07-27 13:25:54,856 - apscheduler.executors.default - INFO - Job "check_price_alerts_job (trigger: interval[0:01:00], next run at: 2025-07-27 22:26:52 KST)" executed successfully
